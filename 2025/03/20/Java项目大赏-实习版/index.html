<!doctypehtml><html lang=zh-CN><script defer src=/live2d-widget/autoload.js></script><meta charset=UTF-8><meta content=width=device-width,initial-scale=1,maximum-scale=2 name=viewport><meta content=#222 name=theme-color><meta content="Hexo 5.4.0" name=generator><link href=/images/blog_32px.png rel=apple-touch-icon sizes=180x180><link href=/images/blog_32px.png rel=icon sizes=32x32 type=image/png><link href=/images/blog_16px.png rel=icon sizes=16x16 type=image/png><link color=#222 href=/images/logo.svg rel=mask-icon><meta content=EPrJAp11bJwHULpQUaSNSZ8_3RcvTsPDAEGOME4pl1w name=google-site-verification><!-- Google tag (gtag.js) --><!-- 
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VB21D8MKKW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VB21D8MKKW');
</script> --><!-- google adsense in head.swig --><script async crossorigin=anonymous src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4034523802263123></script><meta content=7226864CE87CE9DE8C008385273846FF name=msvalidate.01><meta content=code-fjFXVtiL7j name=baidu-site-verification><link href=/css/main.css rel=stylesheet><link as=style href=https://fonts.googleapis.com/css?family=Roboto%20Mono,Roboto:300,300italic,400,400italic,700,700italic|Roboto:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext onload=this.rel='stylesheet' rel=preload><link as=style href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css onload=this.rel='stylesheet' rel=preload><link href=https://fonts.googleapis.com/css?family=Noto+Serif+SC|Roboto&display=swap rel=stylesheet><link href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/pace-js@1/pace.min.js></script><script id=hexo-configurations>var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.sekyoro.top","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":240,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"0F9LEEVW82","apiKey":"78839e9f9be09d081c5c4da81975cd19","indexName":"sekyoblog_sec","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};</script><link href=//cdn.bootcss.com/animate.css/3.5.0/animate.min.css rel=stylesheet><meta content=最近在准备实习,找一些烂大街经典项目练练手. name=description><meta content=article property=og:type><meta content=Java项目大赏(实习版) property=og:title><meta content=https://www.sekyoro.top/2025/03/20/Java%E9%A1%B9%E7%9B%AE%E5%A4%A7%E8%B5%8F-%E5%AE%9E%E4%B9%A0%E7%89%88/index.html property=og:url><meta content=Sekyoro的博客小屋 property=og:site_name><meta content=最近在准备实习,找一些烂大街经典项目练练手. property=og:description><meta content=zh_CN property=og:locale><meta content=https://s2.loli.net/2025/04/22/q8oS52LepZjOgHc.png property=og:image><meta content=https://s2.loli.net/2025/04/12/TEPKoIHGYOma4Jy.png property=og:image><meta content=https://s2.loli.net/2025/04/13/IPJL4xzF2aGAOfN.png property=og:image><meta content=https://s2.loli.net/2025/04/13/VKJzFQulyvWTSfa.png property=og:image><meta content=https://s2.loli.net/2025/03/20/VqbA8F34U17C9xZ.png property=og:image><meta content=https://s2.loli.net/2025/04/14/xZREAUpPzkQBiVF.png property=og:image><meta content=https://s2.loli.net/2025/04/14/bVvPz25pxkyMqB9.png property=og:image><meta content=https://s2.loli.net/2025/04/14/36voF12n9YepEkI.png property=og:image><meta content=https://s2.loli.net/2025/04/14/sUTIzrhMgqNpR7H.png property=og:image><meta content=https://s2.loli.net/2025/04/14/HTdpXizlnASGQqv.png property=og:image><meta content=https://s2.loli.net/2025/04/14/jc9OQH8oFwMLz5K.png property=og:image><meta content=https://s2.loli.net/2025/04/15/p72NIzH9MfZaxnR.png property=og:image><meta content=https://s2.loli.net/2025/04/15/y7bowaDxTL2f8GJ.png property=og:image><meta content=https://s2.loli.net/2025/04/15/TU3KbireNcB4G67.png property=og:image><meta content=https://s2.loli.net/2025/04/15/CFEZY2mKqnwljAW.png property=og:image><meta content=https://s2.loli.net/2025/04/15/LqgUJKSZD9Gfad6.png property=og:image><meta content=https://s2.loli.net/2025/04/15/MozbdO6Ly2aCI4E.png property=og:image><meta content=https://s2.loli.net/2025/04/15/aujZnwSzgiUxloL.png property=og:image><meta content=https://s2.loli.net/2025/04/15/xBTlfUn6WmDpwIJ.png property=og:image><meta content=https://s2.loli.net/2025/04/15/Tcd5tCruUKo6wvM.png property=og:image><meta content=https://s2.loli.net/2025/04/15/x5ayubhtcrSK8qQ.png property=og:image><meta content=https://s2.loli.net/2025/04/15/EBpdcml8I7tLvxU.png property=og:image><meta content=https://s2.loli.net/2025/04/15/3LSmM7p8e5gfXcN.png property=og:image><meta content=https://s2.loli.net/2025/04/15/tXm5rvyNMhbxeYL.png property=og:image><meta content=https://s2.loli.net/2025/04/16/zTXyB8Uo7RKWmc2.png property=og:image><meta content=https://s2.loli.net/2025/04/16/9QRuCerNJpmcHaf.png property=og:image><meta content=https://s2.loli.net/2025/04/16/3tu9mqXVNyoDZYT.png property=og:image><meta content=https://s2.loli.net/2025/04/16/eCKmRn4QDs7pSLA.png property=og:image><meta content=https://s2.loli.net/2025/04/17/t4sZY1NizPOvRcX.png property=og:image><meta content=https://s2.loli.net/2025/04/17/JBC3Xe1HPmpfnwa.png property=og:image><meta content=https://s2.loli.net/2025/04/17/X7GMsSg59QjnaRf.png property=og:image><meta content=https://s2.loli.net/2025/04/17/AG1vHk7s2u6FexB.png property=og:image><meta content=https://s2.loli.net/2025/04/17/2jkGcgNIYylmQL8.png property=og:image><meta content=https://s2.loli.net/2025/04/17/lytxPu8ZirBRH5s.png property=og:image><meta content=https://s2.loli.net/2025/04/17/EYhwIoeVBgmkHfU.png property=og:image><meta content=https://s2.loli.net/2025/04/17/UiIyGpJA4RoP7Dh.png property=og:image><meta content=https://s2.loli.net/2025/04/18/cn3NCI9O24upUlg.png property=og:image><meta content=https://s2.loli.net/2025/04/18/IRiKpLMBV1cCUs3.png property=og:image><meta content=https://s2.loli.net/2025/04/18/bS3QAUKsTHoRY1q.png property=og:image><meta content=https://s2.loli.net/2025/04/18/ayrfSevJ8TdGUF3.png property=og:image><meta content=https://s2.loli.net/2025/04/18/9ih5CDwLBlKNERW.png property=og:image><meta content=https://www.runoob.com/wp-content/uploads/2014/11/pubsub2.png property=og:image><meta content=https://www.runoob.com/wp-content/uploads/2014/11/pubsub1.png property=og:image><meta content=https://s2.loli.net/2025/04/18/7LEADu5klUBta8Q.png property=og:image><meta content=https://s2.loli.net/2025/04/18/2lE9g7iU3WBpsIy.png property=og:image><meta content=https://www.runoob.com/wp-content/uploads/2020/09/en-us_image_0167982791.png property=og:image><meta content=https://s2.loli.net/2025/04/18/N41xhBcZ6qTWUiG.png property=og:image><meta content=https://s2.loli.net/2025/04/18/JE9ZNCxDHaBWpw1.png property=og:image><meta content=https://s2.loli.net/2025/04/18/oTspnQeVrkqgOcv.png property=og:image><meta content=https://s2.loli.net/2025/04/18/sVrCm1K7YTewhaq.png property=og:image><meta content=https://s2.loli.net/2025/04/18/ay8uA5fSi3RvTMV.png property=og:image><meta content=https://s2.loli.net/2025/04/19/4rg9LteAzoDlaWb.png property=og:image><meta content=https://s2.loli.net/2025/04/19/muwJasz9gGTxAHK.png property=og:image><meta content=https://s2.loli.net/2025/04/20/p92Zqc4evEjimXY.png property=og:image><meta content=https://s2.loli.net/2025/04/20/Y2jI3QHEemkOBvi.png property=og:image><meta content=https://s2.loli.net/2025/04/20/OqkUF4G21LYZM5K.png property=og:image><meta content=https://s2.loli.net/2025/04/20/hNcu5avy2WmPBMk.png property=og:image><meta content=https://s2.loli.net/2025/04/20/thV71ZUKQlaqs3i.png property=og:image><meta content=https://s2.loli.net/2025/04/20/gCqrxOB86TdfhLb.png property=og:image><meta content=https://s2.loli.net/2025/04/21/8wXL5PpFBWu1c6K.png property=og:image><meta content=https://s2.loli.net/2025/04/21/9IYeW5iocs3u1PB.png property=og:image><meta content=https://s2.loli.net/2025/04/22/61cqOWxZMwnfemh.png property=og:image><meta content=https://s2.loli.net/2025/04/22/aGspbuONkSMdqxf.png property=og:image><meta content=https://s2.loli.net/2025/04/22/dfuNzSwYlVOsJD1.png property=og:image><meta content=https://s2.loli.net/2025/04/22/MEm6zF5nt28TBch.png property=og:image><meta content=https://s2.loli.net/2025/04/22/ztXRO9DFqkU68xV.png property=og:image><meta content=2025-03-20T09:38:06.000Z property=article:published_time><meta content=2025-04-22T06:46:32.793Z property=article:modified_time><meta content=Sekyoro property=article:author><meta content=Java property=article:tag><meta content=summary name=twitter:card><meta content=https://s2.loli.net/2025/04/22/q8oS52LepZjOgHc.png name=twitter:image><link href=https://www.sekyoro.top/2025/03/20/Java%E9%A1%B9%E7%9B%AE%E5%A4%A7%E8%B5%8F-%E5%AE%9E%E4%B9%A0%E7%89%88/ rel=canonical><script id=page-configurations>// https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };</script><title>Java项目大赏(实习版) | Sekyoro的博客小屋</title><noscript><style>.use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }</style></noscript><link href=/atom.xml rel=alternate title=Sekyoro的博客小屋 type=application/atom+xml><body itemscope itemtype=http://schema.org/WebPage><canvas style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" class=fireworks></canvas><script defer src=https://cdn.bootcss.com/animejs/2.2.0/anime.min.js></script><script defer src=/js/src/fireworks.js></script><div class="container use-motion"><div class=headband></div><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div aria-label=切换导航栏 class=toggle><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class=site-meta><a class=brand href=/ rel=start> <span class=logo-line-before><i></i></span> <h1 class=site-title>Sekyoro的博客小屋</h1> <span class=logo-line-after><i></i></span> </a></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu" id=menu><li class="menu-item menu-item-home"><a href=/ rel=section><i class="fa fa-home fa-fw"></i>首页</a><li class="menu-item menu-item-about"><a href=/about/ rel=section><i class="fa fa-user fa-fw"></i>关于</a><li class="menu-item menu-item-tags"><a href=/tags/ rel=section><i class="fa fa-tags fa-fw"></i>标签</a><li class="menu-item menu-item-categories"><a href=/categories/ rel=section><i class="fa fa-th fa-fw"></i>分类</a><li class="menu-item menu-item-archives"><a href=/archives/ rel=section><i class="fa fa-archive fa-fw"></i>归档</a><li class="menu-item menu-item-bangumis"><a href=/bangumis/ rel=section><i class="fa fa-film fa-fw"></i>追番</a><li class="menu-item menu-item-resume"><a href=/resume/ rel=section><i class="fa fa-file-pdf fa-fw"></i>简历</a><li class="menu-item menu-item-materials"><a href=/materials/ rel=section><i class="fa fa-book fa-fw"></i>学习资料</a><li class="menu-item menu-item-sitemap"><a href=/sitemap.xml rel=section><i class="fa fa-sitemap fa-fw"></i>站点地图</a><li class="menu-item menu-item-search"><a class=popup-trigger role=button><i class="fa fa-search fa-fw"></i>搜索 </a></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon> <i class="fa fa-search"></i> </span><div class=search-input-container></div><span class=popup-btn-close> <i class="fa fa-times-circle"></i> </span></div><div class=algolia-results><div id=algolia-stats></div><div id=algolia-hits></div><div class=algolia-pagination id=algolia-pagination></div></div></div></div></div></header><a class="book-mark-link book-mark-link-fixed" role=button></a><main class=main><div class=main-inner><div class=content-wrap><div class="content post posts-expand"><article class=post-block itemscope itemtype=http://schema.org/Article lang=zh-CN><link href=https://www.sekyoro.top/2025/03/20/Java%E9%A1%B9%E7%9B%AE%E5%A4%A7%E8%B5%8F-%E5%AE%9E%E4%B9%A0%E7%89%88/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://i.loli.net/2021/05/17/YqoavnXdGTpPO9R.jpg itemprop=image> <meta content=Sekyoro itemprop=name> <meta content=什么也无法舍弃的人，什么也做不了. itemprop=description> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content=Sekyoro的博客小屋 itemprop=name> </span><header class=post-header><h1 itemprop="name headline" class=post-title>Java项目大赏(实习版)</h1><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2025-03-20 17:38:06" datetime=2025-03-20T17:38:06+08:00>2025-03-20</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2025-04-22 14:46:32" datetime=2025-04-22T14:46:32+08:00 itemprop=dateModified>2025-04-22</time> </span><span style="display: none;" class=post-meta-item id=busuanzi_container_page_pv title=阅读次数> <span class=post-meta-item-icon> <i class="fa fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span id=busuanzi_value_page_pv></span> </span><br><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>12k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>11 分钟</span> </span></div></header><div class=post-body itemprop=articleBody><p>最近在准备实习,找一些<del>烂大街</del>经典项目练练手.<br><span id=more></span><h2 id=苍穹外卖><a class=headerlink href=#苍穹外卖 title=苍穹外卖></a>苍穹外卖</h2><p>一个项目通常包含公共类(常量,工具以及异常)部分以及实体类部分<p><img alt=image-20250422144407360 data-src=https://s2.loli.net/2025/04/22/q8oS52LepZjOgHc.png><p>此外还有service,controller,mapper(repository)层以及一些配置类,拦截器等<h2 id=黑马点评><a class=headerlink href=#黑马点评 title=黑马点评></a>黑马点评</h2><p>缓存作用: 降低后端负载,提升读写速度<p>开发成本和维护一致性问题<h3 id=Redis学习><a class=headerlink href=#Redis学习 title=Redis学习></a>Redis学习</h3><p><a href=https://redis.io/docs/latest/develop/clients/jedis/ rel=noopener target=_blank>Jedis guide (Java) | Docs</a><figure class="highlight xml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>dependency</span>></span></span><br><span class=line>    <span class=tag><<span class=name>groupId</span>></span>redis.clients<span class=tag>&LT/<span class=name>groupId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>artifactId</span>></span>jedis<span class=tag>&LT/<span class=name>artifactId</span>></span></span><br><span class=line>    <span class=tag><<span class=name>version</span>></span>5.2.0<span class=tag>&LT/<span class=name>version</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>dependency</span>></span></span><br></pre></table></figure><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=class><span class=keyword>class</span> <span class=title>JedisTest</span> </span>{</span><br><span class=line>    <span class=keyword>private</span> Jedis jedis;</span><br><span class=line></span><br><span class=line>    <span class=meta>@BeforeEach</span></span><br><span class=line>    <span class=function><span class=keyword>public</span> <span class=keyword>void</span> <span class=title>setUp</span><span class=params>()</span> </span>{</span><br><span class=line>        <span class=comment>// 初始化 Jedis 连接</span></span><br><span class=line>        jedis = <span class=keyword>new</span> Jedis(<span class=string>"localhost"</span>, <span class=number>6379</span>); <span class=comment>// 假设 Redis 服务运行在本地，默认端口为 6379</span></span><br><span class=line>        System.out.println(<span class=string>"Connected to Redis"</span>);</span><br><span class=line>        <span class=comment>// 清空 Redis 数据库，确保测试环境干净</span></span><br><span class=line>        jedis.flushAll();</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=comment>// 在每个测试方法执行之后运行</span></span><br><span class=line>    <span class=meta>@AfterEach</span></span><br><span class=line>    <span class=function><span class=keyword>public</span> <span class=keyword>void</span> <span class=title>tearDown</span><span class=params>()</span> </span>{</span><br><span class=line>        <span class=comment>// 关闭 Jedis 连接</span></span><br><span class=line>        <span class=keyword>if</span> (jedis != <span class=keyword>null</span>) {</span><br><span class=line>            jedis.close();</span><br><span class=line>            System.out.println(<span class=string>"Disconnected from Redis"</span>);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=meta>@Test</span></span><br><span class=line>    <span class=function><span class=keyword>public</span> <span class=keyword>void</span> <span class=title>testString</span><span class=params>()</span> </span>{</span><br><span class=line>        String result = jedis.set(<span class=string>"name"</span>,<span class=string>"proanimer"</span>);</span><br><span class=line>        System.out.println(<span class=string>"result = "</span> + result);</span><br><span class=line>        String name = jedis.get(<span class=string>"name"</span>);</span><br><span class=line>        System.out.println(<span class=string>"name = "</span> + name);</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=meta>@Test</span></span><br><span class=line>    <span class=function><span class=keyword>public</span> <span class=keyword>void</span> <span class=title>testHash</span><span class=params>()</span> </span>{</span><br><span class=line>        jedis.hset(<span class=string>"user:1"</span>,<span class=string>"name"</span>,<span class=string>"proanimer"</span>);</span><br><span class=line>        jedis.hset(<span class=string>"user:2"</span>, <span class=string>"age"</span>, <span class=string>"24"</span>);</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>}</span><br><span class=line></span><br></pre></table></figure><p><img style="zoom: 50%;" alt=image-20250412221454173 data-src=https://s2.loli.net/2025/04/12/TEPKoIHGYOma4Jy.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=class><span class=keyword>class</span> <span class=title>JedisConnectionFactory</span> </span>{</span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>final</span> JedisPool jedisPool;</span><br><span class=line>    <span class=keyword>static</span> {</span><br><span class=line>        <span class=comment>//配置连接池</span></span><br><span class=line>        JedisPoolConfig jedisPoolConfig = <span class=keyword>new</span> JedisPoolConfig();</span><br><span class=line>        jedisPoolConfig.setMaxIdle(<span class=number>10</span>);</span><br><span class=line>        jedisPoolConfig.setMaxTotal(<span class=number>10</span>);</span><br><span class=line>        jedisPoolConfig.setMinIdle(<span class=number>0</span>);</span><br><span class=line>        jedisPoolConfig.setMaxWait(Duration.of(<span class=number>10</span>, ChronoUnit.SECONDS));</span><br><span class=line>        <span class=comment>// 创建连接池</span></span><br><span class=line>        jedisPool = <span class=keyword>new</span> JedisPool(jedisPoolConfig,<span class=string>"127.0.0.1"</span>,<span class=number>6379</span>);</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=function><span class=keyword>public</span> <span class=keyword>static</span> Jedis <span class=title>getJedis</span><span class=params>()</span> </span>{</span><br><span class=line>        <span class=keyword>return</span> jedisPool.getResource();</span><br><span class=line>    }</span><br><span class=line>}</span><br><span class=line></span><br></pre></table></figure><h3 id=Spring-Data-Redis><a title="Spring Data Redis" class=headerlink href=#Spring-Data-Redis></a>Spring Data Redis</h3><p><a href=https://spring.io/projects/spring-data-redis rel=noopener target=_blank>Spring Data Redis</a><p><img alt=image-20250413141133598 data-src=https://s2.loli.net/2025/04/13/IPJL4xzF2aGAOfN.png style=zoom:50%;><h4 id=序列化器><a class=headerlink href=#序列化器 title=序列化器></a>序列化器</h4><p>在使用 Spring Data Redis 时，序列化器（Serializer）用于<strong>将 Java 对象转换为适合存储在 Redis 中的格式</strong>（如字节数组），并在从 Redis 读取数据时将其反序列化回 Java 对象。选择合适的序列化器对于确保数据正确性以及优化性能非常重要。默认序列化器是JDK序列化器.<h4 id=1-JdkSerializationRedisSerializer><a title="1. JdkSerializationRedisSerializer" class=headerlink href=#1-JdkSerializationRedisSerializer></a>1. <code>JdkSerializationRedisSerializer</code></h4><ul><li><strong>描述</strong>：这是默认的序列化器，使用 Java 的序列化机制来处理对象。<li><strong>优点</strong>：支持任意类型的 Java 对象。<li><strong>缺点</strong>：生成的数据较大，效率较低，并且只有在同一 JVM 环境下才能正确反序列化。</ul><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=meta>@Bean</span></span><br><span class=line><span class=function><span class=keyword>public</span> RedisTemplate&LTString, Object> <span class=title>redisTemplate</span><span class=params>(RedisConnectionFactory factory)</span> </span>{</span><br><span class=line>    RedisTemplate&LTString, Object> template = <span class=keyword>new</span> RedisTemplate<>();</span><br><span class=line>    template.setConnectionFactory(factory);</span><br><span class=line>    template.setValueSerializer(<span class=keyword>new</span> JdkSerializationRedisSerializer());</span><br><span class=line>    <span class=keyword>return</span> template;</span><br><span class=line>}</span><br></pre></table></figure><h4 id=2-StringRedisSerializer><a title="2. StringRedisSerializer" class=headerlink href=#2-StringRedisSerializer></a>2. <code>StringRedisSerializer</code></h4><ul><li><strong>描述</strong>：专门用于字符串的序列化器，能够高效地处理字符串类型的数据。<li><strong>优点</strong>：简单、快速，适用于大多数键值对场景。<li><strong>缺点</strong>：仅限于字符串类型的数据。</ul><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=meta>@Bean</span></span><br><span class=line><span class=function><span class=keyword>public</span> RedisTemplate&LTString, String> <span class=title>stringRedisTemplate</span><span class=params>(RedisConnectionFactory factory)</span> </span>{</span><br><span class=line>    StringRedisTemplate template = <span class=keyword>new</span> StringRedisTemplate();</span><br><span class=line>    template.setConnectionFactory(factory);</span><br><span class=line>    <span class=keyword>return</span> template;</span><br><span class=line>}</span><br></pre></table></figure><h4 id=3-GenericJackson2JsonRedisSerializer><a title="3. GenericJackson2JsonRedisSerializer" class=headerlink href=#3-GenericJackson2JsonRedisSerializer></a>3. <code>GenericJackson2JsonRedisSerializer</code></h4><ul><li><strong>描述</strong>：使用 Jackson 库将对象序列化为 JSON 格式。<li><strong>优点</strong>：易于阅读和调试，支持复杂对象结构。<li><strong>缺点</strong>：相对于其他二进制格式（如 Protocol Buffers），JSON 的体积更大，解析速度较慢。</ul><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=meta>@Bean</span></span><br><span class=line><span class=function><span class=keyword>public</span> RedisTemplate&LTString, Object> <span class=title>redisTemplate</span><span class=params>(RedisConnectionFactory factory)</span> </span>{</span><br><span class=line>    RedisTemplate&LTString, Object> template = <span class=keyword>new</span> RedisTemplate<>();</span><br><span class=line>    template.setConnectionFactory(factory);</span><br><span class=line>    template.setValueSerializer(<span class=keyword>new</span> GenericJackson2JsonRedisSerializer());</span><br><span class=line>    <span class=keyword>return</span> template;</span><br><span class=line>}</span><br></pre></table></figure><h4 id=4-Jackson2JsonRedisSerializer><a title="4. Jackson2JsonRedisSerializer" class=headerlink href=#4-Jackson2JsonRedisSerializer></a>4. <code>Jackson2JsonRedisSerializer</code></h4><ul><li><strong>描述</strong>：类似于 <code>GenericJackson2JsonRedisSerializer</code>，但它允许你指定序列化的具体类型。<li><strong>优点</strong>：可以更精确地控制序列化过程。<li><strong>缺点</strong>：需要提前知道序列化对象的确切类型。</ul><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre><td class=code><pre><span class=line><span class=meta>@Bean</span></span><br><span class=line><span class=function><span class=keyword>public</span> RedisTemplate&LTString, MyObject> <span class=title>redisTemplate</span><span class=params>(RedisConnectionFactory factory)</span> </span>{</span><br><span class=line>    RedisTemplate&LTString, MyObject> template = <span class=keyword>new</span> RedisTemplate<>();</span><br><span class=line>    template.setConnectionFactory(factory);</span><br><span class=line>    Jackson2JsonRedisSerializer&LTMyObject> serializer = <span class=keyword>new</span> Jackson2JsonRedisSerializer<>(MyObject.class);</span><br><span class=line>    template.setValueSerializer(serializer);</span><br><span class=line>    <span class=keyword>return</span> template;</span><br><span class=line>}</span><br></pre></table></figure><h4 id=5-OxmSerializer><a title="5. OxmSerializer" class=headerlink href=#5-OxmSerializer></a>5. <code>OxmSerializer</code></h4><ul><li><strong>描述</strong>：用于 XML 数据的序列化/反序列化。<li><strong>优点</strong>：适用于需要以 XML 格式存储数据的场景。<li><strong>缺点</strong>：XML 数据通常比 JSON 更大，处理速度也较慢。</ul><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre><td class=code><pre><span class=line><span class=meta>@Bean</span></span><br><span class=line><span class=function><span class=keyword>public</span> RedisTemplate&LTString, Object> <span class=title>redisTemplate</span><span class=params>(RedisConnectionFactory factory)</span> </span>{</span><br><span class=line>    RedisTemplate&LTString, Object> template = <span class=keyword>new</span> RedisTemplate<>();</span><br><span class=line>    template.setConnectionFactory(factory);</span><br><span class=line>    OxmSerializer serializer = <span class=keyword>new</span> Jaxb2Marshaller(); <span class=comment>// 示例使用 JAXB</span></span><br><span class=line>    template.setValueSerializer(serializer);</span><br><span class=line>    <span class=keyword>return</span> template;</span><br><span class=line>}</span><br></pre></table></figure><h4 id=6-自定义序列化器><a title="6. 自定义序列化器" class=headerlink href=#6-自定义序列化器></a>6. 自定义序列化器</h4><p>根据业务需求，你也可以实现自己的序列化器，只需要实现 <code>RedisSerializer&LTT></code> 接口即可。<p>示例代码：<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=class><span class=keyword>class</span> <span class=title>CustomRedisSerializer</span> <span class=keyword>implements</span> <span class=title>RedisSerializer</span><<span class=title>MyCustomType</span>> </span>{</span><br><span class=line></span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>byte</span>[] serialize(MyCustomType t) <span class=keyword>throws</span> SerializationException {</span><br><span class=line>        <span class=comment>// 实现序列化逻辑</span></span><br><span class=line>        <span class=keyword>return</span> <span class=keyword>new</span> <span class=keyword>byte</span>[<span class=number>0</span>];</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=function><span class=keyword>public</span> MyCustomType <span class=title>deserialize</span><span class=params>(<span class=keyword>byte</span>[] bytes)</span> <span class=keyword>throws</span> SerializationException </span>{</span><br><span class=line>        <span class=comment>// 实现反序列化逻辑</span></span><br><span class=line>        <span class=keyword>return</span> <span class=keyword>null</span>;</span><br><span class=line>    }</span><br><span class=line>}</span><br><span class=line></span><br><span class=line><span class=comment>// 在配置中使用自定义序列化器</span></span><br><span class=line><span class=meta>@Bean</span></span><br><span class=line><span class=function><span class=keyword>public</span> RedisTemplate&LTString, MyCustomType> <span class=title>customRedisTemplate</span><span class=params>(RedisConnectionFactory factory)</span> </span>{</span><br><span class=line>    RedisTemplate&LTString, MyCustomType> template = <span class=keyword>new</span> RedisTemplate<>();</span><br><span class=line>    template.setConnectionFactory(factory);</span><br><span class=line>    template.setValueSerializer(<span class=keyword>new</span> CustomRedisSerializer());</span><br><span class=line>    <span class=keyword>return</span> template;</span><br><span class=line>}</span><br></pre></table></figure><p><img alt=image-20250413160821439 data-src=https://s2.loli.net/2025/04/13/VKJzFQulyvWTSfa.png><h3 id=基于Session的登陆><a class=headerlink href=#基于Session的登陆 title=基于Session的登陆></a>基于Session的登陆</h3><p><img alt=image-20250320175751672 data-src=https://s2.loli.net/2025/03/20/VqbA8F34U17C9xZ.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br></pre><td class=code><pre><span class=line> <span class=meta>@Override</span></span><br><span class=line>    <span class=function><span class=keyword>public</span> Result <span class=title>sendCode</span><span class=params>(String phone, HttpSession session)</span> </span>{</span><br><span class=line><span class=comment>//        1.校验</span></span><br><span class=line>      <span class=comment>/*  String phoneRegex = "^1[3-9]\\d{9}$";</span></span><br><span class=line><span class=comment>        if (!phone.matches(phoneRegex)) {</span></span><br><span class=line><span class=comment>            return Result.fail("手机号格式错误");</span></span><br><span class=line><span class=comment>        }*/</span></span><br><span class=line>        <span class=keyword>boolean</span> phoneInvalid = RegexUtils.isPhoneInvalid(phone);</span><br><span class=line><span class=comment>//        2.如果不符合</span></span><br><span class=line>        <span class=keyword>if</span> (phoneInvalid) {</span><br><span class=line>            <span class=keyword>return</span> Result.fail(<span class=string>"手机号格式错误"</span>);</span><br><span class=line>        }</span><br><span class=line><span class=comment>//        3.符合,生成验证码</span></span><br><span class=line>        String code = RandomUtil.randomNumbers(<span class=number>6</span>);</span><br><span class=line><span class=comment>//        4.保存验证码到session</span></span><br><span class=line>        session.setAttribute(<span class=string>"code"</span>, code);</span><br><span class=line><span class=comment>//        5.发送验证码</span></span><br><span class=line>        log.debug(StrUtil.format(<span class=string>"发送验证码成功，验证码：{}"</span>, code));</span><br><span class=line><span class=comment>//        返回ok</span></span><br><span class=line>        <span class=keyword>return</span> Result.ok();</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=function><span class=keyword>public</span> Result <span class=title>login</span><span class=params>(LoginFormDTO loginForm, HttpSession session)</span> </span>{</span><br><span class=line><span class=comment>//        1.校验手机号和验证码</span></span><br><span class=line>        String phone = loginForm.getPhone();</span><br><span class=line>        <span class=keyword>boolean</span> phoneInvalid = RegexUtils.isPhoneInvalid(phone);</span><br><span class=line>        <span class=keyword>if</span> (phoneInvalid) {</span><br><span class=line>            <span class=keyword>return</span> Result.fail(<span class=string>"手机号格式错误"</span>);</span><br><span class=line>        }</span><br><span class=line>        String code = loginForm.getCode();</span><br><span class=line>        String codeInSession = (String) session.getAttribute(<span class=string>"code"</span>);</span><br><span class=line>        <span class=keyword>if</span> (!code.equals(codeInSession)) {</span><br><span class=line>            <span class=keyword>return</span> Result.fail(<span class=string>"验证码错误"</span>);</span><br><span class=line>        }</span><br><span class=line><span class=comment>//        2.查询用户</span></span><br><span class=line>        User user = query().eq(<span class=string>"phone"</span>, phone).one();</span><br><span class=line>        <span class=keyword>if</span> (user == <span class=keyword>null</span>) {</span><br><span class=line><span class=comment>//            不存在 创建用户</span></span><br><span class=line>            user = createUserWithPhone(phone);</span><br><span class=line>        }</span><br><span class=line><span class=comment>//        3.保存用户信息到session</span></span><br><span class=line>        session.setAttribute(<span class=string>"user"</span>, BeanUtil.copyProperties(user, UserDTO.class));</span><br><span class=line>        <span class=keyword>return</span> Result.ok();</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=function><span class=keyword>private</span> User <span class=title>createUserWithPhone</span><span class=params>(String phone)</span> </span>{</span><br><span class=line>        User user = <span class=keyword>new</span> User();</span><br><span class=line>        user.setPhone(phone);</span><br><span class=line>        user.setNickName(USER_NICK_NAME_PREFIX + RandomUtil.randomNumbers(<span class=number>8</span>));</span><br><span class=line>        save(user);</span><br><span class=line>        <span class=keyword>return</span> user;</span><br><span class=line>    }</span><br></pre></table></figure><h4 id=集群的session共享问题><a class=headerlink href=#集群的session共享问题 title=集群的session共享问题></a>集群的session共享问题</h4><p><img alt=image-20250414154105418 data-src=https://s2.loli.net/2025/04/14/xZREAUpPzkQBiVF.png><h4 id=基于Redis的短信登陆><a class=headerlink href=#基于Redis的短信登陆 title=基于Redis的短信登陆></a>基于Redis的短信登陆</h4><p><img alt=image-20250414161242250 data-src=https://s2.loli.net/2025/04/14/bVvPz25pxkyMqB9.png><h4 id=优化拦截器><a class=headerlink href=#优化拦截器 title=优化拦截器></a>优化拦截器</h4><p><img alt=image-20250414210106336 data-src=https://s2.loli.net/2025/04/14/36voF12n9YepEkI.png><p>原本的拦截器只拦截需要权限的controller,但是如果已经有cookie的用户只访问不需要权限的controller就不会更新redis.<p><img alt=image-20250414210226312 data-src=https://s2.loli.net/2025/04/14/sUTIzrhMgqNpR7H.png><h3 id=商户查询缓存><a class=headerlink href=#商户查询缓存 title=商户查询缓存></a>商户查询缓存</h3><p><img alt=image-20250414220321389 data-src=https://s2.loli.net/2025/04/14/HTdpXizlnASGQqv.png><p><img alt=image-20250414233753517 data-src=https://s2.loli.net/2025/04/14/jc9OQH8oFwMLz5K.png><h3 id=缓存更新策略><a class=headerlink href=#缓存更新策略 title=缓存更新策略></a>缓存更新策略</h3><p><img alt=image-20250415103603707 data-src=https://s2.loli.net/2025/04/15/p72NIzH9MfZaxnR.png><p><img alt=image-20250415103926298 data-src=https://s2.loli.net/2025/04/15/y7bowaDxTL2f8GJ.png><div class=table-container><table><thead><tr><th>策略<th>读操作<th>写操作<th>优点<th>缺点<th>适用场景<tbody><tr><td><strong>Cache Aside</strong><td>先查缓存，再查数据库<td>更新数据库后删除缓存<td>简单、灵活、一致性较好<td>存在短暂不一致、未命中时性能较差<td>数据读多写少、一致性要求不高<tr><td><strong>Read/Write Through</strong><td>缓存负责未命中处理<td>缓存负责同步到数据库<td>透明性好、一致性好<td>复杂性高、可能成为性能瓶颈<td>数据一致性要求高<tr><td><strong>Write Behind Caching</strong><td>先查缓存，再查数据库<td>异步批量写回数据库<td>写性能高、吞吐量大<td>数据丢失风险、一致性差<td>数据写多读少、一致性要求低</table></div><p><img alt=image-20250415105910579 data-src=https://s2.loli.net/2025/04/15/TU3KbireNcB4G67.png><p><img alt=image-20250415111429325 data-src=https://s2.loli.net/2025/04/15/CFEZY2mKqnwljAW.png><p><img alt=image-20250415111703513 data-src=https://s2.loli.net/2025/04/15/LqgUJKSZD9Gfad6.png><div class=table-container><table><thead><tr><th>名称<th>触发场景<th>结果<th>常见解决方案<tbody><tr><td>缓存穿透<td>请求的数据本就不存在（DB 也无）<td>每次请求都打到数据库<td>缓存空值、布隆过滤器<tr><td>缓存击穿<td>某个热点 key 恰好过期了<td>大量请求同时访问 DB，瞬时压力大<td>加互斥锁、热点预热<tr><td>缓存雪崩<td>大量 key 在同一时间过期<td>缓存失效，数据库压力激增<td>加随机过期时间、限流、降级</table></div><p>布隆过滤器是基于一个 <strong>bit 数组</strong> + 多个 <strong>哈希函数</strong>：<ol><li>初始创建一个很大的 bit 数组（如 1 亿位，全是 0）。<li>插入元素时，用多个哈希函数对元素哈希，得到多个下标位置，把这些位置设为 1。<li>查询时，对待查元素用相同的哈希函数求下标：<ul><li>若所有对应 bit 位都是 1 → 可能存在<li>有任意一个 bit 是 0 → 一定不存在</ul></ol><p><img alt=image-20250415133050673 data-src=https://s2.loli.net/2025/04/15/MozbdO6Ly2aCI4E.png><p><img alt=image-20250415143221507 data-src=https://s2.loli.net/2025/04/15/aujZnwSzgiUxloL.png><p><img alt=image-20250415144016106 data-src=https://s2.loli.net/2025/04/15/xBTlfUn6WmDpwIJ.png><p><img alt=image-20250415144408811 data-src=https://s2.loli.net/2025/04/15/Tcd5tCruUKo6wvM.png><p><img alt=image-20250415144944179 data-src=https://s2.loli.net/2025/04/15/x5ayubhtcrSK8qQ.png><p><img alt=image-20250415145118864 data-src=https://s2.loli.net/2025/04/15/EBpdcml8I7tLvxU.png><h3 id=优惠券秒杀><a class=headerlink href=#优惠券秒杀 title=优惠券秒杀></a>优惠券秒杀</h3><p>全局ID生成器,在分布式系统下用来生成全局唯一ID的工具.<p>满足:唯一性,高可用,高性能,递增性,安全性.<p><img alt=image-20250415194042557 data-src=https://s2.loli.net/2025/04/15/3LSmM7p8e5gfXcN.png><p><img alt=image-20250415231649294 data-src=https://s2.loli.net/2025/04/15/tXm5rvyNMhbxeYL.png style=zoom:67%;><p><img alt=image-20250416162534054 data-src=https://s2.loli.net/2025/04/16/zTXyB8Uo7RKWmc2.png style=zoom:67%;><h4 id=悲观锁-乐观锁><a title="悲观锁  乐观锁" class=headerlink href=#悲观锁-乐观锁></a>悲观锁 乐观锁</h4><p><img alt=image-20250416192913692 data-src=https://s2.loli.net/2025/04/16/9QRuCerNJpmcHaf.png><p>乐观锁的关键是判断之前查询得到的数据是否被修改过.常见方式:<ol><li>版本号法</ol><p>给数据添加版本号,每次更新的时候查询数据对应的版本,如果版本号跟之前的不同则表明更新过了.<p><img alt=image-20250416194812142 data-src=https://s2.loli.net/2025/04/16/3tu9mqXVNyoDZYT.png><ol><li>CAS法</ol><p><img alt=image-20250416212059026 data-src=https://s2.loli.net/2025/04/16/eCKmRn4QDs7pSLA.png style=zoom:67%;><p>一人一单,使用悲观锁,加锁. 但在分布式系统下,多个实例下进程不相干,无法进行线程同步,需要实现分布式锁.<p>分布式锁:满足分布式系统或集群模式下多进程可见并且互斥的锁<p><img alt=image-20250417095719500 data-src=https://s2.loli.net/2025/04/17/t4sZY1NizPOvRcX.png><p>基于Redis的分布式锁<p>使用<code>setnx</code><p><img alt=image-20250417124148443 data-src=https://s2.loli.net/2025/04/17/JBC3Xe1HPmpfnwa.png><p>注意如果出现业务耗时超过key的ttl,导致其他线程拿到锁,在删除锁时检查value是否一致。<p>redis lua脚本<p><img alt=image-20250417133641854 data-src=https://s2.loli.net/2025/04/17/X7GMsSg59QjnaRf.png><p><img alt=image-20250417143320701 data-src=https://s2.loli.net/2025/04/17/AG1vHk7s2u6FexB.png><h4 id=Redisson可重入锁><a class=headerlink href=#Redisson可重入锁 title=Redisson可重入锁></a>Redisson可重入锁</h4><p><img alt=image-20250417152425433 data-src=https://s2.loli.net/2025/04/17/2jkGcgNIYylmQL8.png><h4 id=可重试-更新超时时间><a class=headerlink href=#可重试-更新超时时间 title=可重试/更新超时时间></a>可重试/更新超时时间</h4><p><img alt=image-20250417181249028 data-src=https://s2.loli.net/2025/04/17/lytxPu8ZirBRH5s.png><p><img alt=image-20250417181558824 data-src=https://s2.loli.net/2025/04/17/EYhwIoeVBgmkHfU.png><p>所以利用redis缓存作分布式锁的需要核心解决的<strong>可重入</strong>和<strong>超时重试机制</strong>.<h4 id=主从一致性问题><a class=headerlink href=#主从一致性问题 title=主从一致性问题></a>主从一致性问题</h4><p>一、单机多实例（适合开发和测试环境）<p>配置不同的实例端口,多个配置文件启动多个实例.<p>二、多机集群,在每台服务器上创建一个 Redis 配置文件（如 <code>redis-cluster.conf</code>），并添加以下内容：<figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line>port 6379</span><br><span class=line>cluster-enabled yes</span><br><span class=line>cluster-config-file nodes.conf</span><br><span class=line>cluster-node-timeout 5000</span><br><span class=line>appendonly yes</span><br></pre></table></figure><ul><li><code>cluster-enabled yes</code>：启用集群模式。<li><code>cluster-config-file nodes.conf</code>：指定集群节点配置文件。<li><code>cluster-node-timeout 5000</code>：设置节点超时时间（毫秒）</ul><p><img alt=image-20250417232039727 data-src=https://s2.loli.net/2025/04/17/UiIyGpJA4RoP7Dh.png><p><img alt=image-20250418111401540 data-src=https://s2.loli.net/2025/04/18/cn3NCI9O24upUlg.png><p><img alt=image-20250418143910127 data-src=https://s2.loli.net/2025/04/18/IRiKpLMBV1cCUs3.png><p><img alt=image-20250418182224084 data-src=https://s2.loli.net/2025/04/18/bS3QAUKsTHoRY1q.png><h4 id=Redis消息队列><a class=headerlink href=#Redis消息队列 title=Redis消息队列></a>Redis消息队列</h4><p><img alt=image-20250418200244539 data-src=https://s2.loli.net/2025/04/18/ayrfSevJ8TdGUF3.png><h4 id=基于list数据结构><a class=headerlink href=#基于list数据结构 title=基于list数据结构></a>基于list数据结构</h4><p>Redis列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）一个列表最多可以包含 2^32^ -1个元素。主要利用<code>BRPOP</code>移除列表元素,如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止. 同时通过<code>LPUSH</code>添加值.<p><img alt=image-20250418203901472 data-src=https://s2.loli.net/2025/04/18/9ih5CDwLBlKNERW.png><h5 id=pubsub-点对点消息消息模型><a title="pubsub 点对点消息消息模型" class=headerlink href=#pubsub-点对点消息消息模型></a>pubsub 点对点消息消息模型</h5><p>Redis 发布订阅 (pub/sub) 是一种消息通信模式：发送者 (pub) 发送消息，订阅者 (sub) 接收消息。<p>Redis 客户端可以订阅任意数量的频道。<p><img alt=img data-src=https://www.runoob.com/wp-content/uploads/2014/11/pubsub2.png><p><img alt=img data-src=https://www.runoob.com/wp-content/uploads/2014/11/pubsub1.png><p><img alt=image-20250418210559430 data-src=https://s2.loli.net/2025/04/18/7LEADu5klUBta8Q.png><p><img alt=image-20250418210832702 data-src=https://s2.loli.net/2025/04/18/2lE9g7iU3WBpsIy.png><h5 id=Stream><a class=headerlink href=#Stream title=Stream></a>Stream</h5><p>Redis Stream 是 Redis 5.0 版本新增加的数据结构。<p>Redis Stream 主要用于消息队列(MQ，Message Queue),Redis 本身是有一个 Redis 发布订阅 (pub/sub) 来实现消息队列的功能，但它有个缺点就是消<strong>息无法持久化，如果出现网络断开、Redis 宕机等，消息就会被丢弃</strong>。<p>简单来说发布订阅 (pub/sub) 可以分发消息，但<strong>无法记录历史消息。</strong><p><strong>而 Redis Stream 提供了消息的持久化和主备复制功能</strong>，可以让任何客户端访问任何时刻的数据，并且能记住每一个客户端的访问位置，还能保证消息不丢失。<p><img alt=img data-src=https://www.runoob.com/wp-content/uploads/2020/09/en-us_image_0167982791.png><ul><li><strong>Stream</strong>: 在 Redis 中，一个 Stream 就是一个追加日志类型的键值对集合。<li><strong>Entry</strong>: 每个流中的元素称为 Entry 或者 Message，由唯一标识符（ID）和数据字段组成。<li><strong>Consumer Group</strong>: 允许不同的消费者组从同一个流中读取消息，每个组可以独立地跟踪自己已经消费的消息位置。<li><strong>ID</strong>: 每条消息都有一个唯一的 ID，格式为 <code>&LTtimestamp>-&LTsequence></code>，其中时间戳是消息添加时的时间，序列号用于区分同一毫秒内添加的消息。</ul><p><img alt=image-20250418223626722 data-src=https://s2.loli.net/2025/04/18/N41xhBcZ6qTWUiG.png><p><img style="zoom: 33%;" alt=image-20250418224505431 data-src=https://s2.loli.net/2025/04/18/JE9ZNCxDHaBWpw1.png><h5 id=基于Stream的消息队列-消费者组><a class=headerlink href=#基于Stream的消息队列-消费者组 title=基于Stream的消息队列-消费者组></a>基于Stream的消息队列-消费者组</h5><p><img alt=image-20250418225321965 data-src=https://s2.loli.net/2025/04/18/oTspnQeVrkqgOcv.png><p>给消费者分类,消息漏读,消息确认避免消息丢失.<div class=table-container><table><thead><tr><th>命令<th>作用<tbody><tr><td><code>XADD</code><td>添加消息到 Stream<tr><td><code>XRANGE</code> / <code>XREVRANGE</code><td>范围读取消息（正/反向）<tr><td><code>XREAD</code><td>阻塞或非阻塞读取消息<tr><td><code>XGROUP CREATE</code><td>创建消费者组<tr><td><code>XREADGROUP</code><td>按消费者组读取消息<tr><td><code>XACK</code><td>确认消息已处理<tr><td><code>XPENDING</code><td>查看待处理（未 ack）消息<tr><td><code>XDEL</code><td>删除指定消息<tr><td><code>XTRIM</code><td>裁剪旧消息，控制 Stream 大小<tr><td><code>XLEN</code><td>获取 Stream 长度<tr><td><code>XINFO</code><td>获取 Stream / Consumer 详细信息</table></div><h4 id=创建组><a class=headerlink href=#创建组 title=创建组></a>创建组</h4><figure class="highlight elixir"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line>bash</span><br><span class=line></span><br><span class=line></span><br><span class=line>CopyEdit</span><br><span class=line>XGROUP CREATE mystream mygroup <span class=variable>$ </span>MKSTREAM</span><br></pre></table></figure><blockquote><p>创建名为 <code>mygroup</code> 的消费者组，<code>$</code> 从最新消息开始消费，<code>MKSTREAM</code> 可自动创建 Stream。</blockquote><h4 id=读取消息><a class=headerlink href=#读取消息 title=读取消息></a>读取消息</h4><figure class="highlight crmsh"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line>bash</span><br><span class=line></span><br><span class=line></span><br><span class=line>CopyEdit</span><br><span class=line>XREADGROUP <span class=keyword>GROUP</span> <span class=title>mygroup</span> consumer1 COUNT <span class=number>2</span> STREAMS mystream ></span><br></pre></table></figure><blockquote><p><code>></code> 表示读取尚未分配的消息（新消息）。</blockquote><h4 id=消息确认><a class=headerlink href=#消息确认 title=消息确认></a>消息确认</h4><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>XACK mystream mygroup 1686900000000-0</span><br></pre></table></figure><h4 id=查看未确认消息><a class=headerlink href=#查看未确认消息 title=查看未确认消息></a>查看未确认消息</h4><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>XPENDING mystream mygroup</span><br></pre></table></figure><div class=table-container><table><thead><tr><th>命令<th>说明<tbody><tr><td><code>XINFO STREAM mystream</code><td>查看 stream 本体信息<tr><td><code>XINFO GROUPS mystream</code><td>查看所有消费者组信息<tr><td><code>XINFO CONSUMERS mystream mygroup</code><td>查看某个消费者组中各个消费者状态</table></div><p><img alt=image-20250418233032176 data-src=https://s2.loli.net/2025/04/18/sVrCm1K7YTewhaq.png><p>消费者组中的多消费者争抢消息体现在<p>在 Redis Stream 中使用 <strong>消费者组（Consumer Group）</strong> 时，有个关键的机制是：<blockquote><p>➤ <strong>同一个消费者组内，一个消息只会被分配给一个消费者处理。</strong></blockquote><p>这意味着：<ul><li><p>如果消费者 A <strong>已经读取并 ack（确认）了一条消息</strong>，那么：</p> <ul><li>同组内的消费者 B 是 <strong>无法再读取这条消息</strong> 的。<li>除非你专门指定消息 ID 重新读取（例如用 <code>XREADGROUP</code> + 指定 ID）。</ul><li><p>如果你希望 <strong>消费者 B</strong> 能“读到之前被其他消费者已处理的消息”，你必须显式指定 ID，并该消息<strong>未被 ack</strong>或使用 <code>XPENDING</code> 查找。</p> <h5 id=✅如何让消费者读取“历史消息”？><a class=headerlink href=#✅如何让消费者读取“历史消息”？ title=✅如何让消费者读取“历史消息”？></a>✅如何让消费者读取“历史消息”？</h5><p>场景 1：消息还未被 ack（pending）</p> <p>可以通过 <code>XPENDING</code> + <code>XCLAIM</code> 把消息“抢过来”：</p> <figure class="highlight reasonml"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre><td class=code><pre><span class=line>javaCopyEditPendingMessages pending = stringRedisTemplate.ops<span class=constructor>ForStream()</span></span><br><span class=line>    .pending(<span class=string>"mystream"</span>, <span class=string>"mygroup"</span>, <span class=module-access><span class=module><span class=identifier>Range</span>.</span></span>unbounded<span class=literal>()</span>, <span class=number>10</span>);</span><br><span class=line></span><br><span class=line><span class=keyword>for</span> (PendingMessage message : pending) {</span><br><span class=line>    <span class=comment>// 把未 ack 的消息交给当前消费者</span></span><br><span class=line>    List&LTMapRecord&LTString, Object, Object>> records = stringRedisTemplate.ops<span class=constructor>ForStream()</span>.claim(</span><br><span class=line>        <span class=module-access><span class=module><span class=identifier>Consumer</span>.</span></span>from(<span class=string>"mygroup"</span>, <span class=string>"consumer2"</span>),</span><br><span class=line>        <span class=module-access><span class=module><span class=identifier>Duration</span>.</span></span><span class=keyword>of</span><span class=constructor>Seconds(5)</span>,</span><br><span class=line>        message.get<span class=constructor>Id()</span></span><br><span class=line>    );</span><br><span class=line>}</span><br></pre></table></figure> <p>场景 2：消息已被 ack，想重复读取</p> <p>Redis 默认设计下是不会让你“重复消费”被 ack 的消息的，<strong>但你可以手动读取它（不是 group 模式）</strong>：</p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line><span class=comment>// 不使用消费者组，直接用 XREAD + ID</span></span><br><span class=line>List&LTMapRecord&LTString, Object, Object>> records = stringRedisTemplate.opsForStream()</span><br><span class=line>    .read(StreamOffset.fromStart(<span class=string>"mystream"</span>)); <span class=comment>// 或者用具体 ID</span></span><br></pre></table></figure> <p>也可以用 <code>XRANGE</code> 来精确读取：</p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line><span class=comment>// 获取某条历史消息</span></span><br><span class=line>stringRedisTemplate.opsForStream()</span><br><span class=line>    .range(<span class=string>"mystream"</span>, Range.closed(<span class=string>"1682390889639-0"</span>, <span class=string>"1682390889639-0"</span>));</span><br></pre></table></figure> <p>| 场景 | 是否能重新读取 |<br>| —————————————————- | ——————————————— |<br>| 消费者组内，消息已被 ack | ❌（除非用非 group 方式手动读） |<br>| 消费者组内，消息未被 ack（pending） | ✅（可以用 XCLAIM 抢回来） |<br>| 想让多个消费者都能读一条消息 | ❌（组内不支持；需非 group 读） |</p></ul><p><img alt=image-20250418233143096 data-src=https://s2.loli.net/2025/04/18/ay8uA5fSi3RvTMV.png><p><img alt=image-20250419131039088 data-src=https://s2.loli.net/2025/04/19/4rg9LteAzoDlaWb.png style=zoom:50%;><p><img alt=image-20250419131059130 data-src=https://s2.loli.net/2025/04/19/muwJasz9gGTxAHK.png><h3 id=达人探店><a class=headerlink href=#达人探店 title=达人探店></a>达人探店</h3><h4 id=点赞功能><a class=headerlink href=#点赞功能 title=点赞功能></a>点赞功能</h4><p><img alt=image-20250420143555600 data-src=https://s2.loli.net/2025/04/20/p92Zqc4evEjimXY.png><h4 id=点赞排行榜><a class=headerlink href=#点赞排行榜 title=点赞排行榜></a>点赞排行榜</h4><p><img alt=image-20250420144640978 data-src=https://s2.loli.net/2025/04/20/Y2jI3QHEemkOBvi.png><h4 id=好友关注><a class=headerlink href=#好友关注 title=好友关注></a>好友关注</h4><p>写两个接口,一个查看是否关注,另一个进行关注或取关.<p>关注的数据表设计为user_id和follower_id. 为一个关注记录<p><img alt=image-20250420200822771 data-src=https://s2.loli.net/2025/04/20/OqkUF4G21LYZM5K.png><p><img alt=image-20250420200856032 data-src=https://s2.loli.net/2025/04/20/hNcu5avy2WmPBMk.png><h4 id=共同关注><a class=headerlink href=#共同关注 title=共同关注></a>共同关注</h4><p><img alt=image-20250420200600057 data-src=https://s2.loli.net/2025/04/20/thV71ZUKQlaqs3i.png><p>在新增关注时添加缓存,同时利用redis中的set交集操作在缓存中得到共同关注<h4 id=关注推送><a class=headerlink href=#关注推送 title=关注推送></a>关注推送</h4><p><img alt=image-20250420220334492 data-src=https://s2.loli.net/2025/04/20/gCqrxOB86TdfhLb.png><p><img alt=image-20250421092155097 data-src=https://s2.loli.net/2025/04/21/8wXL5PpFBWu1c6K.png><p>通过推模式,通过分页滚动读取关注用户发布的博客数据. 用户发布博客时将博客id加入关注自己的粉丝的收件箱, 使用sorted set,以时间戳为score(即推模式)<p><img alt=image-20250421224913326 data-src=https://s2.loli.net/2025/04/21/9IYeW5iocs3u1PB.png><p>关键是利用最新的时间戳去拿最新的博客id,同时利用偏移量滤去相同的时间戳(默认不会重复). 如果考虑发布时间重复,也可以在存储score时在时间戳基础上加一个随机值避免score重复.<h4 id=附近商户><a class=headerlink href=#附近商户 title=附近商户></a>附近商户</h4><p><a href=https://www.runoob.com/redis/redis-geo.html rel=noopener target=_blank>Redis GEO | 菜鸟教程</a><p>Redis GEO 主要用于存储地理位置信息，并对存储的信息进行操作，该功能在 Redis 3.2 版本新增。<p>Redis GEO 操作方法有：<ul><li>geoadd：添加地理位置的坐标。<li>geopos：获取地理位置的坐标。<li>geodist：计算两个位置之间的距离。<li>georadius：根据用户给定的经纬度坐标来获取指定范围内的地理位置集合。<li>georadiusbymember：根据储存在位置集合里面的某个地点获取指定范围内的地理位置集合。<li>geohash：返回一个或多个位置对象的 geohash 值。</ul><p>geoadd 用于存储指定的地理空间位置，可以将一个或多个经度(longitude)、纬度(latitude)、位置名称(member)添加到指定的 key 中。<p>geoadd 语法格式如下：<figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>GEOADD key longitude latitude member [longitude latitude member ...]</span><br></pre></table></figure><ul><li>m ：米，默认单位。<li>km ：千米。<li>mi ：英里。<li>ft ：英尺。<li>WITHDIST: 在返回位置元素的同时， 将位置元素与中心之间的距离也一并返回。<li>WITHCOORD: 将位置元素的经度和纬度也一并返回。<li>WITHHASH: 以 52 位有符号整数的形式， 返回位置元素经过原始 geohash 编码的有序集合分值。 这个选项主要用于底层应用或者调试， 实际中的作用并不大。<li>COUNT 限定返回的记录数。<li>ASC: 查找结果根据距离从近到远排序。<li>DESC: 查找结果根据从远到近排序。</ul><h4 id=用户签到><a class=headerlink href=#用户签到 title=用户签到></a>用户签到</h4><p><img alt=image-20250422105634699 data-src=https://s2.loli.net/2025/04/22/61cqOWxZMwnfemh.png><p><img alt=image-20250422111632294 data-src=https://s2.loli.net/2025/04/22/aGspbuONkSMdqxf.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre><td class=code><pre><span class=line>LocalDateTime now = LocalDateTime.now();</span><br><span class=line><span class=keyword>int</span> dayOfYear = now.getDayOfYear();</span><br><span class=line><span class=keyword>int</span> year = now.getYear();</span><br><span class=line>String key = SIGN_KEY + UserHolder.getUser().getId()+ <span class=string>":"</span> + year;</span><br><span class=line>Boolean signSuccess = stringRedisTemplate.opsForValue().setBit(key, dayOfYear-<span class=number>1</span>, <span class=keyword>true</span>);</span><br><span class=line><span class=keyword>if</span> (BooleanUtil.isTrue(signSuccess)) {</span><br><span class=line>    <span class=keyword>return</span> Result.ok();</span><br><span class=line>}<span class=keyword>else</span>{</span><br><span class=line>    <span class=keyword>return</span> Result.fail(<span class=string>"签到失败"</span>);</span><br><span class=line>}</span><br></pre></table></figure><h4 id=签到统计><a class=headerlink href=#签到统计 title=签到统计></a>签到统计</h4><p>使用<code>bitfield</code>查询一个范围内的二进制返回十进制数据.<p><img alt=image-20250422121102888 data-src=https://s2.loli.net/2025/04/22/dfuNzSwYlVOsJD1.png><h4 id=UV统计-HyperLogLog><a title="UV统计  HyperLogLog" class=headerlink href=#UV统计-HyperLogLog></a>UV统计 HyperLogLog</h4><p>Redis HyperLogLog 是用来做基数统计的算法，HyperLogLog 的优点是，在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定 的、并且是很小的。<p>在 Redis 里面，每个 HyperLogLog 键只需要花费 12 KB 内存，就可以计算接近 2^64 个不同元素的基 数。这和计算基数时，元素越多耗费内存就越多的集合形成鲜明对比。<p>但是，因为 HyperLogLog 只会根据输入元素来计算基数，而不会储存输入元素本身，所以 HyperLogLog 不能像集合那样，返回输入的各个元素。<p><img alt=image-20250422121540587 data-src=https://s2.loli.net/2025/04/22/MEm6zF5nt28TBch.png><p><img alt=image-20250422122336390 data-src=https://s2.loli.net/2025/04/22/ztXRO9DFqkU68xV.png><h2 id=瑞吉外卖><a class=headerlink href=#瑞吉外卖 title=瑞吉外卖></a>瑞吉外卖</h2><h2 id=谷粒商城><a class=headerlink href=#谷粒商城 title=谷粒商城></a>谷粒商城</h2><link href=/css/spoiler.css rel=stylesheet><script async src=/js/spoiler.js></script></div><div><div><div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div></div></div><div class=reward-container><div>感谢阅读.</div><button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">打赏</button><div style="display: none;" id=qr><div style="display: inline-block;"><img alt="Sekyoro 微信支付" src=/images/wechatpay.png><p>微信支付</div></div></div><div><ul class=post-copyright><li class=post-copyright-author><strong>本文作者： </strong>Sekyoro<li class=post-copyright-link><strong>本文链接：</strong> <a href=https://www.sekyoro.top/2025/03/20/Java%E9%A1%B9%E7%9B%AE%E5%A4%A7%E8%B5%8F-%E5%AE%9E%E4%B9%A0%E7%89%88/ title=Java项目大赏(实习版)>https://www.sekyoro.top/2025/03/20/Java项目大赏-实习版/</a><li class=post-copyright-license><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ rel=noopener target=_blank><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</ul></div><div class=followme><p>欢迎关注我的其它发布渠道<div class=social-list><div class=social-item><a class=social-link href=/images/wxqrcode.png target=_blank> <span class=icon> <i class="fab fa-weixin"></i> </span> <span class=label>WeChat</span> </a></div><div class=social-item><a class=social-link href=/images/website.png target=_blank> <span class=icon> <i class="fa fa-user"></i> </span> <span class=label>PersonalWebsite</span> </a></div><div class=social-item><a class=social-link href=https://my-astro-git-main-drowning-in-codes.vercel.app target=_blank> <span class=icon> <i class="fas fa-share"></i> </span> <span class=label>杂鱼分享</span> </a></div><div class=social-item><a class=social-link href=/atom.xml target=_blank> <span class=icon> <i class="fa fa-rss"></i> </span> <span class=label>RSS</span> </a></div></div></div><footer class=post-footer><div class=post-tags><a href=/tags/Java/ rel=tag><i class="fa fa-tag"></i> Java</a></div><div class=post-nav><div class=post-nav-item><a href=/2025/03/12/TCP-IP%E4%B8%8EHTTP%E7%BC%96%E7%A8%8B/ rel=prev title=TCP/IP与HTTP编程> <i class="fa fa-chevron-left"></i> TCP/IP与HTTP编程 </a></div><div class=post-nav-item><a href=/2025/03/20/TinyHttpServer%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A0/ rel=next title=TinyWebServer项目学习> TinyWebServer项目学习 <i class="fa fa-chevron-right"></i> </a></div></div></footer></article></div><!-- 评论区 --><div class=comments><div data-id=city data-uid=MTAyMC81MzE5Ny8yOTY3Mg== id=lv-container></div></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class=sidebar><div class=sidebar-inner><!-- canvas粒子时钟 --><div><canvas id=canvas style=width:60%;>当前浏览器不支持canvas，请更换浏览器后再试</canvas></div><script>(function(){

   var digit=
    [
        [
            [0,0,1,1,1,0,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,0,1,1,0],
            [0,0,1,1,1,0,0]
        ],//0
        [
            [0,0,0,1,1,0,0],
            [0,1,1,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [1,1,1,1,1,1,1]
        ],//1
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,1,1],
            [1,1,1,1,1,1,1]
        ],//2
        [
            [1,1,1,1,1,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//3
        [
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,0],
            [0,0,1,1,1,1,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,1,1,0],
            [1,1,1,1,1,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,1]
        ],//4
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,1,1,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//5
        [
            [0,0,0,0,1,1,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//6
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0]
        ],//7
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//8
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,1,1,0,0,0,0]
        ],//9
        [
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0]
        ]//:
    ];

var canvas = document.getElementById('canvas');

if(canvas.getContext){
    var cxt = canvas.getContext('2d');
    //声明canvas的宽高
    var H = 100,W = 700;
    canvas.height = H;
    canvas.width = W;
    cxt.fillStyle = '#f00';
    cxt.fillRect(10,10,50,50);

    //存储时间数据
    var data = [];
    //存储运动的小球
    var balls = [];
    //设置粒子半径
    var R = canvas.height/20-1;
    (function(){
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        //存储时间数字，由十位小时、个位小时、冒号、十位分钟、个位分钟、冒号、十位秒钟、个位秒钟这7个数字组成
        data.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
    })();

    /*生成点阵数字*/
    function renderDigit(index,num){
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    cxt.beginPath();
                    cxt.arc(14*(R+2)*index + j*2*(R+1)+(R+1),i*2*(R+1)+(R+1),R,0,2*Math.PI);
                    cxt.closePath();
                    cxt.fill();
                }
            }
        }
    }

    /*更新时钟*/
    function updateDigitTime(){
        var changeNumArray = [];
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        var NewData = [];
        NewData.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
        for(var i = data.length-1; i >=0 ; i--){
            //时间发生变化
            if(NewData[i] !== data[i]){
                //将变化的数字值和在data数组中的索引存储在changeNumArray数组中
                changeNumArray.push(i+'_'+(Number(data[i])+1)%10);
            }
        }
        //增加小球
        for(var i = 0; i< changeNumArray.length; i++){
            addBalls.apply(this,changeNumArray[i].split('_'));
        }
        data = NewData.concat();
    }

    /*更新小球状态*/
    function updateBalls(){
        for(var i = 0; i < balls.length; i++){
            balls[i].stepY += balls[i].disY;
            balls[i].x += balls[i].stepX;
            balls[i].y += balls[i].stepY;
            if(balls[i].x > W + R || balls[i].y > H + R){
                balls.splice(i,1);
                i--;
            }
        }
    }

    /*增加要运动的小球*/
    function addBalls(index,num){
        var numArray = [1,2,3];
        var colorArray =  ["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"];
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    var ball = {
                        x:14*(R+2)*index + j*2*(R+1)+(R+1),
                        y:i*2*(R+1)+(R+1),
                        stepX:Math.floor(Math.random() * 4 -2),
                        stepY:-2*numArray[Math.floor(Math.random()*numArray.length)],
                        color:colorArray[Math.floor(Math.random()*colorArray.length)],
                        disY:1
                    };
                    balls.push(ball);
                }
            }
        }
    }

    /*渲染*/
    function render(){
        //重置画布宽度，达到清空画布的效果
        canvas.height = 100;
        //渲染时钟
        for(var i = 0; i < data.length; i++){
            renderDigit(i,data[i]);
        }
        //渲染小球
        for(var i = 0; i < balls.length; i++){
            cxt.beginPath();
            cxt.arc(balls[i].x,balls[i].y,R,0,2*Math.PI);
            cxt.fillStyle = balls[i].color;
            cxt.closePath();
            cxt.fill();
        }
    }

    clearInterval(oTimer);
    var oTimer = setInterval(function(){
        //更新时钟
        updateDigitTime();
        //更新小球状态
        updateBalls();
        //渲染
        render();
    },50);
}

})();</script><!-- require APlayer --><link href=https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js></script><!-- require MetingJS --><script src=/js/meting-js.js></script><ul class="sidebar-nav motion-element"><li class=sidebar-nav-toc>文章目录<li class=sidebar-nav-overview>站点概览</ul><!--noindex--><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class=nav><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96><span class=nav-number>1.</span> <span class=nav-text>苍穹外卖</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%BB%91%E9%A9%AC%E7%82%B9%E8%AF%84><span class=nav-number>2.</span> <span class=nav-text>黑马点评</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#Redis%E5%AD%A6%E4%B9%A0><span class=nav-number>2.1.</span> <span class=nav-text>Redis学习</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Spring-Data-Redis><span class=nav-number>2.2.</span> <span class=nav-text>Spring Data Redis</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8><span class=nav-number>2.2.1.</span> <span class=nav-text>序列化器</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#1-JdkSerializationRedisSerializer><span class=nav-number>2.2.2.</span> <span class=nav-text>1. JdkSerializationRedisSerializer</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#2-StringRedisSerializer><span class=nav-number>2.2.3.</span> <span class=nav-text>2. StringRedisSerializer</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#3-GenericJackson2JsonRedisSerializer><span class=nav-number>2.2.4.</span> <span class=nav-text>3. GenericJackson2JsonRedisSerializer</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#4-Jackson2JsonRedisSerializer><span class=nav-number>2.2.5.</span> <span class=nav-text>4. Jackson2JsonRedisSerializer</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#5-OxmSerializer><span class=nav-number>2.2.6.</span> <span class=nav-text>5. OxmSerializer</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#6-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8><span class=nav-number>2.2.7.</span> <span class=nav-text>6. 自定义序列化器</span></a></ol><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%9F%BA%E4%BA%8ESession%E7%9A%84%E7%99%BB%E9%99%86><span class=nav-number>2.3.</span> <span class=nav-text>基于Session的登陆</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E9%9B%86%E7%BE%A4%E7%9A%84session%E5%85%B1%E4%BA%AB%E9%97%AE%E9%A2%98><span class=nav-number>2.3.1.</span> <span class=nav-text>集群的session共享问题</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E4%BA%8ERedis%E7%9A%84%E7%9F%AD%E4%BF%A1%E7%99%BB%E9%99%86><span class=nav-number>2.3.2.</span> <span class=nav-text>基于Redis的短信登陆</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E4%BC%98%E5%8C%96%E6%8B%A6%E6%88%AA%E5%99%A8><span class=nav-number>2.3.3.</span> <span class=nav-text>优化拦截器</span></a></ol><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%95%86%E6%88%B7%E6%9F%A5%E8%AF%A2%E7%BC%93%E5%AD%98><span class=nav-number>2.4.</span> <span class=nav-text>商户查询缓存</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%BC%93%E5%AD%98%E6%9B%B4%E6%96%B0%E7%AD%96%E7%95%A5><span class=nav-number>2.5.</span> <span class=nav-text>缓存更新策略</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BC%98%E6%83%A0%E5%88%B8%E7%A7%92%E6%9D%80><span class=nav-number>2.6.</span> <span class=nav-text>优惠券秒杀</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E6%82%B2%E8%A7%82%E9%94%81-%E4%B9%90%E8%A7%82%E9%94%81><span class=nav-number>2.6.1.</span> <span class=nav-text>悲观锁 乐观锁</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#Redisson%E5%8F%AF%E9%87%8D%E5%85%A5%E9%94%81><span class=nav-number>2.6.2.</span> <span class=nav-text>Redisson可重入锁</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%8F%AF%E9%87%8D%E8%AF%95-%E6%9B%B4%E6%96%B0%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4><span class=nav-number>2.6.3.</span> <span class=nav-text>可重试/更新超时时间</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E4%B8%BB%E4%BB%8E%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98><span class=nav-number>2.6.4.</span> <span class=nav-text>主从一致性问题</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#Redis%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97><span class=nav-number>2.6.5.</span> <span class=nav-text>Redis消息队列</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%9F%BA%E4%BA%8Elist%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84><span class=nav-number>2.6.6.</span> <span class=nav-text>基于list数据结构</span></a><ol class=nav-child><li class="nav-item nav-level-5"><a class=nav-link href=#pubsub-%E7%82%B9%E5%AF%B9%E7%82%B9%E6%B6%88%E6%81%AF%E6%B6%88%E6%81%AF%E6%A8%A1%E5%9E%8B><span class=nav-number>2.6.6.1.</span> <span class=nav-text>pubsub 点对点消息消息模型</span></a><li class="nav-item nav-level-5"><a class=nav-link href=#Stream><span class=nav-number>2.6.6.2.</span> <span class=nav-text>Stream</span></a><li class="nav-item nav-level-5"><a class=nav-link href=#%E5%9F%BA%E4%BA%8EStream%E7%9A%84%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97-%E6%B6%88%E8%B4%B9%E8%80%85%E7%BB%84><span class=nav-number>2.6.6.3.</span> <span class=nav-text>基于Stream的消息队列-消费者组</span></a></ol><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%88%9B%E5%BB%BA%E7%BB%84><span class=nav-number>2.6.7.</span> <span class=nav-text>创建组</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%AF%BB%E5%8F%96%E6%B6%88%E6%81%AF><span class=nav-number>2.6.8.</span> <span class=nav-text>读取消息</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E6%B6%88%E6%81%AF%E7%A1%AE%E8%AE%A4><span class=nav-number>2.6.9.</span> <span class=nav-text>消息确认</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E6%9F%A5%E7%9C%8B%E6%9C%AA%E7%A1%AE%E8%AE%A4%E6%B6%88%E6%81%AF><span class=nav-number>2.6.10.</span> <span class=nav-text>查看未确认消息</span></a><ol class=nav-child><li class="nav-item nav-level-5"><a class=nav-link href=#%E2%9C%85%E5%A6%82%E4%BD%95%E8%AE%A9%E6%B6%88%E8%B4%B9%E8%80%85%E8%AF%BB%E5%8F%96%E2%80%9C%E5%8E%86%E5%8F%B2%E6%B6%88%E6%81%AF%E2%80%9D%EF%BC%9F><span class=nav-number>2.6.10.1.</span> <span class=nav-text>✅如何让消费者读取“历史消息”？</span></a></ol></ol><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%BE%BE%E4%BA%BA%E6%8E%A2%E5%BA%97><span class=nav-number>2.7.</span> <span class=nav-text>达人探店</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E7%82%B9%E8%B5%9E%E5%8A%9F%E8%83%BD><span class=nav-number>2.7.1.</span> <span class=nav-text>点赞功能</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E7%82%B9%E8%B5%9E%E6%8E%92%E8%A1%8C%E6%A6%9C><span class=nav-number>2.7.2.</span> <span class=nav-text>点赞排行榜</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%A5%BD%E5%8F%8B%E5%85%B3%E6%B3%A8><span class=nav-number>2.7.3.</span> <span class=nav-text>好友关注</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%85%B1%E5%90%8C%E5%85%B3%E6%B3%A8><span class=nav-number>2.7.4.</span> <span class=nav-text>共同关注</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%85%B3%E6%B3%A8%E6%8E%A8%E9%80%81><span class=nav-number>2.7.5.</span> <span class=nav-text>关注推送</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E9%99%84%E8%BF%91%E5%95%86%E6%88%B7><span class=nav-number>2.7.6.</span> <span class=nav-text>附近商户</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E7%94%A8%E6%88%B7%E7%AD%BE%E5%88%B0><span class=nav-number>2.7.7.</span> <span class=nav-text>用户签到</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E7%AD%BE%E5%88%B0%E7%BB%9F%E8%AE%A1><span class=nav-number>2.7.8.</span> <span class=nav-text>签到统计</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#UV%E7%BB%9F%E8%AE%A1-HyperLogLog><span class=nav-number>2.7.9.</span> <span class=nav-text>UV统计 HyperLogLog</span></a></ol></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96><span class=nav-number>3.</span> <span class=nav-text>瑞吉外卖</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E><span class=nav-number>4.</span> <span class=nav-text>谷粒商城</span></a></ol></div></div><!--/noindex--><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img alt=Sekyoro class=site-author-image itemprop=image src=https://i.loli.net/2021/05/17/YqoavnXdGTpPO9R.jpg><p class=site-author-name itemprop=name>Sekyoro<div class=site-description itemprop=description>什么也无法舍弃的人，什么也做不了.</div></div><div class="site-state-wrap motion-element"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/> <span class=site-state-item-count>236</span> <span class=site-state-item-name>日志</span> </a></div><div class="site-state-item site-state-categories"><a href=/categories/> <span class=site-state-item-count>16</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/> <span class=site-state-item-count>211</span> <span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class=links-of-author-item> <a title="Personal Website → http://proanimer.com" href=http://proanimer.com/ rel=noopener target=_blank><i class="fab fa-internet-explorer fa-fw"></i>Personal Website</a> </span><span class=links-of-author-item> <a title="GitHub → https://github.com/drowning-in-codes" href=https://github.com/drowning-in-codes rel=noopener target=_blank><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class=links-of-author-item> <a title="E-Mail → mailto:bukalala174@gmail.com" href=mailto:bukalala174@gmail.com rel=noopener target=_blank><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class=links-of-author-item> <a title="wxPublicAccount → https://mp.weixin.qq.com/s?__biz=Mzg3ODY1MDkzMg==&mid=2247483770&idx=1&sn=fdf88faab01d5c219ac609570a21c9d6&chksm=cf113221f866bb373938cfca03cf095ff4fe1e4dc37d68ef5de4cd4876ee1260fca0c015a4d6&token=1096259873&lang=zh_CN#rd" href=https://mp.weixin.qq.com/s?__biz=Mzg3ODY1MDkzMg==&mid=2247483770&idx=1&sn=fdf88faab01d5c219ac609570a21c9d6&chksm=cf113221f866bb373938cfca03cf095ff4fe1e4dc37d68ef5de4cd4876ee1260fca0c015a4d6&token=1096259873&lang=zh_CN#rd rel=noopener target=_blank><i class="fab fa-weixin fa-fw"></i>wxPublicAccount</a> </span><span class=links-of-author-item> <a title="RSS → /atom.xml" href=/atom.xml><i class="fa fa-rss fa-fw"></i>RSS</a> </span><span class=links-of-author-item> <a title="CSDN → https://blog.csdn.net/aqwca" href=https://blog.csdn.net/aqwca rel=noopener target=_blank><i class="fa fa-handshake fa-fw"></i>CSDN</a> </span><span class=links-of-author-item> <a title="杂鱼分享 → https://my-astro-git-main-drowning-in-codes.vercel.app" href=https://my-astro-git-main-drowning-in-codes.vercel.app/ rel=noopener target=_blank><i class="fas fa-share fa-fw"></i>杂鱼分享</a> </span></div><div class="links-of-blogroll motion-element"><div class=links-of-blogroll-title><i class="fa fa-link fa-fw"></i> 友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://myqhs.top/ rel=noopener target=_blank title=http://myqhs.top/>myqhs</a><li class=links-of-blogroll-item><a href=https://www.lllomh.com/ rel=noopener target=_blank title=https://www.lllomh.com/>芈渡</a><li class=links-of-blogroll-item><a href=https://protool-ten.vercel.app/ rel=noopener target=_blank title=https://protool-ten.vercel.app/>protools</a></ul></div><div class="motion-element announcement"><div class=title></div><p class=content><p class=date></div></div><meting-js id=6856787487 order=random server=netease type=playlist> </meting-js><div class=widget-wrap><h3 class=widget-title style=margin:0>文章词云</h3><div class="widget tagcloud" id=myCanvasContainer><canvas height=250 id=resCanvas style=width:100% width=250><ul class=tag-list itemprop=keywords><li class=tag-list-item><a class=tag-list-link href=/tags/Java/ rel=tag>Java</a><span class=tag-list-count>1</span></ul></canvas></div></div><script id=clustrmaps src=https://clustrmaps.com/map_v2.js?d=xQdGTxqARTBiNIwX2aUban-ixkj2s6VaZQWo-aVCgY8&cl=ffffff&w=a></script><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i><span>0%</span></div><!-- 边栏 --></div></aside><div id=sidebar-dimmer></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>© Wed Apr 08 2020 08:00:00 GMT+0800 (中国标准时间) – <span itemprop=copyrightYear>2025</span><span class=with-love> <i class="fa fa-heart"></i> </span><span class=author itemprop=copyrightHolder>Sekyoro</span><span class=post-meta-divider>|</span><span class=post-meta-item-icon> <i class="fa fa-chart-area"></i> </span><span title=站点总字数>2.5m</span><span class=post-meta-divider>|</span><span class=post-meta-item-icon> <i class="fa fa-coffee"></i> </span><span title=站点阅读时长>38:37</span></div><script async src=https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js></script><span id=busuanzi_container_site_pv>总访问量<span id=busuanzi_value_site_pv></span>次</span><span class=post-meta-divider>|</span><span id=busuanzi_container_site_uv>总访客数<span id=busuanzi_value_site_uv></span>人</span><span class=post-meta-divider>|</span><!-- 不蒜子计数初始值纠正 --><script>$(document).ready(function() {

    var int = setInterval(fixCount, 50);  // 50ms周期检测函数
    var countOffset = 20000;  // 初始化首次数据

    function fixCount() {            
       if (document.getElementById("busuanzi_container_site_pv").style.display != "none")
        {
            $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + countOffset); 
            clearInterval(int);
        }                  
        if ($("#busuanzi_container_site_pv").css("display") != "none")
        {
            $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + countOffset); // 加上初始数据 
            clearInterval(int); // 停止检测
        }  
    }
       	
});</script><div><span id=timeDate>载入天数...</span><span id=times>载入时分秒...</span><script>var now = new Date();
    function createtime() {
        var grt= new Date("04/08/2021 20:00:00");
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
    }
setInterval("createtime()",250);</script></div><div class=busuanzi-count><script async data-pjax src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span style="display: none;" class=post-meta-item id=busuanzi_container_site_uv> <span class=post-meta-item-icon> <i class="fa fa-user"></i> </span> <span class=site-uv title=总访客量> <span id=busuanzi_value_site_uv></span> </span> </span><span class=post-meta-divider>|</span><span style="display: none;" class=post-meta-item id=busuanzi_container_site_pv> <span class=post-meta-item-icon> <i class="fa fa-eye"></i> </span> <span class=site-pv title=总访问量> <span id=busuanzi_value_site_pv></span> </span> </span></div></div></footer></div><script color=0,0,255 count=99 opacity=0.5 src=/lib/canvas-nest/canvas-nest.min.js zindex=-1></script><script src=/lib/anime.min.js></script><script src=https://cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js></script><script src=https://cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js></script><script src=https://cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js></script><script src=https://cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js></script><script src=/js/utils.js></script><script src=/js/motion.js></script><script src=/js/schemes/pisces.js></script><script src=/js/next-boot.js></script><script src=/js/bookmark.js></script><script>var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax',
	'.widget-wrap'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
 
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});</script><script data-pjax>(function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();</script><script src=https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js></script><script src=https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js></script><script src=/js/algolia-search.js></script><script data-pjax>document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});</script><div id=pjax><script charset=utf-8 defer src=/js/outdate.js></script></div><script charset=utf-8 defer src=/js/tagcanvas.js></script><script charset=utf-8 defer src=/js/tagcloud.js></script><script>NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});</script><script>var OriginTitile = document.title;
  var titleTime;
  document.addEventListener("visibilitychange", function() {
    if (document.hidden) {
      document.title = "(つェ⊂)我藏好了哦~" + OriginTitile;
      clearTimeout(titleTime);
    } else {
      document.title = "(*´∇｀*) 被你发现啦~" + OriginTitile;
      titleTime = setTimeout(function() {
        document.title = OriginTitile;
      }, 2000);
    }
  });</script><script src=/js/src/activate-power-mode.min.js></script><script>POWERMODE.colorful = true;
    POWERMODE.shake = false;
    document.body.addEventListener('input', POWERMODE);</script>