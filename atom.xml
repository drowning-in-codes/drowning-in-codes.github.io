<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Sekyoroçš„åšå®¢å°å±‹</title>
  
  
  <link href="https://www.sekyoro.top/atom.xml" rel="self"/>
  
  <link href="https://www.sekyoro.top/"/>
  <updated>2023-09-26T15:26:07.104Z</updated>
  <id>https://www.sekyoro.top/</id>
  
  <author>
    <name>Sekyoro</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>é£æ ¼è¿ç§»</title>
    <link href="https://www.sekyoro.top/2023/09/26/%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/"/>
    <id>https://www.sekyoro.top/2023/09/26/%E9%A3%8E%E6%A0%BC%E8%BF%81%E7%A7%BB/</id>
    <published>2023-09-26T03:00:48.000Z</published>
    <updated>2023-09-26T15:26:07.104Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>å°†ä¸€ä¸ªå›¾åƒä¸­çš„é£æ ¼åº”ç”¨åœ¨å¦ä¸€å›¾åƒä¹‹ä¸Šï¼Œå³<em>é£æ ¼è¿ç§»</em>ï¼ˆstyle transferï¼‰è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸¤å¼ è¾“å…¥å›¾åƒï¼šä¸€å¼ æ˜¯<em>å†…å®¹å›¾åƒ</em>ï¼Œå¦ä¸€å¼ æ˜¯<em>é£æ ¼å›¾åƒ</em>ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨ç¥ç»ç½‘ç»œä¿®æ”¹å†…å®¹å›¾åƒï¼Œä½¿å…¶åœ¨é£æ ¼ä¸Šæ¥è¿‘é£æ ¼å›¾åƒã€‚ </p><span id="more"></span><h2 id="ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œè¿ç§»"><a href="#ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œè¿ç§»" class="headerlink" title="ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œè¿ç§»"></a>ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œè¿ç§»</h2><p><img data-src="https://zh.d2l.ai/_images/neural-style.svg" alt="é£æ ¼è¿ç§»"></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆå§‹åŒ–åˆæˆå›¾åƒï¼Œä¾‹å¦‚å°†å…¶åˆå§‹åŒ–ä¸ºå†…å®¹å›¾åƒã€‚ </p><p>è¯¥åˆæˆå›¾åƒæ˜¯é£æ ¼è¿ç§»è¿‡ç¨‹ä¸­å”¯ä¸€éœ€è¦æ›´æ–°çš„å˜é‡ï¼Œå³é£æ ¼è¿ç§»æ‰€éœ€è¿­ä»£çš„æ¨¡å‹å‚æ•°ã€‚ ç„¶åï¼Œæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªé¢„è®­ç»ƒçš„å·ç§¯ç¥ç»ç½‘ç»œæ¥æŠ½å–å›¾åƒçš„ç‰¹å¾ï¼Œå…¶ä¸­çš„æ¨¡å‹å‚æ•°åœ¨è®­ç»ƒä¸­æ— é¡»æ›´æ–°ã€‚ è¿™ä¸ªæ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œå‡­å€Ÿå¤šä¸ªå±‚é€çº§æŠ½å–å›¾åƒçš„ç‰¹å¾ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å…¶ä¸­æŸäº›å±‚çš„è¾“å‡ºä½œä¸ºå†…å®¹ç‰¹å¾æˆ–é£æ ¼ç‰¹å¾ã€‚ </p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡å‰å‘ä¼ æ’­ï¼ˆå®çº¿ç®­å¤´æ–¹å‘ï¼‰è®¡ç®—é£æ ¼è¿ç§»çš„æŸå¤±å‡½æ•°ï¼Œå¹¶é€šè¿‡åå‘ä¼ æ’­ï¼ˆè™šçº¿ç®­å¤´æ–¹å‘ï¼‰è¿­ä»£æ¨¡å‹å‚æ•°ï¼Œå³ä¸æ–­æ›´æ–°åˆæˆå›¾åƒã€‚ é£æ ¼è¿ç§»å¸¸ç”¨çš„æŸå¤±å‡½æ•°ç”±3éƒ¨åˆ†ç»„æˆï¼š</p><ol><li><em>å†…å®¹æŸå¤±</em>ä½¿åˆæˆå›¾åƒä¸å†…å®¹å›¾åƒåœ¨å†…å®¹ç‰¹å¾ä¸Šæ¥è¿‘ï¼›</li><li><em>é£æ ¼æŸå¤±</em>ä½¿åˆæˆå›¾åƒä¸é£æ ¼å›¾åƒåœ¨é£æ ¼ç‰¹å¾ä¸Šæ¥è¿‘ï¼›</li><li><em>å…¨å˜åˆ†æŸå¤±</em>åˆ™æœ‰åŠ©äºå‡å°‘åˆæˆå›¾åƒä¸­çš„å™ªç‚¹ã€‚</li></ol><p>æœ€åï¼Œå½“æ¨¡å‹è®­ç»ƒç»“æŸæ—¶ï¼Œæˆ‘ä»¬è¾“å‡ºé£æ ¼è¿ç§»çš„æ¨¡å‹å‚æ•°ï¼Œå³å¾—åˆ°æœ€ç»ˆçš„åˆæˆå›¾åƒã€‚</p><p>ä½¿ç”¨ä¸€ä¸ªé¢„è®­ç»ƒæ¨¡å‹,æ¯”å¦‚VGGæå–å†…å®¹ä¸ç‰¹å¾.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pretrained_net = torchvision.models.vgg19(pretrained=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æŠ½å–å›¾åƒçš„å†…å®¹ç‰¹å¾å’Œé£æ ¼ç‰¹å¾ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©VGGç½‘ç»œä¸­æŸäº›å±‚çš„è¾“å‡ºã€‚</p><p> ä¸€èˆ¬æ¥è¯´ï¼Œ<strong>è¶Šé è¿‘è¾“å…¥å±‚ï¼Œè¶Šå®¹æ˜“æŠ½å–å›¾åƒçš„ç»†èŠ‚ä¿¡æ¯ï¼›åä¹‹ï¼Œåˆ™è¶Šå®¹æ˜“æŠ½å–å›¾åƒçš„å…¨å±€ä¿¡æ¯ã€‚</strong> <strong>ä¸ºäº†é¿å…åˆæˆå›¾åƒè¿‡å¤šä¿ç•™å†…å®¹å›¾åƒçš„ç»†èŠ‚ï¼Œæˆ‘ä»¬é€‰æ‹©VGGè¾ƒé è¿‘è¾“å‡ºçš„å±‚ï¼Œå³<em>å†…å®¹å±‚</em>ï¼Œæ¥è¾“å‡ºå›¾åƒçš„å†…å®¹ç‰¹å¾</strong>ã€‚</p><p> æˆ‘ä»¬ä»VGGä¸­é€‰æ‹©ä¸åŒå±‚çš„è¾“å‡ºæ¥åŒ¹é…å±€éƒ¨å’Œå…¨å±€çš„é£æ ¼ï¼Œè¿™äº›å›¾å±‚ä¹Ÿç§°ä¸º<em>é£æ ¼å±‚</em>ã€‚ VGGç½‘ç»œä½¿ç”¨äº†5ä¸ªå·ç§¯å—ã€‚å¯ä»¥é€‰æ‹©ç¬¬å››å·ç§¯å—çš„æœ€åä¸€ä¸ªå·ç§¯å±‚ä½œä¸ºå†…å®¹å±‚ï¼Œé€‰æ‹©æ¯ä¸ªå·ç§¯å—çš„ç¬¬ä¸€ä¸ªå·ç§¯å±‚ä½œä¸ºé£æ ¼å±‚ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">style_layers, content_layers = [<span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">19</span>, <span class="number">28</span>], [<span class="number">25</span>]</span><br><span class="line">net = nn.Sequential(*[pretrained_net.features[i] <span class="keyword">for</span> i <span class="keyword">in</span></span><br><span class="line">                      <span class="built_in">range</span>(<span class="built_in">max</span>(content_layers + style_layers) + <span class="number">1</span>)])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extract_features</span>(<span class="params">X, content_layers, style_layers</span>):</span></span><br><span class="line">    contents = []</span><br><span class="line">    styles = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(net)):</span><br><span class="line">        X = net[i](X)</span><br><span class="line">        <span class="comment"># forward pass å¦‚æœæ˜¯é€‰å®šçš„é£æ ¼å±‚æˆ–è€…æ˜¯å†…å®¹å±‚ æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line">        <span class="keyword">if</span> i <span class="keyword">in</span> style_layers:</span><br><span class="line">            styles.append(X)</span><br><span class="line">        <span class="keyword">if</span> i <span class="keyword">in</span> content_layers:</span><br><span class="line">            contents.append(X)</span><br><span class="line">    <span class="keyword">return</span> contents, styles</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_contents</span>(<span class="params">image_shape, device</span>):</span></span><br><span class="line">    content_X = preprocess(content_img, image_shape).to(device)</span><br><span class="line">    contents_Y, _ = extract_features(content_X, content_layers, style_layers)</span><br><span class="line">    <span class="keyword">return</span> content_X, contents_Y</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_styles</span>(<span class="params">image_shape, device</span>):</span></span><br><span class="line">    style_X = preprocess(style_img, image_shape).to(device) <span class="comment"># å¾—åˆ°tensoræ•°æ® æ”¾å…¥ç½‘ç»œä¸­ å°†è¾“å‡ºè¿™å¼ å›¾åƒçš„å†…å®¹å’Œé£æ ¼</span></span><br><span class="line">    _, styles_Y = extract_features(style_X, content_layers, style_layers)</span><br><span class="line">    <span class="keyword">return</span> style_X, styles_Y</span><br></pre></td></tr></table></figure><p><code>get_contents</code>å‡½æ•°å¯¹å†…å®¹å›¾åƒæŠ½å–å†…å®¹ç‰¹å¾ï¼› <code>get_styles</code>å‡½æ•°å¯¹é£æ ¼å›¾åƒæŠ½å–é£æ ¼ç‰¹å¾ã€‚ å› ä¸ºåœ¨è®­ç»ƒæ—¶æ— é¡»æ”¹å˜é¢„è®­ç»ƒçš„VGGçš„æ¨¡å‹å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è®­ç»ƒå¼€å§‹ä¹‹å‰å°±æå–å‡ºå†…å®¹ç‰¹å¾å’Œé£æ ¼ç‰¹å¾ã€‚ </p><p>ç”±äºåˆæˆå›¾åƒæ˜¯é£æ ¼è¿ç§»æ‰€éœ€è¿­ä»£çš„æ¨¡å‹å‚æ•°ï¼Œæˆ‘ä»¬åªèƒ½åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­é€šè¿‡è°ƒç”¨<code>extract_features</code>å‡½æ•°æ¥æŠ½å–åˆæˆå›¾åƒçš„å†…å®¹ç‰¹å¾å’Œé£æ ¼ç‰¹å¾.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">rgb_mean = torch.tensor([<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>])</span><br><span class="line">rgb_std = torch.tensor([<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">preprocess</span>(<span class="params">img, image_shape</span>):</span></span><br><span class="line">    transforms = torchvision.transforms.Compose([</span><br><span class="line">        torchvision.transforms.Resize(image_shape),</span><br><span class="line">        torchvision.transforms.ToTensor(),</span><br><span class="line">        torchvision.transforms.Normalize(mean=rgb_mean, std=rgb_std)])</span><br><span class="line">    <span class="keyword">return</span> transforms(img).unsqueeze(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">postprocess</span>(<span class="params">img</span>):</span></span><br><span class="line">    img = img[<span class="number">0</span>].to(rgb_std.device)</span><br><span class="line">    img = torch.clamp(img.permute(<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>) * rgb_std + rgb_mean, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> torchvision.transforms.ToPILImage()(img.permute(<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure><p>preprocessä¸postprocessåˆ†åˆ«å°†PILæ•°æ®è½¬ä¸ºtensor,tensorè½¬ä¸ºPILæ•°æ®.</p><h3 id="æŸå¤±å‡½æ•°"><a href="#æŸå¤±å‡½æ•°" class="headerlink" title="æŸå¤±å‡½æ•°"></a>æŸå¤±å‡½æ•°</h3><p><strong>å†…å®¹æŸå¤±</strong></p><p>å®¹æŸå¤±é€šè¿‡å¹³æ–¹è¯¯å·®å‡½æ•°è¡¡é‡åˆæˆå›¾åƒä¸å†…å®¹å›¾åƒåœ¨å†…å®¹ç‰¹å¾ä¸Šçš„å·®å¼‚ã€‚ å¹³æ–¹è¯¯å·®å‡½æ•°çš„ä¸¤ä¸ªè¾“å…¥å‡ä¸º<code>extract_features</code>å‡½æ•°è®¡ç®—æ‰€å¾—åˆ°çš„å†…å®¹å±‚çš„è¾“å‡º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">content_loss</span>(<span class="params">Y_hat, Y</span>):</span></span><br><span class="line">    <span class="comment"># æˆ‘ä»¬ä»åŠ¨æ€è®¡ç®—æ¢¯åº¦çš„æ ‘ä¸­åˆ†ç¦»ç›®æ ‡ï¼š</span></span><br><span class="line">    <span class="comment"># è¿™æ˜¯ä¸€ä¸ªè§„å®šçš„å€¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå˜é‡ã€‚</span></span><br><span class="line">    <span class="keyword">return</span> torch.square(Y_hat - Y.detach()).mean()</span><br></pre></td></tr></table></figure><p><strong>é£æ ¼æŸå¤±</strong></p><p>é£æ ¼æŸå¤±ä¸å†…å®¹æŸå¤±ç±»ä¼¼ï¼Œä¹Ÿé€šè¿‡å¹³æ–¹è¯¯å·®å‡½æ•°è¡¡é‡åˆæˆå›¾åƒä¸é£æ ¼å›¾åƒåœ¨é£æ ¼ä¸Šçš„å·®å¼‚ã€‚ ä¸ºäº†è¡¨è¾¾é£æ ¼å±‚è¾“å‡ºçš„é£æ ¼ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡<code>extract_features</code>å‡½æ•°è®¡ç®—é£æ ¼å±‚çš„è¾“å‡ºã€‚ å‡è®¾è¯¥è¾“å‡ºçš„æ ·æœ¬æ•°ä¸º1ï¼Œé€šé“æ•°ä¸ºcï¼Œé«˜å’Œå®½åˆ†åˆ«ä¸ºhå’Œwï¼Œæˆ‘ä»¬å¯ä»¥å°†æ­¤è¾“å‡ºè½¬æ¢ä¸ºçŸ©é˜µXï¼Œå…¶æœ‰cè¡Œå’Œhwåˆ—ã€‚ è¿™ä¸ªçŸ©é˜µå¯ä»¥è¢«çœ‹ä½œç”±cä¸ªé•¿åº¦ä¸ºhwçš„å‘é‡x1,â€¦,xcç»„åˆè€Œæˆçš„ã€‚å…¶ä¸­å‘é‡xiä»£è¡¨äº†é€šé“iä¸Šçš„é£æ ¼ç‰¹å¾ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gram</span>(<span class="params">X</span>):</span></span><br><span class="line">    num_channels, n = X.shape[<span class="number">1</span>], X.numel() // X.shape[<span class="number">1</span>]</span><br><span class="line">    X = X.reshape((num_channels, n))</span><br><span class="line">    <span class="keyword">return</span> torch.matmul(X, X.T) / (num_channels * n)</span><br></pre></td></tr></table></figure><p>é£æ ¼æŸå¤±çš„å¹³æ–¹è¯¯å·®å‡½æ•°çš„ä¸¤ä¸ªæ ¼æ‹‰å§†çŸ©é˜µè¾“å…¥åˆ†åˆ«åŸºäºåˆæˆå›¾åƒä¸é£æ ¼å›¾åƒçš„é£æ ¼å±‚è¾“å‡ºã€‚è¿™é‡Œå‡è®¾åŸºäºé£æ ¼å›¾åƒçš„æ ¼æ‹‰å§†çŸ©é˜µ<code>gram_Y</code>å·²ç»é¢„å…ˆè®¡ç®—å¥½äº†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">style_loss</span>(<span class="params">Y_hat, gram_Y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> torch.square(gram(Y_hat) - gram_Y.detach()).mean()</span><br></pre></td></tr></table></figure><p><strong>å…¨å˜åˆ†æŸå¤±</strong></p><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å­¦åˆ°çš„åˆæˆå›¾åƒé‡Œé¢æœ‰å¤§é‡é«˜é¢‘å™ªç‚¹ï¼Œå³æœ‰ç‰¹åˆ«äº®æˆ–è€…ç‰¹åˆ«æš—çš„é¢—ç²’åƒç´ ã€‚ ä¸€ç§å¸¸è§çš„å»å™ªæ–¹æ³•æ˜¯<em>å…¨å˜åˆ†å»å™ª</em>ï¼ˆtotal variation denoisingï¼‰ï¼š å‡è®¾xi,jè¡¨ç¤ºåæ ‡(i,j)å¤„çš„åƒç´ å€¼ï¼Œé™ä½å…¨å˜åˆ†æŸå¤±<code>âˆ‘i,j|xi,jâˆ’xi+1,j|+|xi,jâˆ’xi,j+1|</code></p><p>èƒ½å¤Ÿå°½å¯èƒ½ä½¿é‚»è¿‘çš„åƒç´ å€¼ç›¸ä¼¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tv_loss</span>(<span class="params">Y_hat</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.5</span> * (torch.<span class="built_in">abs</span>(Y_hat[:, :, <span class="number">1</span>:, :] - Y_hat[:, :, :-<span class="number">1</span>, :]).mean() +torch.<span class="built_in">abs</span>(Y_hat[:, :, :, <span class="number">1</span>:] - Y_hat[:, :, :, :-<span class="number">1</span>]).mean())</span><br></pre></td></tr></table></figure><p><strong>æŸå¤±å‡½æ•°</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">content_weight, style_weight, tv_weight = <span class="number">1</span>, <span class="number">1e3</span>, <span class="number">10</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compute_loss</span>(<span class="params">X, contents_Y_hat, styles_Y_hat, contents_Y, styles_Y_gram</span>):</span></span><br><span class="line">    <span class="comment"># åˆ†åˆ«è®¡ç®—å†…å®¹æŸå¤±ã€é£æ ¼æŸå¤±å’Œå…¨å˜åˆ†æŸå¤±</span></span><br><span class="line">    contents_l = [content_loss(Y_hat, Y) * content_weight <span class="keyword">for</span> Y_hat, Y <span class="keyword">in</span> <span class="built_in">zip</span>(contents_Y_hat, contents_Y)]</span><br><span class="line">    styles_l = [style_loss(Y_hat, Y) * style_weight <span class="keyword">for</span> Y_hat, Y <span class="keyword">in</span> <span class="built_in">zip</span>(styles_Y_hat, styles_Y_gram)]</span><br><span class="line">    tv_l = tv_loss(X) * tv_weight</span><br><span class="line">    <span class="comment"># å¯¹æ‰€æœ‰æŸå¤±æ±‚å’Œ</span></span><br><span class="line">    l = <span class="built_in">sum</span>(<span class="number">10</span> * styles_l + contents_l + [tv_l])</span><br><span class="line">    <span class="keyword">return</span> contents_l, styles_l, tv_l, l</span><br></pre></td></tr></table></figure><p>contents_lè¡¨ç¤ºå†…å®¹æŸå¤±,</p><h3 id="åˆå§‹åŒ–åˆæˆå›¾åƒ"><a href="#åˆå§‹åŒ–åˆæˆå›¾åƒ" class="headerlink" title="åˆå§‹åŒ–åˆæˆå›¾åƒ"></a>åˆå§‹åŒ–åˆæˆå›¾åƒ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_inits</span>(<span class="params">X, device, lr, styles_Y</span>):</span></span><br><span class="line">    gen_img = SynthesizedImage(X.shape).to(device)</span><br><span class="line">    gen_img.weight.data.copy_(X.data)</span><br><span class="line">    trainer = torch.optim.Adam(gen_img.parameters(), lr=lr)</span><br><span class="line">    styles_Y_gram = [gram(Y) <span class="keyword">for</span> Y <span class="keyword">in</span> styles_Y]</span><br><span class="line">    <span class="keyword">return</span> gen_img(), styles_Y_gram, trainer <span class="comment"># è¿”å›ä¸å†…å®¹å›¾åƒä¸€æ ·çš„æ•°æ®ä¸è®¡ç®—çš„é£æ ¼gramç‰¹å¾</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SynthesizedImage</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, img_shape, **kwargs</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(SynthesizedImage, self).__init__(**kwargs)</span><br><span class="line">        self.weight = nn.Parameter(torch.rand(*img_shape))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.weight</span><br></pre></td></tr></table></figure><h3 id="è®­ç»ƒæ¨¡å‹"><a href="#è®­ç»ƒæ¨¡å‹" class="headerlink" title="è®­ç»ƒæ¨¡å‹"></a>è®­ç»ƒæ¨¡å‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span>(<span class="params">X, contents_Y, styles_Y, device, lr, num_epochs, lr_decay_epoch</span>):</span></span><br><span class="line">    X, styles_Y_gram, trainer = get_inits(X, device, lr, styles_Y) <span class="comment">#ç”ŸæˆåŸæœ¬å›¾ç‰‡ ä½œä¸ºå˜é‡ å¹¶è®¡ç®—é£æ ¼ç‰¹å¾</span></span><br><span class="line">    scheduler = torch.optim.lr_scheduler.StepLR(trainer, lr_decay_epoch, <span class="number">0.8</span>)</span><br><span class="line">    animator = d2l.Animator(xlabel=<span class="string">&#x27;epoch&#x27;</span>, ylabel=<span class="string">&#x27;loss&#x27;</span>,</span><br><span class="line">                            xlim=[<span class="number">10</span>, num_epochs],</span><br><span class="line">                            legend=[<span class="string">&#x27;content&#x27;</span>, <span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;TV&#x27;</span>],</span><br><span class="line">                            ncols=<span class="number">2</span>, figsize=(<span class="number">7</span>, <span class="number">2.5</span>))</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        trainer.zero_grad()</span><br><span class="line">        contents_Y_hat, styles_Y_hat = extract_features(</span><br><span class="line">            X, content_layers, style_layers) <span class="comment"># è·å–å†…å®¹å’Œé£æ ¼</span></span><br><span class="line">        contents_l, styles_l, tv_l, l = compute_loss(</span><br><span class="line">            X, contents_Y_hat, styles_Y_hat, contents_Y, styles_Y_gram)</span><br><span class="line">        l.backward()</span><br><span class="line">        trainer.step()</span><br><span class="line">        scheduler.step()</span><br><span class="line">        <span class="keyword">if</span> (epoch + <span class="number">1</span>) % <span class="number">10</span> == <span class="number">0</span>:</span><br><span class="line">            animator.axes[<span class="number">1</span>].imshow(postprocess(X))</span><br><span class="line">            animator.add(epoch + <span class="number">1</span>, [<span class="built_in">float</span>(<span class="built_in">sum</span>(contents_l)),</span><br><span class="line">                                     <span class="built_in">float</span>(<span class="built_in">sum</span>(styles_l)), <span class="built_in">float</span>(tv_l)])</span><br><span class="line">    <span class="keyword">return</span> X</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">device, image_shape = d2l.try_gpu(), (<span class="number">300</span>, <span class="number">450</span>)</span><br><span class="line">net = net.to(device)</span><br><span class="line">content_X, contents_Y = get_contents(image_shape, device)</span><br><span class="line">_, styles_Y = get_styles(image_shape, device) <span class="comment"># è·å–content_imageå’Œå†…å®¹ç‰¹å¾ å†…å®¹ç‰¹å¾å°±æ˜¯ä¼ åˆ°é¢„è®­ç»ƒæ¨¡å‹å¾—åˆ°çš„ç›¸åº”å±‚è¾“å‡º  ä»¥åŠstyle_imageçš„æ ·å¼ç‰¹å¾</span></span><br><span class="line">output = train(content_X, contents_Y, styles_Y, device, <span class="number">0.3</span>, <span class="number">500</span>, <span class="number">50</span>) <span class="comment"># è®­ç»ƒä¼ å…¥Xå’Œå…¶å†…å®¹ä¸æ ·å¼ç‰¹å¾</span></span><br></pre></td></tr></table></figure><p>åˆæˆå›¾åƒä¿ç•™äº†å†…å®¹å›¾åƒçš„é£æ™¯å’Œç‰©ä½“ï¼Œå¹¶åŒæ—¶è¿ç§»äº†é£æ ¼å›¾åƒçš„è‰²å½©ã€‚ä¾‹å¦‚ï¼Œåˆæˆå›¾åƒå…·æœ‰ä¸é£æ ¼å›¾åƒä¸­ä¸€æ ·çš„è‰²å½©å—ï¼Œå…¶ä¸­ä¸€äº›ç”šè‡³å…·æœ‰ç”»ç¬”ç¬”è§¦çš„ç»†å¾®çº¹ç†</p><h3 id="ç»“æœå±•ç¤º"><a href="#ç»“æœå±•ç¤º" class="headerlink" title="ç»“æœå±•ç¤º"></a>ç»“æœå±•ç¤º</h3><p><img data-src="https://img1.imgtp.com/2023/09/26/fqReGmQh.png" alt="image-20230926225405384"></p><p><img data-src="https://img1.imgtp.com/2023/09/26/spmizDnH.png" alt="image-20230926225430234"></p><p><img data-src="https://img1.imgtp.com/2023/09/26/RlUlfrPS.png" alt="image-20230926225439855"></p><p>å¯ä»¥å°è¯•æ”¹åŠ¨style_weight,çœ‹çœ‹é£æ ¼å˜æ¢.æ¯”å¦‚style_weightå¢å¤§,å‘ç°style losså¤ªå°äº†,è€Œä¸”ä¼šå½±å“content loss</p><p><img data-src="https://img1.imgtp.com/2023/09/26/zHqMS03J.png" alt="image-20230926231717608"></p><ul><li>é£æ ¼è¿ç§»å¸¸ç”¨çš„æŸå¤±å‡½æ•°ç”±3éƒ¨åˆ†ç»„æˆï¼šï¼ˆ1ï¼‰<strong>å†…å®¹æŸå¤±ä½¿åˆæˆå›¾åƒä¸å†…å®¹å›¾åƒåœ¨å†…å®¹ç‰¹å¾ä¸Šæ¥è¿‘</strong>ï¼›ï¼ˆ2ï¼‰<strong>é£æ ¼æŸå¤±ä»¤åˆæˆå›¾åƒä¸é£æ ¼å›¾åƒåœ¨é£æ ¼ç‰¹å¾ä¸Šæ¥è¿‘</strong>ï¼›ï¼ˆ3ï¼‰<strong>å…¨å˜åˆ†æŸå¤±åˆ™æœ‰åŠ©äºå‡å°‘åˆæˆå›¾åƒä¸­çš„å™ªç‚¹</strong>ã€‚</li><li>æˆ‘ä»¬<strong>å¯ä»¥é€šè¿‡é¢„è®­ç»ƒçš„å·ç§¯ç¥ç»ç½‘ç»œæ¥æŠ½å–å›¾åƒçš„ç‰¹å¾</strong>ï¼Œå¹¶é€šè¿‡æœ€å°åŒ–æŸå¤±å‡½æ•°æ¥ä¸æ–­æ›´æ–°åˆæˆå›¾åƒæ¥ä½œä¸ºæ¨¡å‹å‚æ•°ã€‚</li><li>æˆ‘ä»¬ä½¿ç”¨<strong>gramçŸ©é˜µè¡¨è¾¾é£æ ¼å±‚è¾“å‡ºçš„é£æ ¼</strong></li></ul><h2 id="ä½¿ç”¨GANè¿›è¡Œé£æ ¼è¿ç§»"><a href="#ä½¿ç”¨GANè¿›è¡Œé£æ ¼è¿ç§»" class="headerlink" title="ä½¿ç”¨GANè¿›è¡Œé£æ ¼è¿ç§»"></a>ä½¿ç”¨GANè¿›è¡Œé£æ ¼è¿ç§»</h2><p>GANsæ˜¯ç”Ÿæˆè‰ºæœ¯å›¾åƒçš„å¥½æ–¹æ³•ã€‚å¦ä¸€ç§æœ‰è¶£çš„æŠ€æœ¯æ˜¯æ‰€è°“çš„é£æ ¼è½¬æ¢ï¼Œå®ƒè·å–ä¸€ä¸ªå†…å®¹å›¾åƒï¼Œç„¶åç”¨ä¸åŒçš„é£æ ¼é‡æ–°ç»˜åˆ¶ï¼Œä»é£æ ¼å›¾åƒä¸­åº”ç”¨è¿‡æ»¤å™¨ã€‚</p><p>å·¥ä½œæ–¹å¼å¦‚ä¸‹:</p><p>æˆ‘ä»¬ä»éšæœºå™ªå£°å›¾åƒå¼€å§‹ï¼ˆæˆ–ä»å†…å®¹å›¾åƒå¼€å§‹ï¼Œä½†ä¸ºäº†ç†è§£èµ·è§ï¼Œä»éšæœºå™ªå£°å¼€å§‹æ›´å®¹æ˜“ï¼‰</p><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ›å»ºè¿™æ ·ä¸€ä¸ªå›¾åƒï¼Œ<strong>å®ƒå°†æ¥è¿‘å†…å®¹å›¾åƒå’Œé£æ ¼å›¾åƒ</strong>ã€‚è¿™å°†ç”±ä¸¤ä¸ªæŸå¤±å‡½æ•°ç¡®å®šï¼šåŸºäºCNNåœ¨<strong>å½“å‰å›¾åƒå’Œå†…å®¹å›¾åƒçš„æŸäº›å±‚æå–çš„ç‰¹å¾æ¥è®¡ç®—å†…å®¹æŸå¤±</strong>,<strong>ä½¿ç”¨GramçŸ©é˜µå·§å¦™åœ°è®¡ç®—å½“å‰å›¾åƒå’Œé£æ ¼å›¾åƒä¹‹é—´çš„é£æ ¼æŸå¤±</strong></p><p>ä¸ºäº†ä½¿å›¾åƒæ›´å¹³æ»‘å¹¶å»é™¤å™ªå£°ï¼Œæˆ‘ä»¬è¿˜å¼•å…¥äº†å…¨å˜åˆ†æŸå¤±ï¼Œå®ƒè®¡ç®—ç›¸é‚»åƒç´ ä¹‹é—´çš„å¹³å‡è·ç¦»</p><p>ä¼˜åŒ–æ–¹å¼ä½¿ç”¨æ¢¯åº¦ä¸‹é™ï¼ˆæˆ–ä¸€äº›å…¶ä»–ä¼˜åŒ–ç®—æ³•ï¼‰è°ƒæ•´å½“å‰å›¾åƒï¼Œä»¥æœ€å°åŒ–æ€»æŸå¤±ï¼Œæ€»æŸå¤±æ˜¯æ‰€æœ‰ä¸‰ä¸ªæŸå¤±çš„åŠ æƒå’Œã€‚</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ol><li><a href="https://zh.d2l.ai/chapter_computer-vision/neural-style.html">13.12. é£æ ¼è¿ç§» â€” åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹  2.0.0 documentation (d2l.ai)</a></li><li><a href="https://github.com/microsoft/AI-For-Beginners/tree/main/lessons/4-ComputerVision/10-GANs">AI-For-Beginners/lessons/4-ComputerVision/10-GANs at main Â· microsoft/AI-For-Beginners (github.com)</a></li><li><a href="https://arxiv.org/abs/1508.06576">[1508.06576] A Neural Algorithm of Artistic Style (arxiv.org)</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;å°†ä¸€ä¸ªå›¾åƒä¸­çš„é£æ ¼åº”ç”¨åœ¨å¦ä¸€å›¾åƒä¹‹ä¸Šï¼Œå³&lt;em&gt;é£æ ¼è¿ç§»&lt;/em&gt;ï¼ˆstyle transferï¼‰è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸¤å¼ è¾“å…¥å›¾åƒï¼šä¸€å¼ æ˜¯&lt;em&gt;å†…å®¹å›¾åƒ&lt;/em&gt;ï¼Œå¦ä¸€å¼ æ˜¯&lt;em&gt;é£æ ¼å›¾åƒ&lt;/em&gt;ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨ç¥ç»ç½‘ç»œä¿®æ”¹å†…å®¹å›¾åƒï¼Œä½¿å…¶åœ¨é£æ ¼ä¸Šæ¥è¿‘é£æ ¼å›¾åƒã€‚ &lt;/p&gt;</summary>
    
    
    
    
    <category term="-style transfer" scheme="https://www.sekyoro.top/tags/style-transfer/"/>
    
  </entry>
  
  <entry>
    <title>ç©è½¬huggingface</title>
    <link href="https://www.sekyoro.top/2023/09/23/%E7%8E%A9%E8%BD%AChuggingface/"/>
    <id>https://www.sekyoro.top/2023/09/23/%E7%8E%A9%E8%BD%AChuggingface/</id>
    <published>2023-09-23T03:29:45.000Z</published>
    <updated>2023-09-23T04:41:06.489Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>Hugging Faceè¿™ä¸€æ®µæ—¶é—´æ¥ç‰¹åˆ«ç«,èèµ„æ‹¿åˆ°äº†ä¸€å¤§ç¬”é’±,è¿˜è·ŸCouseraè¿™äº›ç¤¾åŒºå¸¸å¸¸è”ç³»,æ¨å‡ºäº†<code>diffusers</code>,<code>Gradio</code>,<code>Transformers</code>ç­‰ç­‰å¥½ç”¨çš„åº“å’Œæ¡†æ¶.ä¹Ÿå¯ä»¥ä½œä¸ºä¸Šä¼ æ•°æ®é›†å’Œæ¨¡å‹çš„åœ°æ–¹,è¿™é‡Œå°è¯•ç©ç©å…¶å¸¸ç”¨çš„ä¸€äº›åŠŸèƒ½.<br><span id="more"></span></p><h2 id="ä¸Šä¼ æ¨¡å‹æˆ–æ•°æ®é›†"><a href="#ä¸Šä¼ æ¨¡å‹æˆ–æ•°æ®é›†" class="headerlink" title="ä¸Šä¼ æ¨¡å‹æˆ–æ•°æ®é›†"></a>ä¸Šä¼ æ¨¡å‹æˆ–æ•°æ®é›†</h2><p>ä½¿ç”¨gitä¸Šä¼ æ–‡ä»¶<a href="https://huggingface.co/docs/hub/repositories-getting-started">Getting Started with Repositories (huggingface.co)</a></p><p>æ•°æ®é›†é¡¹ç›®ç»“æ„<a href="https://huggingface.co/docs/datasets/repository_structure#define-your-splits-in-yaml">Structure your repository (huggingface.co)</a></p><p>ä¸€èˆ¬æ¥è¯´åº”è¯¥ä½¿ç”¨<code>git</code>ç›¸å…³åŠŸèƒ½ç›´æ¥ä¸Šä¼ ä¸‹è½½,ä½†æ˜¯ä¸€æ—¦æ–‡ä»¶ç‰¹åˆ«å¤šæˆ–è€…å¤§,ä¸Šä¼ æ•°æ®é›†æ—¶å°±æ¯”è¾ƒéº»çƒ¦.æˆ‘å°±é‡åˆ°äº†è¿™äº›é—®é¢˜,è€Œä¸”ä¸æ­¢æˆ‘é‡åˆ°äº†.<a href="https://discuss.huggingface.co/t/batch-response-too-many-password-attempts-while-uploading-the-dataset-files-with-lfs/38458">Batch response: Too many password attempts while uploading the dataset files with lfs - ğŸ¤—Datasets - Hugging Face Forums</a> è§£å†³åŠæ³•å°±æ˜¯ä½¿ç”¨å®˜æ–¹æä¾›çš„apiå†™pythonä»£ç ä¸Šä¼ ,æˆ–è€…é€šè¿‡gitå°è¯•åˆ†æ‰¹æ¬¡ä¸Šä¼ ä½ çš„æ•°æ®é›†.</p><p><img data-src="https://img1.imgtp.com/2023/09/23/xVFLHv3r.png" alt="image-20230923115145189" style="zoom:80%;" /></p><p>è¿™ä¸ªé—®é¢˜æˆªè‡³æˆ‘å†™æ—¶ä¾æ—§æ˜¯ä¸ªBug</p><p><img data-src="https://img1.imgtp.com/2023/09/23/pyJgakfx.png" alt="image-20230923115624652" style="zoom:67%;" /></p><p>çœ‹çœ‹è¿™ä½å…„å¼Ÿçš„è§£å†³æ–¹æ¡ˆ</p><p><img data-src="https://img1.imgtp.com/2023/09/23/nn8qJpon.png" alt="image-20230923115349963"></p><p>ä¹Ÿå°±æ˜¯ä½¿ç”¨<code>upload_folder</code>,çŸ¥é“è¿™ç‚¹åå°±æ–¹ä¾¿å¤šäº†,ä½†æ˜¯æˆ‘ä¹Ÿå»ºè®®æŠŠgitçš„sshå¯†é’¥ä¹ŸåŠ åˆ°hugging faceé‡Œ.æ¥ä¸‹æ¥æŒ‰ç…§å®˜æ–¹æ•™ç¨‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">huggingface-cli login</span><br><span class="line"><span class="comment"># or using an environment variable</span></span><br><span class="line">huggingface-cli login --token <span class="variable">$HUGGINGFACE_TOKEN</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„,ç™»å½•éœ€è¦token,è€Œåˆ›å»ºtokenæ—¶,å› ä¸ºè¦ä¸Šä¼ æ•°æ®,æ‰€ä»¥éœ€è¦writeæƒé™.</p><p><img data-src="https://img1.imgtp.com/2023/09/23/e2AoQhzn.png" alt="image-20230923122538855"></p><p>ç™»é™†ä¹‹å,å¦‚æœè¦ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> huggingface_hub <span class="keyword">import</span> HfApi</span><br><span class="line">api = HfApi()</span><br><span class="line">api.upload_file(</span><br><span class="line">    path_or_fileobj=<span class="string">&quot;D:/anime_face/misaka_mikoto.zip&quot;</span>,</span><br><span class="line">    path_in_repo=<span class="string">&quot;misaka_mikoto.zip&quot;</span>,</span><br><span class="line">    repo_id=<span class="string">&quot;proanimer/anime_face&quot;</span>,</span><br><span class="line">    repo_type=<span class="string">&quot;dataset&quot;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img data-src="https://img1.imgtp.com/2023/09/23/xaOwvr2o.png" alt="image-20230923121846662" style="zoom:67%;" /></p><p>æ–‡ä»¶å¤¹ä¹Ÿæ˜¯åŒç†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> huggingface_hub <span class="keyword">import</span> HfApi</span><br><span class="line">api = HfApi()</span><br><span class="line">api.upload_folder(</span><br><span class="line">    folder_path=<span class="string">&quot;/path/to/local/space&quot;</span>,</span><br><span class="line">    repo_id=<span class="string">&quot;username/my-cool-space&quot;</span>,</span><br><span class="line">    repo_type=<span class="string">&quot;space&quot;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨hugging faceçš„cli</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Upload file at root</span></span><br><span class="line">huggingface-cli upload my-cool-model model.safetensors</span><br><span class="line"></span><br><span class="line"><span class="comment"># Upload directory at root</span></span><br><span class="line">huggingface-cli upload my-cool-model ./models</span><br><span class="line"></span><br><span class="line"><span class="comment"># Upload `my-cool-model/` directory if it exist, raise otherwise</span></span><br><span class="line">huggingface-cli upload my-cool-model</span><br></pre></td></tr></table></figure><p>ç„¶åå¯ä»¥ä¿®æ”¹<code>DatasetCard</code>è®©å…¶ä»–äººçŸ¥é“è¿™æ˜¯ä¸ªä»€ä¹ˆ,è¿˜æœ‰è‡ªåŠ¨ç”Ÿæˆçš„<code>Dataset Viewer</code>.</p><p><img data-src="https://img1.imgtp.com/2023/09/23/ndTBxgfI.png" alt="image-20230923123734196" style="zoom:67%;" /></p><p>æ­¤å¤–,å®˜æ–¹å»ºè®®é™¤äº†CSV, JSON, JSON lines, text ä»¥åŠParquetè¿™äº›æ ¼å¼æ•°æ®ä¹‹å¤–,æœ€å¥½æ·»åŠ ä¸€ä¸ªloadingè„šæœ¬ç”¨äºåŠ è½½æ•°æ®é›†.</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">my_dataset/</span><br><span class="line">â”œâ”€â”€ <span class="module-access"><span class="module"><span class="identifier">README</span>.</span></span>md</span><br><span class="line">â””â”€â”€ my_dataset.py</span><br></pre></td></tr></table></figure><p>ç›®çš„æ˜¯</p><ul><li>Add dataset metadata.</li><li>Download data files.</li><li>Generate samples.</li><li>Generate dataset metadata.</li><li>Upload a dataset to the Hub.</li></ul><p>ä½†æ˜¯è¿™é‡Œæˆ‘å°±æ²¡æœ‰ä½¿ç”¨äº†,å› ä¸ºä½ å¯ä»¥ç›´æ¥<code>git clone</code>è¿™ä¸ªä»“åº“ç„¶åè§£å‹å³å¯.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;Hugging Faceè¿™ä¸€æ®µæ—¶é—´æ¥ç‰¹åˆ«ç«,èèµ„æ‹¿åˆ°äº†ä¸€å¤§ç¬”é’±,è¿˜è·ŸCouseraè¿™äº›ç¤¾åŒºå¸¸å¸¸è”ç³»,æ¨å‡ºäº†&lt;code&gt;diffusers&lt;/code&gt;,&lt;code&gt;Gradio&lt;/code&gt;,&lt;code&gt;Transformers&lt;/code&gt;ç­‰ç­‰å¥½ç”¨çš„åº“å’Œæ¡†æ¶.ä¹Ÿå¯ä»¥ä½œä¸ºä¸Šä¼ æ•°æ®é›†å’Œæ¨¡å‹çš„åœ°æ–¹,è¿™é‡Œå°è¯•ç©ç©å…¶å¸¸ç”¨çš„ä¸€äº›åŠŸèƒ½.&lt;br&gt;</summary>
    
    
    
    
    <category term="huggingface" scheme="https://www.sekyoro.top/tags/huggingface/"/>
    
  </entry>
  
  <entry>
    <title>å¤§æ¨¡å‹å‡æå’Œè’¸é¦</title>
    <link href="https://www.sekyoro.top/2023/09/21/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%87%8F%E6%9E%9D%E5%92%8C%E8%92%B8%E9%A6%8F/"/>
    <id>https://www.sekyoro.top/2023/09/21/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%87%8F%E6%9E%9D%E5%92%8C%E8%92%B8%E9%A6%8F/</id>
    <published>2023-09-21T14:21:00.000Z</published>
    <updated>2023-09-21T14:21:00.885Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ZTM-pytorchForDL</title>
    <link href="https://www.sekyoro.top/2023/09/16/ZTM-pytorchForDL/"/>
    <id>https://www.sekyoro.top/2023/09/16/ZTM-pytorchForDL/</id>
    <published>2023-09-16T08:35:22.000Z</published>
    <updated>2023-09-26T01:19:14.421Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>ZeroToMastery<a href="https://www.learnpytorch.io/">Zero to Mastery Learn PyTorch for Deep Learning</a>ä¸Šçš„è¯¾ç¨‹å­¦ä¹ <br><span id="more"></span></p><h2 id="chapter-1"><a href="#chapter-1" class="headerlink" title="chapter 1"></a>chapter 1</h2><p>è®¾ç½®seed,è®¡ç®—tensorçš„ç‚¹ä¹˜ä»¥åŠtensoræ•°æ®ç±»å‹ç­‰åŸºç¡€æ“ä½œ,æ­é…å®˜æ–¹æ–‡æ¡£å³å¯.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Set seed</span></span><br><span class="line">torch.manual_seed(<span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create random tensor</span></span><br><span class="line">x = torch.rand(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Remove single dimensions</span></span><br><span class="line">y = torch.squeeze(x)</span><br><span class="line"><span class="comment"># Print out tensors and their shapes</span></span><br><span class="line"><span class="built_in">print</span>(x,x.shape)</span><br><span class="line"><span class="built_in">print</span>(y,y.shape)</span><br></pre></td></tr></table></figure><p>æ­¤å¤–è¿˜æœ‰ä¸€äº›å¸¸ç”¨æ–¹æ³•,æ¯”å¦‚<code>torch.squeeze</code>,<code>torch.cat</code>,<code>torch.stack</code>,<code>torch.unsqueeze</code>,<code>torch.Tensor.view</code>,<code>torch.Tensor.reshape</code>,<code>torch.Tensor.transpose</code>,<code>torch.Tensor.permute</code>ç­‰ç­‰</p><h2 id="chapter-2"><a href="#chapter-2" class="headerlink" title="chapter 2"></a>chapter 2</h2><h3 id="pytorch-workflow"><a href="#pytorch-workflow" class="headerlink" title="pytorch workflow"></a>pytorch workflow</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create PyTorch linear regression model by subclassing nn.Module</span></span><br><span class="line"><span class="comment">## Option 1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinearRegressionModel</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="built_in">super</span>().__init__()</span><br><span class="line">    self.weight = nn.Parameter(data=torch.randn(<span class="number">1</span>, </span><br><span class="line">                                              requires_grad=<span class="literal">True</span>,</span><br><span class="line">                                              dtype=torch.<span class="built_in">float</span></span><br><span class="line">                                              ))</span><br><span class="line">    </span><br><span class="line">    self.bias = nn.Parameter(data=torch.randn(<span class="number">1</span>, </span><br><span class="line">                                              requires_grad=<span class="literal">True</span>,</span><br><span class="line">                                              dtype=torch.<span class="built_in">float</span></span><br><span class="line">                                              ))</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> self.weight * x + self.bias</span><br><span class="line"></span><br><span class="line"><span class="comment"># ## Option 2</span></span><br><span class="line"><span class="comment"># class LinearRegressionModel(nn.Module):</span></span><br><span class="line"><span class="comment">#   def __init__(self):</span></span><br><span class="line"><span class="comment">#     super().__init__()</span></span><br><span class="line"><span class="comment">#     self.linear_layer = nn.Linear(in_features = 1,</span></span><br><span class="line"><span class="comment">#                                   out_features = 1)</span></span><br><span class="line"><span class="comment">#   def forward(self,x : torch.Tensor) -&gt; torch.Tensor:</span></span><br><span class="line"><span class="comment">#     return self.linear_layer(x)</span></span><br><span class="line">  </span><br><span class="line">torch.manual_seed(<span class="number">42</span>)</span><br><span class="line">model_1 = LinearRegressionModel()</span><br><span class="line">model_1,model_1.state_dict()</span><br><span class="line">     </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Create the loss function and optimizer</span></span><br><span class="line">loss_fn = nn.L1Loss()</span><br><span class="line">optimizer = torch.optim.SGD(params = model_1.parameters(),</span><br><span class="line">                            lr = <span class="number">0.01</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Training loop</span></span><br><span class="line"><span class="comment"># Train model for 300 epochs</span></span><br><span class="line">torch.manual_seed(<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">epochs = <span class="number">300</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Send data to target device</span></span><br><span class="line">X_train = X_train.to(device)</span><br><span class="line">X_test = X_test.to(device)</span><br><span class="line">y_train = y_train.to(device)</span><br><span class="line">y_test = y_test.to(device)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(epochs):</span><br><span class="line">  <span class="comment">### Training</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Put model in train mode</span></span><br><span class="line">  model_1.train()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 1. Forward pass</span></span><br><span class="line">  y_pred = model_1(X_train)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 2. Calculate loss</span></span><br><span class="line">  loss = loss_fn(y_pred,y_train)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 3. Zero gradients</span></span><br><span class="line">  optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 4. Backpropagation</span></span><br><span class="line">  loss.backward()</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 5. Step the optimizer</span></span><br><span class="line">  optimizer.step()</span><br><span class="line"></span><br><span class="line">  <span class="comment">### Perform testing every 20 epochs</span></span><br><span class="line">  <span class="keyword">if</span> epoch % <span class="number">20</span> == <span class="number">0</span>:</span><br><span class="line">    <span class="comment"># Put model in evaluation mode and setup inference context </span></span><br><span class="line">    model_1.<span class="built_in">eval</span>()</span><br><span class="line">    <span class="keyword">with</span> torch.inference_mode():</span><br><span class="line">      <span class="comment"># 1. Forward pass</span></span><br><span class="line">      y_preds = model_1(X_test)</span><br><span class="line">      <span class="comment"># 2. Calculate test loss</span></span><br><span class="line">      test_loss = loss_fn(y_preds,y_test)</span><br><span class="line">      <span class="comment"># Print out what&#x27;s happening</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">f&quot;Epoch: <span class="subst">&#123;epoch&#125;</span> | Train loss: <span class="subst">&#123;loss:<span class="number">.3</span>f&#125;</span> | Test loss: <span class="subst">&#123;test_loss:<span class="number">.3</span>f&#125;</span>&quot;</span>)</span><br><span class="line">     </span><br></pre></td></tr></table></figure><h3 id="save-trained-model"><a href="#save-trained-model" class="headerlink" title="save trained model"></a>save trained model</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. Create models directory </span></span><br><span class="line">MODEL_PATH = Path(<span class="string">&quot;models&quot;</span>)</span><br><span class="line">MODEL_PATH.mkdir(parents = <span class="literal">True</span>,exist_ok = <span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 2. Create model save path </span></span><br><span class="line">MODEL_NAME = <span class="string">&quot;01_pytorch_model&quot;</span></span><br><span class="line">MODEL_SAVE_PATH = MODEL_PATH / MODEL_NAME </span><br><span class="line"><span class="comment"># 3. Save the model state dict</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Saving model to <span class="subst">&#123;MODEL_SAVE_PATH&#125;</span>&quot;</span>)</span><br><span class="line">torch.save(obj = model_1.state_dict(),f = MODEL_SAVE_PATH)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create new instance of model and load saved state dict (make sure to put it on the target device)</span></span><br><span class="line">loaded_model = LinearRegressionModel()</span><br><span class="line">loaded_model.load_state_dict(torch.load(f = MODEL_SAVE_PATH))</span><br><span class="line">loaded_model.to(device)</span><br></pre></td></tr></table></figure><h2 id="chapter-3"><a href="#chapter-3" class="headerlink" title="chapter 3"></a>chapter 3</h2><p>ä½¿ç”¨<code>torch.inference_mode</code>æ›¿ä»£<code>torch.no_grad</code></p><p><a href="https://stackoverflow.com/questions/69543907/pytorch-torch-no-grad-vs-torch-inference-mode">machine learning - PyTorch <code>torch.no_grad</code> vs <code>torch.inference_mode</code> - Stack Overflow</a></p><p>ä½¿ç”¨<code>torchmetrics</code>ä½œä¸ºè¡¡é‡æ ‡å‡†çš„åº“æ–¹ä¾¿.ä½¿ç”¨tensorboard<a href="https://colab.research.google.com/github/pytorch/tutorials/blob/gh-pages/_downloads/tensorboard_with_pytorch.ipynb#scrollTo=fUt3jwrIHCks">tensorboard_with_pytorch.ipynb - Colaboratory (google.com)</a>æŸ¥çœ‹loss,accç­‰.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">!pip install -q tensorboard </span><br><span class="line"><span class="comment">#  load tensorboard</span></span><br><span class="line"><span class="keyword">from</span> torch.utils.tensorboard <span class="keyword">import</span> SummaryWriter</span><br><span class="line">write = SummaryWriter(<span class="string">&quot;./logs&quot;</span>)</span><br><span class="line"><span class="comment"># do train and evalute</span></span><br><span class="line"></span><br><span class="line">writer.add_scalar() <span class="comment"># æ·»åŠ å˜é‡</span></span><br><span class="line">writer.add_image()  <span class="comment">#æ·»åŠ å›¾åƒ</span></span><br><span class="line">writer.add_graph()</span><br><span class="line"></span><br><span class="line">writer.flush()</span><br><span class="line">writer.close()</span><br><span class="line">!tensorboard --logdir=runs</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨tensorboard.devåˆ†äº«åˆ°å…¬ç½‘.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">!tensorboard dev upload --logdir runs \</span><br><span class="line">--name <span class="string">&quot;My latest experiment&quot;</span> \</span><br><span class="line">--description <span class="string">&quot;Simple comparison of several hyperparameters&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨colabä¸Šä½¿ç”¨é­”æ³•å‘½ä»¤</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%tensorboard --logdir logs </span><br></pre></td></tr></table></figure><p><a href="https://medium.com/looka-engineering/how-to-use-tensorboard-with-pytorch-in-google-colab-1f76a938bc34">How to use Tensorboard with PyTorch in Google Colab | by Andrew B. Martin | Looka Engineering | Medium</a></p><p>ç«¯å£å†²çªè§£å†³</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsof -i:&lt;port&gt;</span><br><span class="line">kill -<span class="number">9</span> PID</span><br></pre></td></tr></table></figure><p>å¤šGPUè®­ç»ƒ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">data_parallel</span>(<span class="params">module, <span class="built_in">input</span>, device_ids, output_device=<span class="literal">None</span></span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> device_ids:</span><br><span class="line">        <span class="keyword">return</span> module(<span class="built_in">input</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> output_device <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        output_device = device_ids[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    replicas = nn.parallel.replicate(module, device_ids)</span><br><span class="line">    inputs = nn.parallel.scatter(<span class="built_in">input</span>, device_ids)</span><br><span class="line">    replicas = replicas[:<span class="built_in">len</span>(inputs)]</span><br><span class="line">    outputs = nn.parallel.parallel_apply(replicas, inputs)</span><br><span class="line">    <span class="keyword">return</span> nn.parallel.gather(outputs, output_device)</span><br></pre></td></tr></table></figure><p>In general, pytorchâ€™s nn.parallel primitives can be used independently. We have implemented simple MPI-like primitives:</p><ul><li>replicate: replicate a Module on multiple devices</li><li>scatter: distribute the input in the first-dimension</li><li>gather: gather and concatenate the input in the first-dimension</li><li>parallel_apply: apply a set of already-distributed inputs to a set of already-distributed models.</li></ul><h2 id="chapter-4"><a href="#chapter-4" class="headerlink" title="chapter 4"></a>chapter 4</h2><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;ZeroToMastery&lt;a href=&quot;https://www.learnpytorch.io/&quot;&gt;Zero to Mastery Learn PyTorch for Deep Learning&lt;/a&gt;ä¸Šçš„è¯¾ç¨‹å­¦ä¹ &lt;br&gt;</summary>
    
    
    
    
    <category term="pytorch" scheme="https://www.sekyoro.top/tags/pytorch/"/>
    
    <category term="DeepLearning" scheme="https://www.sekyoro.top/tags/DeepLearning/"/>
    
  </entry>
  
  <entry>
    <title>pytorchå­¦ä¹ â€”â€”åˆæ¢</title>
    <link href="https://www.sekyoro.top/2023/09/12/pytorch%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E5%88%9D%E6%8E%A2/"/>
    <id>https://www.sekyoro.top/2023/09/12/pytorch%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E5%88%9D%E6%8E%A2/</id>
    <published>2023-09-12T01:04:36.000Z</published>
    <updated>2023-09-15T01:14:05.751Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>æˆ‘å¹¶æ²¡æœ‰ç³»ç»Ÿåœ°ç¿»é˜…Pytorchæ–‡æ¡£,ä¸€èˆ¬éƒ½æ˜¯çœ‹åˆ«äººpytorchå®ç°çš„ç½‘ç»œä»£ç ,å“ªé‡Œæœ‰ä¸æ‡‚çš„å†å»çœ‹.ç°åœ¨æ‰¾åˆ°ä¸€äº›tutorialå¹¶åšä¸€äº›ç®€å•çš„å°è¯•.</p><span id="more"></span><h2 id="æ•´ä½“æµç¨‹"><a href="#æ•´ä½“æµç¨‹" class="headerlink" title="æ•´ä½“æµç¨‹"></a>æ•´ä½“æµç¨‹</h2><p><img data-src="https://img.proanimer.com/imgs/image-20230914101921453.pngundefined" alt="image-20230914101921453"></p><p><img data-src="https://img.proanimer.com/imgs/image-20230912094601559.png" alt="image-20230912094601559" style="zoom:67%;" /></p><p>é¦–å…ˆå®šä¹‰ç½‘ç»œæ¶æ„,æ³¨æ„è¿™é‡Œä¹Ÿæœ‰å¾ˆå¤šè¦ç‚¹,æ¯”å¦‚åƒå†™ä»£ç ä¸€æ ·,ä½¿ç”¨æ¨¡å—åµŒå¥—,æœ€ç»ˆå½¢æˆä¸€ä¸ªä¸ªå°æ¨¡å—ç»„æˆçš„å¤§æ¨¡å—,æ¨¡å—çš„è¶…å‚è®¾ç½®ä¹Ÿå¾ˆé‡è¦.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">model = torch.nn.Linear(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">criterion = torch.nn.MSELoss()</span><br><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr = <span class="number">0.1</span>)</span><br></pre></td></tr></table></figure><p>æŸå¤±å‡½æ•°éœ€è¦æ ¹æ®ä»»åŠ¡å»ç¡®å®š,å¸¸ç”¨äº¤å‰ç†µ.ä¼˜åŒ–å™¨åŸºæœ¬æ²¡æœ‰å¤ªå¤šæ”¹è¿›ç©ºé—´äº†,å¸¸ç”¨çš„Adamæˆ–è€…RMSprop.åœ¨è®­ç»ƒæ—¶,é€šè¿‡æ¢¯åº¦æ›´æ–°å‚æ•°,å†è¿›è¡ŒéªŒè¯,é€šè¿‡è¿™æ ·æ¥åˆ¤æ–­æ˜¯å¦è¿‡æ‹Ÿåˆç­‰ç­‰.</p><p><img data-src="https://img.proanimer.com/imgs/image-20230912095110476.png" alt="image-20230912095110476" style="zoom:67%;" /></p><p>ä»¥ä¸Šæ˜¯å…³äºç½‘ç»œçš„è®­ç»ƒ,å¯¹äºä¸€èˆ¬çš„ä»»åŠ¡,å¯¹äºæ•°æ®é›†çš„å¤„ç†ä¹Ÿæ˜¯éå¸¸é‡è¦çš„,å¯¼å…¥ä¹‹å‰éœ€è¦åšä¸€äº›transforms,ä¸åŒä»»åŠ¡åšçš„å˜åŒ–ä¸ä¸€æ ·,æ¯”å¦‚å›¾åƒçš„è¯,ä¸€èˆ¬æ•°æ®é›†æ˜¯PILæ•°æ®,éœ€è¦å°†å…¶è½¬ä¸ºTensorç±»å‹æ•°æ®,è¿˜å¯èƒ½éœ€è¦normalizeç­‰ç­‰.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">from</span> torchvision.datasets <span class="keyword">import</span> MNIST</span><br><span class="line"></span><br><span class="line">dataset = MNIST(root=<span class="string">&#x27;./data&#x27;</span>, train=<span class="literal">True</span>, download=<span class="literal">True</span>, transform=transforms.ToTensor())</span><br><span class="line">dataloader = DataLoader(dataset, batch_size=<span class="number">100</span>, shuffle=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h3><p>ä¸Šé¢ç”¨çš„Datasetéƒ½æ˜¯è‡ªå¸¦çš„,å¾ˆå¤šæ—¶å€™éœ€è¦ç”¨æˆ‘ä»¬è‡ªå·±çš„æ•°æ®é›†,é‚£ä¹ˆéœ€è¦é‡å†™Dataset</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDataset</span>(<span class="params">Dataset</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, data, file</span>):</span></span><br><span class="line">      <span class="comment"># read data and preprocess</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span>(<span class="params">self,index</span>):</span></span><br><span class="line">      <span class="comment"># return one sample at a time</span></span><br><span class="line">      <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span>(<span class="params">self</span>):</span></span><br><span class="line">      <span class="comment"># return the size of the dataset</span></span><br><span class="line">      <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨dataloaderæ–¹ä¾¿è¯»å…¥batchä»¥åŠshuffleæ‰“ä¹±</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dataset = MyDataset(data, <span class="string">&#x27;./data/train.csv&#x27;</span>)</span><br><span class="line">dataloader = DataLoader(dataset, batch_size=<span class="number">100</span>, shuffle=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>Pytorchä¸­çš„dimä¸numpyä¸­çš„axisä¸€æ ·çš„,æœ‰çš„æ—¶å€™ç±»ä¼¼è¿™ç§æœ¯è¯­ç»å¸¸å‡ºç°æ··ä¹±.</p><p>å¸¸ç”¨æ“ä½œ</p><p>transpose äº’æ¢ç»´åº¦</p><p>squeezz å»æ‰æŒ‡å®šçš„é•¿åº¦ä¸º1çš„ç»´åº¦</p><p>unsqueezz å¢åŠ ä¸€ä¸ªé•¿åº¦å”¯ä¸€çš„ç»´åº¦</p><p>cat   å°†ç»™å®šç»´åº¦ä¸­çš„seqå¼ é‡çš„ç»™å®šåºåˆ—è¿æ¥èµ·æ¥ã€‚æ‰€æœ‰å¼ é‡å¿…é¡»å…·æœ‰ç›¸åŒçš„å½¢çŠ¶ï¼ˆè¿æ¥ç»´åº¦é™¤å¤–ï¼‰æˆ–ä¸ºç©º</p><p>stack  æ²¿ç€ä¸€ä¸ªæ–°çš„ç»´åº¦è¿æ¥ä¸€ç³»åˆ—å¼ é‡ã€‚ æ‰€æœ‰å¼ é‡çš„å¤§å°éƒ½å¿…é¡»ç›¸åŒã€‚</p><h4 id="tensoræ•°æ®ç±»å‹"><a href="#tensoræ•°æ®ç±»å‹" class="headerlink" title="tensoræ•°æ®ç±»å‹"></a>tensoræ•°æ®ç±»å‹</h4><div class="table-container"><table><thead><tr><th>Data type</th><th>dtype</th><th>CPU tensor</th><th>GPU tensor</th></tr></thead><tbody><tr><td>32-bit floating point</td><td><code>torch.float32</code> or <code>torch.float</code></td><td><code>torch.FloatTensor</code></td><td><code>torch.cuda.FloatTensor</code></td></tr><tr><td>64-bit floating point</td><td><code>torch.float64</code> or <code>torch.double</code></td><td><code>torch.DoubleTensor</code></td><td><code>torch.cuda.DoubleTensor</code></td></tr><tr><td>32-bit integer (signed)</td><td><code>torch.int32</code> or <code>torch.int</code></td><td><code>torch.IntTensor</code></td><td><code>torch.cuda.IntTensor</code></td></tr></tbody></table></div><p>pytorchä¸­çš„tensorä¸numpyéƒ½æœ‰shapeå’Œdtypeå±æ€§</p><p>åœ¨æ–¹æ³•ä¸Š,pytorchç”¨äºå˜æ›´ç»´åº¦çš„æœ‰reshapeå’Œview(å¾ˆå¤šæ—¶å€™çœ‹åˆ«äººä»£ç é‡Œç”¨viewä¸è¦å¿˜äº†å…¶ä½œç”¨).æ­¤å¤–numpyä¹Ÿæœ‰squeezz,ä½†æ˜¯æ²¡æœ‰unsqueezz,è€Œæ˜¯ä½¿ç”¨expand_dims</p><p>è€Œtorch.Tensorä¸np.ndarrayæ¯”è¾ƒå¤§çš„å·®åˆ«æ˜¯tensorå¯ä»¥åœ¨GPUä¸Šè·‘,åŒæ—¶ä¹Ÿå¯ä»¥è®¾ç½®æ¢¯åº¦.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch.cuda.is_available() <span class="comment"># æŸ¥çœ‹GPUæ˜¯å¦å¯ç”¨</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡torch.tensoråˆ›é€ tensoræ—¶,ä¼šæ ¹æ®è¾“å…¥è®¾ç½®dtype,å¦‚æœè¾“å…¥æ˜¯int,é‚£å°±æ˜¯int32æˆ–è€…int64,è·Ÿosæœ‰å…³,å¦‚æœæ˜¯æµ®ç‚¹æ•°å°±æ˜¯float32.å¦‚æœä½¿ç”¨torch.onesè¿™ç§æ¥åˆ›å»ºtensor,dtypeé»˜è®¤æ˜¯float32.</p><h3 id="torch-nnå®šä¹‰æ¨¡å‹"><a href="#torch-nnå®šä¹‰æ¨¡å‹" class="headerlink" title="torch.nnå®šä¹‰æ¨¡å‹"></a>torch.nnå®šä¹‰æ¨¡å‹</h3><h4 id="nn-Linear"><a href="#nn-Linear" class="headerlink" title="nn.Linear"></a>nn.Linear</h4><p><img data-src="https://img.proanimer.com/imgs/image-20230914094934618.png" alt="image-20230914094934618"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch </span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyModel</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="built_in">super</span>(). __init__()</span><br><span class="line">    self.net = nn.Sequential(</span><br><span class="line">        nn.Linear(<span class="number">10</span>,<span class="number">32</span>),</span><br><span class="line">        nn.Sigmoid(),</span><br><span class="line">        nn.Linear(<span class="number">32</span>,<span class="number">1</span>)</span><br><span class="line">    )    </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">    x = self.net(x)</span><br></pre></td></tr></table></figure><p>å¯¹äºæ¯ä¸€ä¸ªbatch,é¦–å…ˆéœ€è¦ä½¿ç”¨optimizer.zero_grad()å»é™¤gradient,ç„¶åä½¿ç”¨loss.backward()é€šè¿‡æŸå¤±å‡½æ•°è®¡ç®—æ¢¯åº¦,æœ€åä½¿ç”¨optimizer.stepæ›´æ–°æ¢¯åº¦.</p><p>æ ‡å‡†<strong>è®­ç»ƒ</strong>æµç¨‹å¦‚ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch </span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyModel</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="built_in">super</span>(). __init__()</span><br><span class="line">    self.net = nn.Sequential( <span class="comment"># ä¹Ÿå¯ä»¥ä½¿ç”¨nn.Linear  nn.Sigmoidè¿ç»­å†™</span></span><br><span class="line">        nn.Linear(<span class="number">10</span>,<span class="number">32</span>),</span><br><span class="line">        nn.Sigmoid(),</span><br><span class="line">        nn.Linear(<span class="number">32</span>,<span class="number">1</span>)</span><br><span class="line">    )    </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">    x = self.net(x)</span><br><span class="line"></span><br><span class="line">criterion = nn.MSELoss()</span><br><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr=<span class="number">0.01</span>)</span><br><span class="line">DEVICE = torch.device(<span class="string">&quot;cuda:0&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span>)</span><br><span class="line">model = MyModel().to(DEVICE)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(n_epochs):</span><br><span class="line">  model.train()</span><br><span class="line">  <span class="keyword">for</span> x,y <span class="keyword">in</span> tr_set:</span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">    x,y = x.to(DEVICE),y.to(DEVICE)</span><br><span class="line">    pred = model(x)</span><br><span class="line">    loss = criterion(pred,y)</span><br><span class="line">    loss.backward()</span><br><span class="line">    optimizer.step()</span><br><span class="line">  model.<span class="built_in">eval</span>()</span><br></pre></td></tr></table></figure><p>éªŒè¯æ—¶,</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line">total_loss = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> x,y <span class="keyword">in</span> te_set:</span><br><span class="line">    x,y = x.to(DEVICE),y.to(DEVICE)</span><br><span class="line">    <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">      pred = model(x)</span><br><span class="line">      loss = criterion(pred,y)</span><br><span class="line">      total_loss += loss.cpu().item()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Epoch <span class="subst">&#123;epoch&#125;</span>: loss = <span class="subst">&#123;total_loss&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong> è®¡ç®—å‡ºçš„lossé™¤äº†åœ¨è®¡ç®—backwardæ—¶,å…¶ä»–åœ°æ–¹éœ€è¦æ”¾åœ¨cpuä¸Šå¹¶ç§»é™¤æ¢¯åº¦,åº”è¯¥æ³¨æ„è¿™äº›ç»†èŠ‚,ä¹Ÿå°±æ˜¯å°†åŸæœ¬åœ¨cudaä¸Šçš„æ•°æ®æ”¾åœ¨cpuä¸Š,å¹¶ä¸”å°†tensoræ•°æ®è½¬ä¸ºpythonçš„æ•°æ®ç±»å‹.</p><p><a href="https://zhuanlan.zhihu.com/p/497192910">Pytorchè®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ˜¾å­˜ï¼ˆå†…å­˜ï¼‰çˆ†ç‚¸è§£å†³æ–¹æ³• - çŸ¥ä¹ (zhihu.com)</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line">preds = []</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> tt_test:</span><br><span class="line">    x = x.to(device)</span><br><span class="line">    <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">        pred = model(x)</span><br><span class="line">        preds.append(pred.cpu())</span><br></pre></td></tr></table></figure><p><img data-src="https://img.proanimer.com/imgs/image-20230914224438072.png" alt="image-20230914224438072"></p><p>åœ¨è®­ç»ƒéªŒè¯æ—¶éœ€è¦ä½¿ç”¨model.evalä¸model.trainåˆ‡æ¢æ¨¡å‹ä¸­æ¯å±‚çš„è¡Œä¸º,åœ¨æµ‹è¯•æ—¶é˜²æ­¢å°†æµ‹è¯•æ•°æ®æ”¾å…¥æ¨¡å‹ä¸­è®¡ç®—.</p><p>æ­¤å¤–è¦å¤šç¿»é˜…Pytorchæ–‡æ¡£.</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://www.youtube.com/watch?v=6dEp6oRN2NE&amp;ab_channel=Hung-yiLee">ã€æ©Ÿå™¨å­¸ç¿’ 2023ã€‘ PyTorch Tutorial (introduction + documentation) - YouTube</a></li><li><a href="https://pytorch.org/docs/stable/tensors">torch.Tensor â€” PyTorch 2.0 documentation</a></li><li><a href="https://github.com/wkentaro/pytorch-for-numpy-users">wkentaro/pytorch-for-numpy-users: PyTorch for Numpy users. https://pytorch-for-numpy-users.wkentaro.com (github.com)</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;æˆ‘å¹¶æ²¡æœ‰ç³»ç»Ÿåœ°ç¿»é˜…Pytorchæ–‡æ¡£,ä¸€èˆ¬éƒ½æ˜¯çœ‹åˆ«äººpytorchå®ç°çš„ç½‘ç»œä»£ç ,å“ªé‡Œæœ‰ä¸æ‡‚çš„å†å»çœ‹.ç°åœ¨æ‰¾åˆ°ä¸€äº›tutorialå¹¶åšä¸€äº›ç®€å•çš„å°è¯•.&lt;/p&gt;</summary>
    
    
    
    
    <category term="pytorch" scheme="https://www.sekyoro.top/tags/pytorch/"/>
    
  </entry>
  
  <entry>
    <title>Autoencoderå­¦ä¹ </title>
    <link href="https://www.sekyoro.top/2023/09/01/Autoencoder%E5%AD%A6%E4%B9%A0/"/>
    <id>https://www.sekyoro.top/2023/09/01/Autoencoder%E5%AD%A6%E4%B9%A0/</id>
    <published>2023-09-01T12:28:30.000Z</published>
    <updated>2023-09-07T07:22:29.266Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>è¿™ç§encoder-decoderç»“æ„å¾ˆé‡è¦,åŒæ—¶ä¹Ÿå¯ä»¥ä½œä¸ºå­¦ä¹ GANçš„å‰ç½®<br><span id="more"></span></p><h2 id="Autoencoders"><a href="#Autoencoders" class="headerlink" title="Autoencoders"></a>Autoencoders</h2><p>autoencodersæ˜¯åœ¨æ·±åº¦å­¦ä¹ ç»å¸¸å¬åˆ°çš„è¯,ç®€å•æ¥è¯´æ˜¯åŸºäºlatent vector,manifoldè¿™ç§æ¦‚å¿µä¸Šçš„æ¨¡å‹,</p><blockquote><p>åˆ©ç”¨è¾“å…¥æ•°æ®  æœ¬èº«ä½œä¸ºç›‘ç£ï¼Œæ¥æŒ‡å¯¼ç¥ç»ç½‘ç»œå°è¯•å­¦ä¹ ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªé‡æ„è¾“å‡º ã€‚åœ¨æ—¶é—´åºåˆ—å¼‚å¸¸æ£€æµ‹åœºæ™¯ä¸‹ï¼Œå¼‚å¸¸å¯¹äºæ­£å¸¸æ¥è¯´æ˜¯å°‘æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¤ä¸ºï¼Œå¦‚æœä½¿ç”¨è‡ªç¼–ç å™¨é‡æ„å‡ºæ¥çš„è¾“å‡ºè·ŸåŸå§‹è¾“å…¥çš„å·®å¼‚è¶…å‡ºä¸€å®šé˜ˆå€¼ï¼ˆthresholdï¼‰çš„è¯ï¼ŒåŸå§‹æ—¶é—´åºåˆ—å³å­˜åœ¨äº†å¼‚å¸¸ã€‚</p><p>An autoencoder is a type of algorithm with the primary purpose of learning an â€œinformativeâ€ representation of the data that can be used for different applicationsa by learning to reconstruct a set of input observations well enough.</p></blockquote><p>latent featureåˆå¯ä»¥å«åšæ½œåœ¨å‘é‡,æ½œåœ¨ç‰¹å¾,bottleneckç­‰ç­‰,å«æ³•å¾ˆå¤š,ä¸è¦å¬è§æ–°çš„è¯´æ³•å‘æ€µ.ç®€å•æ¥è¯´å°±æ˜¯encoder-decoderæ¶æ„,ä¸è¿‡è¿›è¡Œè‡ªç›‘ç£,ä½¿ç”¨æŸå¤±å‡½æ•°æ¯”è¾ƒè¾“å…¥å’Œè¾“å‡º. ä½¿ç”¨,é‡å»ºè¯¯å·®(Reconsrtuction Error)ä½“ç°,é‡å»ºè¯¯å·®ï¼ˆREï¼‰æ˜¯ä¸€ä¸ªæŒ‡æ ‡ï¼Œå®ƒå¯ä»¥æŒ‡ç¤ºè‡ªåŠ¨ç¼–ç å™¨èƒ½å¤Ÿé‡å»ºè¾“å…¥è§‚æµ‹xçš„å¥½åã€‚ç›¸æ¯”äºå…¨è¿æ¥ç½‘ç»œå’Œå·ç§¯ç½‘ç»œ,AEå¹¶ä¸éœ€è¦labeled data, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å›¾åƒåŒæ—¶ä½œä¸ºè¾“å…¥å’Œè¾“å‡º.</p><p><strong>The main idea of autoencoder is that we will have an encoder network that converts input image into some latent space (normally it is just a vector of some smaller size), then the decoder network, whose goal would be to reconstruct the original image</strong></p><p><img data-src="https://s2.loli.net/2023/08/31/ABn4DgqX7xWGI6y.png" alt=""></p><p>å¸¸ç”¨äºå¦‚ä¸‹ç”¨é€”</p><ul><li>é™ä½å›¾åƒçš„ç»´åº¦ä»¥è¿›è¡Œå¯è§†åŒ–æˆ–è®­ç»ƒå›¾åƒåµŒå…¥ã€‚é€šå¸¸ï¼Œè‡ªåŠ¨ç¼–ç å™¨æ¯”PCAç»™å‡ºæ›´å¥½çš„ç»“æœï¼Œå› ä¸ºå®ƒè€ƒè™‘äº†å›¾åƒçš„ç©ºé—´æ€§è´¨å’Œå±‚æ¬¡ç‰¹å¾ã€‚</li><li>å»å™ªï¼Œå³ä»å›¾åƒä¸­å»é™¤å™ªå£°ã€‚ç”±äºå™ªå£°æºå¸¦äº†å¤§é‡æ— ç”¨çš„ä¿¡æ¯ï¼Œè‡ªåŠ¨ç¼–ç å™¨æ— æ³•å°†å…¶å…¨éƒ¨æ”¾å…¥ç›¸å¯¹è¾ƒå°çš„æ½œåœ¨ç©ºé—´ï¼Œå› æ­¤åªèƒ½æ•è·å›¾åƒçš„é‡è¦éƒ¨åˆ†ã€‚åœ¨è®­ç»ƒå»å™ªå™¨æ—¶ï¼Œæˆ‘ä»¬ä»åŸå§‹å›¾åƒå¼€å§‹ï¼Œå¹¶ä½¿ç”¨å¸¦æœ‰äººå·¥æ·»åŠ å™ªå£°çš„å›¾åƒä½œä¸ºè‡ªåŠ¨ç¼–ç å™¨çš„è¾“å…¥ã€‚</li><li>è¶…åˆ†è¾¨ç‡ï¼Œæé«˜å›¾åƒåˆ†è¾¨ç‡ã€‚æˆ‘ä»¬ä»é«˜åˆ†è¾¨ç‡å›¾åƒå¼€å§‹ï¼Œä½¿ç”¨åˆ†è¾¨ç‡è¾ƒä½çš„å›¾åƒä½œä¸ºè‡ªåŠ¨ç¼–ç å™¨è¾“å…¥ã€‚</li><li>ç”Ÿæˆæ¨¡å‹ã€‚ä¸€æ—¦æˆ‘ä»¬è®­ç»ƒäº†è‡ªåŠ¨ç¼–ç å™¨ï¼Œè§£ç å™¨éƒ¨åˆ†å°±å¯ä»¥ç”¨æ¥ä»éšæœºæ½œåœ¨å‘é‡å¼€å§‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</li></ul><p>ç¼ºç‚¹æ˜¯ ä¼ ç»Ÿçš„AE(autoencoders)æ½œåœ¨å‘é‡å¾€å¾€æ²¡æœ‰å¤ªå¤šçš„è¯­ä¹‰å«ä¹‰,æ¢å¥è¯è¯´ï¼Œä»¥MNISTæ•°æ®é›†ä¸ºä¾‹ï¼Œå¼„æ¸…æ¥šå“ªäº›æ•°å­—å¯¹åº”äºä¸åŒçš„æ½œåœ¨å‘é‡å¹¶ä¸æ˜¯ä¸€é¡¹å®¹æ˜“çš„ä»»åŠ¡ï¼Œå› ä¸ºæ¥è¿‘çš„æ½œåœ¨å‘é‡ä¸ä¸€å®šå¯¹åº”äºåŒä¸€ä¸ªæ•°å­—</p><p>å°è¯•æ”¹å˜æ½œå˜é‡å¤§å°,çœ‹çœ‹æ•ˆæœ.</p><p>å°è¯•çœ‹çœ‹ä¸åŒå›¾åƒçš„æ½œå˜é‡,å¢åŠ å™ªå£°åå†æŸ¥çœ‹æ•ˆæœ.</p><h3 id="AEå¸¸ç”¨å»å™ªå’Œè¶…åˆ†"><a href="#AEå¸¸ç”¨å»å™ªå’Œè¶…åˆ†" class="headerlink" title="AEå¸¸ç”¨å»å™ªå’Œè¶…åˆ†."></a>AEå¸¸ç”¨å»å™ªå’Œè¶…åˆ†.</h3><p>å¯¹äºå»å™ªæ¥è¯´,å°†æ²¡æœ‰å™ªå£°çš„å›¾ç‰‡äººå·¥åŠ å™ª,è®­ç»ƒæ—¶ä½¿ç”¨å™ªå£°å›¾ç‰‡ä½œä¸ºè¾“å…¥,æ­£å¸¸æ— å™ªå›¾ç‰‡ä½œä¸ºè¾“å‡º.</p><blockquote><p>To train super-resolution network, we will start with high-resolution images, and automatically downscale them to produce network inputs. We will then feed autoencoder with small images as inputs and high-resolution images as outputs.</p></blockquote><p>å¯¹äºè¶…åˆ†å°†å®½é«˜ç¼©å°çš„å›¾ç‰‡ä½œä¸ºè¾“å…¥,å°†æ­£å¸¸å›¾ä½œä¸ºè¾“å‡º.</p><p>è®­ç»ƒ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">model = AutoEncoder().to(device)</span><br><span class="line">optimizer = optim.Adam(model.parameters(), lr=lr, eps=eps)</span><br><span class="line">loss_fn = nn.BCELoss()</span><br><span class="line">noisy_tensor = torch.FloatTensor(noisify([<span class="number">256</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>])).to(device)</span><br><span class="line">test_noisy_tensor = torch.FloatTensor(noisify([<span class="number">1</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>])).to(device)</span><br><span class="line">noisy_tensors = (noisy_tensor, test_noisy_tensor)</span><br><span class="line">train(dataloaders, model, loss_fn, optimizer, <span class="number">100</span>, device, noisy=noisy_tensors)</span><br></pre></td></tr></table></figure><p>é¢„æµ‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line">predictions = []</span><br><span class="line">noise = []</span><br><span class="line">plots = <span class="number">5</span></span><br><span class="line"><span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(test_dataset):</span><br><span class="line">    <span class="keyword">if</span> i == plots:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    shapes = data[<span class="number">0</span>].shape</span><br><span class="line">    noisy_data = data[<span class="number">0</span>] + test_noisy_tensor[<span class="number">0</span>].detach().cpu()</span><br><span class="line">    noise.append(noisy_data)</span><br><span class="line">    predictions.append(model(noisy_data.to(device).unsqueeze(<span class="number">0</span>)).detach().cpu())</span><br><span class="line">plotn(plots, noise)</span><br><span class="line">plotn(plots, predictions)</span><br></pre></td></tr></table></figure><p>å¯¹äºè¶…åˆ†,å› ä¸ºè¾“å…¥å˜åŒ–äº†,è€ƒè™‘æ½œå˜é‡ä¸å˜,æ‰€ä»¥encoderéœ€è¦åšä¸€äº›å˜åŒ–.</p><h2 id="VAE"><a href="#VAE" class="headerlink" title="VAE"></a>VAE</h2><p>å¯¹äºå›¾åƒé™ç»´æ¥è¯´å½±å“ä¸å¤§,ä½†è¦è®­ç»ƒç”Ÿæˆæ¨¡å‹ï¼Œæœ€å¥½å¯¹æ½œåœ¨ç©ºé—´æœ‰ä¸€äº›äº†è§£ã€‚è¿™ä¸ªæƒ³æ³•ä½¿æˆ‘ä»¬æƒ³åˆ°äº†å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨(VAE)</p><p>VAEæ˜¯ä¸€ç§è‡ªåŠ¨ç¼–ç å™¨ï¼Œå®ƒå­¦ä¹ é¢„æµ‹æ½œåœ¨å‚æ•°çš„ç»Ÿè®¡åˆ†å¸ƒï¼Œå³æ‰€è°“çš„æ½œåœ¨åˆ†å¸ƒã€‚</p><p><img data-src="https://github.com/microsoft/AI-For-Beginners/raw/main/lessons/4-ComputerVision/09-Autoencoders/images/vae.png" alt="img" style="zoom: 50%;" /></p><p>VAEæ˜¯ä¸€ç§è‡ªåŠ¨ç¼–ç å™¨ï¼Œå®ƒå­¦ä¹ é¢„æµ‹æ½œåœ¨å‚æ•°çš„ç»Ÿè®¡åˆ†å¸ƒï¼Œå³æ‰€è°“çš„æ½œåœ¨åˆ†å¸ƒã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›æ½œåœ¨å‘é‡æ­£æ€åˆ†å¸ƒï¼Œå…·æœ‰ä¸€äº›å‡å€¼z~mean~å’Œæ ‡å‡†å·®z~sigma~ï¼ˆå‡å€¼å’Œæ ‡å‡†å·®éƒ½æ˜¯ä¸€äº›ç»´åº¦dçš„å‘é‡ï¼‰ã€‚VAEä¸­çš„ç¼–ç å™¨å­¦ä¹ é¢„æµ‹è¿™äº›å‚æ•°ï¼Œç„¶åè§£ç å™¨ä»è¿™ä¸ªåˆ†å¸ƒä¸­æå–ä¸€ä¸ªéšæœºå‘é‡æ¥é‡å»ºå¯¹è±¡ã€‚ </p><p>ç›¸æ¯”äºAEç®€å•çš„æŸå¤±å‡½æ•°,å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨ä½¿ç”¨ç”±ä¸¤éƒ¨åˆ†ç»„æˆçš„å¤æ‚æŸå¤±å‡½æ•°ï¼š</p><ul><li>é‡å»ºæŸå¤±æ˜¯æ˜¾ç¤ºé‡å»ºå›¾åƒç¦»ç›®æ ‡æœ‰å¤šè¿‘çš„æŸå¤±å‡½æ•°ï¼ˆå®ƒå¯ä»¥æ˜¯å‡æ–¹è¯¯å·®æˆ–MSEï¼‰ã€‚å®ƒä¸æ™®é€šè‡ªåŠ¨ç¼–ç å™¨ä¸­çš„æŸå¤±å‡½æ•°ç›¸åŒã€‚</li><li>KLæŸå¤±ï¼Œç¡®ä¿æ½œåœ¨å˜é‡åˆ†å¸ƒä¿æŒæ¥è¿‘æ­£æ€åˆ†å¸ƒã€‚å®ƒåŸºäºKullback-Leibleræ•£åº¦çš„æ¦‚å¿µï¼Œè¿™æ˜¯ä¸€ä¸ªä¼°è®¡ä¸¤ä¸ªç»Ÿè®¡åˆ†å¸ƒç›¸ä¼¼ç¨‹åº¦çš„æŒ‡æ ‡ã€‚</li></ul><p>VAEçš„ä¸€ä¸ªé‡è¦ä¼˜åŠ¿æ˜¯ï¼Œå®ƒä»¬ä½¿æˆ‘ä»¬èƒ½å¤Ÿç›¸å¯¹å®¹æ˜“åœ°ç”Ÿæˆæ–°å›¾åƒï¼Œ<strong>å› ä¸ºæˆ‘ä»¬çŸ¥é“ä»å“ªä¸ªåˆ†å¸ƒå¯¹æ½œåœ¨å‘é‡è¿›è¡Œé‡‡æ ·</strong>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨MNISTä¸Šç”¨2Dæ½œåœ¨å‘é‡è®­ç»ƒVAEï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ”¹å˜æ½œåœ¨å‘é‡çš„åˆ†é‡ä»¥è·å¾—ä¸åŒçš„æ•°å­—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">vae_loss</span>(<span class="params">preds, targets, z_vals</span>):</span></span><br><span class="line">    mse = nn.MSELoss()</span><br><span class="line">    reconstruction_loss = mse(preds, targets.view(targets.shape[<span class="number">0</span>], -<span class="number">1</span>)) * <span class="number">784.0</span></span><br><span class="line">    temp = <span class="number">1.0</span> + z_vals[<span class="number">1</span>] - torch.square(z_vals[<span class="number">0</span>]) - torch.exp(z_vals[<span class="number">1</span>]) <span class="comment"># ?å°½å¯èƒ½ä½¿å¾—æ½œå˜é‡ä¸æœŸæœ›çš„åˆ†å¸ƒklç›¸è¿‘</span></span><br><span class="line">    <span class="comment"># æœŸæœ›æ­£æ€åˆ†å¸ƒ å‡å€¼0 æ–¹å·®1</span></span><br><span class="line">    kl_loss = -<span class="number">0.5</span> * torch.<span class="built_in">sum</span>(temp, axis=-<span class="number">1</span>)  <span class="comment">#  </span></span><br><span class="line">    <span class="keyword">return</span> torch.mean(reconstruction_loss + kl_loss)</span><br></pre></td></tr></table></figure><p>å…³é”®æ˜¯è¿™é‡Œçš„KL loss,éœ€è¦ä½¿å¾—æ½œå˜é‡ä¸æ­£æ€åˆ†å¸ƒklæ›´å°,åˆ†å¸ƒæ›´ç›¸ä¼¼. å½“æˆ‘ä»¬é€šè¿‡encoderè®¡ç®—å‡ºå‡å€¼å’Œæ–¹å·®çš„logä¹‹å,éœ€è¦è®¡ç®—å…¶ä¸æ­£æ€åˆ†å¸ƒçš„KL,</p><p><img data-src="https://s2.loli.net/2023/09/03/HURDP5TfoBuVjyC.png" alt="image-20230903182226844" style="zoom: 80%;" /></p><p>è®¡ç®—æ­£æ€åˆ†å¸ƒä¹‹é—´çš„KLæ•£åº¦å…¬å¼å¦‚ä¸Š.å…³äºVAEè¿™é‡Œçš„KL æ•£åº¦æ¯”è¾ƒå¥½çš„å›ç­”<a href="https://stats.stackexchange.com/questions/318748/deriving-the-kl-divergence-loss-for-vaes/370048#370048">kullback leibler - Deriving the KL divergence loss for VAEs - Cross Validated (stackexchange.com)</a></p><blockquote><p><strong>KLæ•£åº¦</strong>ï¼Œæ˜¯æŒ‡å½“æŸåˆ†å¸ƒq (x)è¢«ç”¨äºè¿‘ä¼¼p (x)æ—¶çš„ä¿¡æ¯æŸå¤±ã€‚ KL Divergence ä¹Ÿå°±æ˜¯è¯´ï¼Œq (x)èƒ½åœ¨å¤šå¤§ç¨‹åº¦ä¸Šè¡¨è¾¾p (x)æ‰€åŒ…å«çš„ä¿¡æ¯ï¼ŒKLæ•£åº¦è¶Šå¤§ï¼Œè¡¨è¾¾æ•ˆæœè¶Šå·®ã€‚</p></blockquote><p>æ‰€ä»¥è®¡ç®—KLæ—¶åº”è¯¥æ˜¯KL(z|n)å…¶ä¸­zè¡¨ç¤ºæ½œå˜é‡,nè¡¨ç¤ºæ­£æ€åˆ†å¸ƒ. ç›®çš„æ˜¯åˆ©ç”¨æ­£æ€åˆ†å¸ƒæè¿°æ½œå˜é‡çš„æŸå¤±.</p><h3 id="Training-a-VAE-with-The-Reparametrization-Trick"><a href="#Training-a-VAE-with-The-Reparametrization-Trick" class="headerlink" title="Training a VAE with The Reparametrization Trick"></a>Training a VAE with The Reparametrization Trick</h3><p>VAEåœ¨åå‘ä¼ æ’­æ—¶å­˜åœ¨ä¸€äº›è®¡ç®—é—®é¢˜.ä½¿ç”¨äº†Reparametrization Trick</p><p><a href="https://stats.stackexchange.com/questions/199605/how-does-the-reparameterization-trick-for-vaes-work-and-why-is-it-important">mathematical statistics - How does the reparameterization trick for VAEs work and why is it important? - Cross Validated (stackexchange.com)</a></p><h2 id="AAE"><a href="#AAE" class="headerlink" title="AAE"></a>AAE</h2><p>ç»“åˆGANå’ŒVAEçš„ç»“æ„</p><p>å¯¹æŠ—æ€§è‡ªåŠ¨ç¼–ç å™¨æ˜¯ç”Ÿæˆå¯¹æŠ—æ€§ç½‘ç»œå’Œå˜åˆ†è‡ªåŠ¨ç¼–ç å™¨çš„ç»„åˆã€‚ç¼–ç å™¨å°†æ˜¯ç”Ÿæˆå™¨ï¼Œé‰´åˆ«å™¨å°†å­¦ä¹ åŒºåˆ†ç¼–ç å™¨è¾“å‡ºçš„çœŸå®å›¾åƒå’Œç”Ÿæˆçš„å›¾åƒã€‚ç¼–ç å™¨çš„è¾“å‡ºæ˜¯ä¸€ä¸ªåˆ†å¸ƒï¼Œä»è¿™ä¸ªè¾“å‡ºè§£ç å™¨å°†å°è¯•è§£ç å›¾åƒã€‚</p><p><img data-src="https://s2.loli.net/2023/09/03/mbhaVXe7jrO63D8.png" alt="image-20230903230742551" style="zoom: 67%;" /></p><p>ä¼—æ‰€å‘¨çŸ¥,GANçš„ç”Ÿæˆå™¨åœ¨è®­ç»ƒæ—¶ä½¿ç”¨å™ªå£°ä½œä¸ºè¾“å…¥,</p><p><img data-src="https://s2.loli.net/2023/09/04/dcLtUFBSzg41rVl.png" alt="image-20230904105728118" style="zoom:67%;" /></p><p><strong>çº æ­£</strong>:æ˜¯Adversarial. æ³¨æ„,ä¸Šé¢ä¸€å±‚çš„autoencoderçš„encoderä¹Ÿæ˜¯ä¸€ä¸ªgenerator,ç›¸å½“äºå…±ç”¨äº†GANçš„generatorå’Œautoencoderçš„encoder.é¦–å…ˆencoderä½¿ç”¨ä¸€å¼ å›¾åƒä½œä¸ºè¾“å…¥,ç”Ÿæˆçš„æ½œå˜é‡åœ¨VAEä¸­éœ€è¦å‡å°å…¶ä¸æ­£æ€åˆ†å¸ƒä¹‹é—´çš„ç›¸ä¼¼åº¦,ä¹Ÿå°±æ˜¯ä¼˜åŒ–KLæ•£åº¦,ä½†ç”±äº<strong>KLæ•£åº¦é¡¹çš„ç§¯åˆ†é™¤äº†å°‘æ•°åˆ†å¸ƒä¹‹å¤–æ²¡æœ‰é—­åˆå½¢å¼çš„è§£æè§£</strong>,æ‰€ä»¥åˆ©ç”¨GANçš„é‰´åˆ«å™¨,ä»æ­£æ€åˆ†å¸ƒä¸­é‡‡æ ·çš„æ•°æ®ä¸ç”Ÿæˆçš„æ½œå˜é‡ä½œä¸ºé‰´åˆ«å™¨çš„è¾“å…¥è¿›è¡Œé‰´åˆ«,åˆ©ç”¨è¿™ä¸ªé‰´åˆ«å™¨çš„æŸå¤±æ›´æ–°é‰´åˆ«å™¨</p><script type="math/tex; mode=display">L_D=-\frac1m\sum_{k=1}^mlog(D(z'))+log(1-D(z))</script><p>æ›´æ–°å,å†ä½¿ç”¨encoder(åŒæ—¶ä¹Ÿæ˜¯generator)ä»¥åŸå§‹å›¾åƒä½œä¸ºè¾“å…¥,ç”Ÿæˆæ½œå˜é‡,è¾“å…¥ç»™æ›´æ–°åçš„é‰´åˆ«å™¨,é‰´åˆ«å™¨å°†å…¶åˆ¤æ–­ä¸ºçœŸçš„æ¦‚ç‡.</p><script type="math/tex; mode=display">L_G=-\frac1m\sum_{k=1}^mlog(D(z))</script><p>ä»¥è¿™ç§æ–¹å¼å®šä¹‰çš„æŸå¤±å°†è¿«ä½¿é‰´åˆ«å™¨èƒ½å¤Ÿè¯†åˆ«å‡æ ·æœ¬ï¼ŒåŒæ—¶æ¨åŠ¨ç”Ÿæˆå™¨æ¬ºéª—é‰´åˆ«å™¨.</p><p>é¦–å…ˆï¼Œç”±äºç¼–ç å™¨çš„è¾“å‡ºå¿…é¡»éµå¾ªé«˜æ–¯åˆ†å¸ƒï¼Œæˆ‘ä»¬åœ¨å…¶æœ€åä¸€å±‚ä¸ä½¿ç”¨ä»»ä½•éçº¿æ€§ã€‚è§£ç å™¨çš„è¾“å‡ºå…·æœ‰Så½¢éçº¿æ€§ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„è¾“å…¥ä»¥å…¶å€¼åœ¨0å’Œ1ä¹‹é—´çš„æ–¹å¼å½’ä¸€åŒ–ã€‚é‰´åˆ«å™¨ç½‘ç»œçš„è¾“å‡ºåªæ˜¯0å’Œ1ä¹‹é—´çš„ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºè¾“å…¥æ¥è‡ªçœŸå®å…ˆéªŒåˆ†å¸ƒçš„æ¦‚ç‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Encoder</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Q_net</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Q_net, self).__init__()</span><br><span class="line">        self.lin1 = nn.Linear(X_dim, N)</span><br><span class="line">        self.lin2 = nn.Linear(N, N)</span><br><span class="line">        self.lin3gauss = nn.Linear(N, z_dim)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        x = F.droppout(self.lin1(x), p=<span class="number">0.25</span>, training=self.training)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        x = F.droppout(self.lin2(x), p=<span class="number">0.25</span>, training=self.training)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        xgauss = self.lin3gauss(x)</span><br><span class="line">        <span class="keyword">return</span> xgauss</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Decoder</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">P_net</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(P_net, self).__init__()</span><br><span class="line">        self.lin1 = nn.Linear(z_dim, N)</span><br><span class="line">        self.lin2 = nn.Linear(N, N)</span><br><span class="line">        self.lin3 = nn.Linear(N, X_dim)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        x = self.lin1(x)</span><br><span class="line">        x = F.dropout(x, p=<span class="number">0.25</span>, training=self.training)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        x = self.lin2(x)</span><br><span class="line">        x = F.dropout(x, p=<span class="number">0.25</span>, training=self.training)</span><br><span class="line">        x = self.lin3(x)</span><br><span class="line">        <span class="keyword">return</span> F.sigmoid(x)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Discriminator</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D_net_gauss</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(D_net_gauss, self).__init__()</span><br><span class="line">        self.lin1 = nn.Linear(z_dim, N)</span><br><span class="line">        self.lin2 = nn.Linear(N, N)</span><br><span class="line">        self.lin3 = nn.Linear(N, <span class="number">1</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        x = F.dropout(self.lin1(x), p=<span class="number">0.2</span>, training=self.training)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        x = F.dropout(self.lin2(x), p=<span class="number">0.2</span>, training=self.training)</span><br><span class="line">        x = F.relu(x)</span><br><span class="line">        <span class="keyword">return</span> F.sigmoid(self.lin3(x))</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥è¿™é‡Œçš„æŸå¤±å‡½æ•°å®šä¹‰ä¸ºé‡å»ºæŸå¤±(ä¸€èˆ¬ä¸ºBCElossæˆ–è€…cross-entropy loss)å’ŒGANçš„æŸå¤±,è€ŒGANçš„è®­ç»ƒä¸€èˆ¬éƒ½æ˜¯Gå’ŒDä¸€ä¸ªè®­ç»ƒä¸€ä¸‹,è€Œä¹‹å‰autoencoderè®­ç»ƒæ—¶ä¹Ÿæ˜¯æŠŠencoder-decoderä½œä¸ºæ•´ä¸ªæ¨¡å‹è®­ç»ƒçš„loss.è€Œè¿™é‡Œä¸ºäº†åœ¨ç¼–ç å™¨ï¼ˆä¹Ÿæ˜¯å¯¹æŠ—æ€§ç½‘ç»œçš„ç”Ÿæˆå™¨ï¼‰çš„ä¼˜åŒ–è¿‡ç¨‹ä¸­å…·æœ‰ç‹¬ç«‹æ€§ï¼Œæˆ‘ä»¬ä¸ºç½‘ç»œçš„è¿™ä¸€éƒ¨åˆ†å®šä¹‰äº†ä¸¤ä¸ªä¼˜åŒ–å™¨,</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">torch.manual_seed(<span class="number">10</span>)</span><br><span class="line">Q, P = Q_net() = Q_net(), P_net(<span class="number">0</span>)     <span class="comment"># Encoder/Decoder</span></span><br><span class="line">D_gauss = D_net_gauss()                <span class="comment"># Discriminator adversarial</span></span><br><span class="line"><span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">    Q = Q.cuda()</span><br><span class="line">    P = P.cuda()</span><br><span class="line">    D_cat = D_gauss.cuda()</span><br><span class="line">    D_gauss = D_net_gauss().cuda()</span><br><span class="line"><span class="comment"># Set learning rates</span></span><br><span class="line">gen_lr, reg_lr = <span class="number">0.0006</span>, <span class="number">0.0008</span></span><br><span class="line"><span class="comment"># Set optimizators</span></span><br><span class="line">P_decoder = optim.Adam(P.parameters(), lr=gen_lr)</span><br><span class="line">Q_encoder = optim.Adam(Q.parameters(), lr=gen_lr)</span><br><span class="line">Q_generator = optim.Adam(Q.parameters(), lr=reg_lr)</span><br><span class="line">D_gauss_solver = optim.Adam(D_gauss.parameters(), lr=reg_lr)</span><br></pre></td></tr></table></figure><p>é€šè¿‡ç¼–ç å™¨/è§£ç å™¨éƒ¨åˆ†è¿›è¡Œæ­£å‘è®¡ç®—ï¼Œè®¡ç®—é‡å»ºæŸå¤±å¹¶æ›´æ–°ç¼–ç å™¨Qå’Œè§£ç å™¨Pç½‘ç»œçš„å‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">z_sample = Q(X)</span><br><span class="line">X_sample = P(z_sample)</span><br><span class="line">recon_loss = F.binary_cross_entropy(X_sample + TINY, </span><br><span class="line">                                    X.resize(train_batch_size, X_dim) + TINY)</span><br><span class="line">recon_loss.backward()</span><br><span class="line">P_decoder.step()</span><br><span class="line">Q_encoder.step()</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªæ½œåœ¨è¡¨ç¤ºz=Qï¼ˆxï¼‰ï¼Œå¹¶ä»å…ˆå‰çš„pï¼ˆzï¼‰ä¸­æå–æ ·æœ¬zâ€™ï¼Œé€šè¿‡é‰´åˆ«å™¨è¿è¡Œæ¯ä¸ªæ ·æœ¬ï¼Œå¹¶è®¡ç®—åˆ†é…ç»™æ¯ä¸ªæ ·æœ¬çš„åˆ†æ•°ï¼ˆDï¼ˆzï¼‰å’ŒDï¼ˆzâ€™ï¼‰ï¼‰</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="module-access"><span class="module"><span class="identifier">Q</span>.</span></span>eval<span class="literal">()</span>    </span><br><span class="line">z_real_gauss = <span class="constructor">Variable(<span class="params">torch</span>.<span class="params">randn</span>(<span class="params">train_batch_size</span>, <span class="params">z_dim</span>)</span><span class="operator"> * </span><span class="number">5</span>)   # Sample from <span class="constructor">N(0,5)</span></span><br><span class="line"><span class="keyword">if</span> torch.cuda.is<span class="constructor">_available()</span>:</span><br><span class="line">    z_real_gauss = z_real_gauss.cuda<span class="literal">()</span></span><br><span class="line">z_fake_gauss = <span class="constructor">Q(X)</span></span><br></pre></td></tr></table></figure><p>è®­ç»ƒè¿‡ç¨‹,é¦–å…ˆåˆ©ç”¨encoder-decoder,å¾—åˆ°é‡å»ºåçš„è¾“å‡º,è¿™é‡Œä½¿ç”¨äºŒåˆ†ç±»äº¤å‰ç†µ,è®¡ç®—æ¢¯åº¦åæ›´æ–°encoderå’Œdecoderçš„å€¼.ç„¶åä½¿ç”¨generator(åŒæ—¶ä¹Ÿæ˜¯encoder)ä½¿ç”¨ä»é«˜æ–¯åˆ†å¸ƒé‡‡æ ·å¾—åˆ°çš„å˜é‡ä½œä¸ºè¾“å…¥,æ³¨æ„æ­¤æ—¶éœ€è¦è®¾ç½®dropoutå’Œnormalizationæ¨¡å¼ä¸ºæµ‹è¯•,å› ä¸ºæ­£åˆ™ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢è¿‡æ‹Ÿåˆã€åŠ å¿«æ‹Ÿåˆè¿‡ç¨‹,æ‰€ä»¥æµ‹è¯•ã€éªŒè¯æ—¶å¹¶ä¸éœ€è¦æ­£åˆ™äº†. è¿™é‡ŒQ.evalç›®çš„æ˜¯åªéœ€è¦å¾—åˆ°ä¸€ä¸ªç”Ÿæˆçš„æ½œå˜é‡,è€Œä¸æ˜¯è¿›è¡Œè®­ç»ƒ.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Compute discriminator outputs and loss</span></span><br><span class="line">D_real_gauss, D_fake_gauss = D_gauss(z_real_gauss), D_gauss(z_fake_gauss)</span><br><span class="line">D_loss_gauss = -torch.mean(torch.log(D_real_gauss + TINY) + torch.log(<span class="number">1</span> - D_fake_gauss + TINY))</span><br><span class="line">D_loss_gauss.backward()       <span class="comment"># Backpropagate loss</span></span><br><span class="line">D_gauss_solver.step()   <span class="comment"># Apply optimization step</span></span><br></pre></td></tr></table></figure><p>è®¡ç®—Generatorçš„lossï¼Œå¹¶ç›¸åº”åœ°æ›´æ–°Qç½‘ç»œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Generator</span></span><br><span class="line">Q.train()   <span class="comment"># Back to use dropout</span></span><br><span class="line">z_fake_gauss = Q(X)</span><br><span class="line">D_fake_gauss = D_gauss(z_fake_gauss)</span><br><span class="line"></span><br><span class="line">G_loss = -torch.mean(torch.log(D_fake_gauss + TINY))</span><br><span class="line">G_loss.backward()</span><br><span class="line">Q_generator.step()</span><br></pre></td></tr></table></figure><p>ç”±äºéœ€è¦æ›´æ–°Generator,æ¢å¤è®­ç»ƒæ¨¡å¼,</p><h3 id="Supervised-approach"><a href="#Supervised-approach" class="headerlink" title="Supervised approach"></a>Supervised approach</h3><blockquote><p>ç‰¹å¾å­¦ä¹ æœ€ç¨³å¥çš„æ–¹æ³•æ˜¯å°½å¯èƒ½å¤šåœ°åˆ†è§£å› ç´ ï¼Œå°½å¯èƒ½å°‘åœ°ä¸¢å¼ƒæœ‰å…³æ•°æ®çš„ä¿¡æ¯</p></blockquote><p>é€šå¸¸æ¥è¯´,å¦‚æœæˆ‘ä»¬èƒ½æä¾›æ›´å¤šä¿¡æ¯,å°†å…¶ä½œä¸ºä¸€ä¸ªå…¨ç›‘ç£çš„æ¨¡å‹.</p><p><code>disentangled representations</code>ç±»ä¼¼äºé£æ ¼è¿ç§»ä¸­æ¦‚å¿µ,å¯ä»¥å°†ä¸€å¼ å›¾åƒä¸­çš„ä¸œè¥¿åˆ†ä¸º<strong>å†…å®¹</strong>å’Œ<strong>é£æ ¼</strong>,è¿›è¡Œè§£è€¦è¡¨ç¤ºã€‚</p><p>æˆ‘ä»¬å¯ä»¥åŠ ä¸Šç±»æ ‡ç­¾çš„ç‹¬çƒ­ç ,è¿™å…¶å®å°±æ˜¯æ‰€è°“çš„Conditional GAN</p><blockquote></blockquote><p><img data-src="https://raw.githubusercontent.com/fducau/AAE_pytorch/master/img/aae_super.png" alt="aae_semi" style="zoom:33%;" /></p><p>è¿™æ ·åœ¨ä»£ç ä¸Šå°±ä¼šå¢åŠ ä¸¤ä¸ªæŸå¤±å‡½æ•°å’Œä¸€ä¸ªé‰´åˆ«å™¨ç”¨äºåˆ†è¾¨äº§ç”Ÿçš„labelçš„ç‹¬çƒ­ç å’ŒçœŸå®çš„labelçš„ç‹¬çƒ­ç .</p><p><img data-src="https://raw.githubusercontent.com/fducau/AAE_pytorch/master/img/dis_2.png" alt="disentanglement1" style="zoom: 33%;" /></p><p>è¿™æ˜¯æ•™ç¨‹<a href="https://blog.paperspace.com/adversarial-autoencoders-with-pytorch/">Adversarial Autoencoders (with Pytorch) (paperspace.com)</a>çš„å›¾ç‰‡,ä½¿å¾—æ¯ä¸€åˆ—æ½œå˜é‡ç¬¬ä¸€éƒ¨åˆ†ä¹Ÿå°±æ˜¯æ­£æ€åˆ†å¸ƒä¸€æ ·,ä½†ç±»æ ‡ç­¾ä¸ä¸€æ ·,</p><h3 id="Semi-supervised-approach"><a href="#Semi-supervised-approach" class="headerlink" title="Semi-supervised approach"></a>Semi-supervised approach</h3><p>ä¸‹é¢è¿™ç§åŠç›‘ç£çš„æ–¹å¼,æˆ‘ä»¬éœ€è¦å°†labelåŠ å…¥,è€Œè¿™ç§åŠ å…¥å¹¶ä¸æ˜¯ç›´æ¥æŠŠlabelä½œä¸ºè¾“å…¥ç»™decoderçš„,è€Œæ˜¯ç±»ä¼¼åˆšæ‰AAEçš„æ–¹å¼é€šè¿‡GANä½¿å¾—æ½œå˜é‡åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†,åˆ†åˆ«æ˜¯æƒ³è¦çš„æŸç§åˆ†å¸ƒå’Œlabel,å°†class labelçš„one-hotç¼–ç ,æ¯”å¦‚è¯´MNISTæ•°æ®é›†ä¸­,3è¿™ä¸ªå›¾åƒçš„labelå°±æ˜¯æ•°å­—ä¸‰,one-hotç¼–ç æ˜¯0011(å› ä¸ºä¸€å…±åä¸ªæ•°å­—,éœ€è¦4ä½.</p><p>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä»¥å‰çš„ä½“ç³»ç»“æ„ï¼Œä½¿AAEäº§ç”Ÿä¸€ä¸ªç”±çŸ¢é‡çº§è”ç»„æˆçš„æ½œå˜é‡yæŒ‡ç¤ºç±»æˆ–æ ‡ç­¾ï¼ˆä½¿ç”¨Softmaxï¼‰å’Œè¿ç»­æ½œåœ¨å˜é‡z(ä½¿ç”¨çº¿æ€§å±‚). ä½¿ç”¨softmaxä½œä¸ºæœ€åä¸€å±‚çš„æ¿€æ´»å‡½æ•°,è¿™æ ·æœ€åä¸€å±‚è¾“å‡ºshapeå°±æ˜¯(Batch_size,4) æ¯ä¸ªå€¼åœ¨0-1ä¹‹é—´,</p><p>é€šè¿‡è¿™ç§æ–¹æ³•è¿˜èƒ½é€šè¿‡encoderäº§ç”Ÿçš„æ½œå˜é‡ä¸­çš„ç±»æ ‡ç­¾çš„ç‹¬çƒ­ç è¿›è¡Œå¯¹å›¾åƒåˆ†ç±»,</p><p><img data-src="https://raw.githubusercontent.com/fducau/AAE_pytorch/master/img/aae_semi.png" alt="aae002" style="zoom: 33%;" /></p><p>å¸Œæœ›å‘é‡yè¡¨ç°ä¸ºä¸€ä¸ªç‹¬çƒ­ç ï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨é‰´åˆ«å™¨Dcatçš„å¯¹æŠ—æ€§ç½‘ç»œæ¥å¼ºåˆ¶å®ƒéµå¾ªç±»åˆ«åˆ†å¸ƒã€‚</p><p>ç¼–ç å™¨ç°åœ¨æ˜¯qï¼ˆzï¼Œy|xï¼‰ã€‚è§£ç å™¨ä½¿ç”¨ç±»æ ‡ç­¾å’Œè¿ç»­æ½œå˜é‡æ¥é‡å»ºå›¾åƒ</p><h2 id="Conditional-Variational-Autoencoders"><a href="#Conditional-Variational-Autoencoders" class="headerlink" title="Conditional Variational Autoencoders"></a>Conditional Variational Autoencoders</h2><p>æ¡ä»¶å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨å¯¹ç¼–ç å™¨å’Œè§£ç å™¨éƒ½æœ‰ä¸€ä¸ªé¢å¤–çš„è¾“å…¥ã€‚</p><p><img data-src="https://cdn.sekyoro.top/imgs/image-20230907105548807.png" alt="image-20230907105548807" style="zoom: 67%;" /></p><p>åœ¨è®­ç»ƒæ—¶ï¼Œå°†å…¶å›¾åƒè¢«é¦ˆé€çš„æ•°å­—æä¾›ç»™ç¼–ç å™¨å’Œè§£ç å™¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå°†è¢«è¡¨ç¤ºä¸ºä¸€ä¸ªçƒ­å‘é‡ã€‚</p><p>è¦ç”Ÿæˆç‰¹å®šæ•°å­—çš„å›¾åƒï¼Œåªéœ€å°†è¯¥æ•°å­—ä¸ä»æ ‡å‡†æ­£æ€åˆ†å¸ƒé‡‡æ ·çš„æ½œåœ¨ç©ºé—´ä¸­çš„éšæœºç‚¹ä¸€èµ·è¾“å…¥è§£ç å™¨å³å¯ã€‚å³ä½¿è¾“å…¥åŒä¸€ç‚¹æ¥äº§ç”Ÿä¸¤ä¸ªä¸åŒçš„æ•°å­—ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿä¼šæ­£ç¡®å·¥ä½œï¼Œå› ä¸ºç³»ç»Ÿä¸å†ä¾èµ–æ½œåœ¨ç©ºé—´æ¥ç¼–ç ä½ æ­£åœ¨å¤„ç†çš„æ•°å­—ã€‚ç›¸åï¼Œæ½œåœ¨ç©ºé—´å¯¹å…¶ä»–ä¿¡æ¯è¿›è¡Œç¼–ç ï¼Œå¦‚ç¬”åˆ’å®½åº¦æˆ–æ•°å­—å†™å…¥çš„è§’åº¦ã€‚</p><p><img data-src="https://s2.loli.net/2023/09/04/HCPMwute1Z2LBV7.png" alt="image-20230904223354814" style="zoom:50%;" /></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://github.com/microsoft/AI-For-Beginners/blob/main/lessons/4-ComputerVision/09-Autoencoders/README.md">AI-For-Beginners/lessons/4-ComputerVision/09-Autoencoders/README.md at main Â· microsoft/AI-For-Beginners (github.com)</a></li><li><a href="https://arxiv.org/pdf/2201.03898.pdf">*2201.03898.pdf (arxiv.org)</a></li><li><a href="https://www.countbayesie.com/blog/2017/5/9/kullback-leibler-divergence-explained">Kullback-Leibler Divergence Explained â€” Count Bayesie</a></li><li><a href="https://stats.stackexchange.com/questions/7440/kl-divergence-between-two-univariate-gaussians">normal distribution - KL divergence between two univariate Gaussians - Cross Validated (stackexchange.com)</a></li><li><a href="https://blog.paperspace.com/adversarial-autoencoders-with-pytorch/">Adversarial Autoencoders (with Pytorch) (paperspace.com)</a></li><li><a href="https://ijdykeman.github.io/ml/2016/12/21/cvae.html">Conditional Variational Autoencoders (ijdykeman.github.io)</a></li><li><a href="https://stats.stackexchange.com/questions/199605/how-does-the-reparameterization-trick-for-vaes-work-and-why-is-it-important">mathematical statistics - How does the reparameterization trick for VAEs work and why is it important? - Cross Validated (stackexchange.com)</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™ç§encoder-decoderç»“æ„å¾ˆé‡è¦,åŒæ—¶ä¹Ÿå¯ä»¥ä½œä¸ºå­¦ä¹ GANçš„å‰ç½®&lt;br&gt;</summary>
    
    
    
    
    <category term="VAE" scheme="https://www.sekyoro.top/tags/VAE/"/>
    
    <category term="autoencoder" scheme="https://www.sekyoro.top/tags/autoencoder/"/>
    
  </entry>
  
  <entry>
    <title>æ·±åº¦å­¦ä¹ åŸºç¡€çŸ¥è¯†(äºŒ)</title>
    <link href="https://www.sekyoro.top/2023/08/12/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86(%E4%BA%8C)/"/>
    <id>https://www.sekyoro.top/2023/08/12/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86(%E4%BA%8C)/</id>
    <published>2023-08-12T10:16:29.000Z</published>
    <updated>2023-08-18T02:49:56.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>æ·±åº¦å­¦ä¹ çŸ¥è¯†ç¬¬äºŒéƒ¨åˆ†</p><span id="more"></span><h3 id="å¾ªç¯ç¥ç»ç½‘ç»œ"><a href="#å¾ªç¯ç¥ç»ç½‘ç»œ" class="headerlink" title="å¾ªç¯ç¥ç»ç½‘ç»œ"></a>å¾ªç¯ç¥ç»ç½‘ç»œ</h3><p>è§£å†³åºåˆ—æ•°æ®</p><p>è¾“å…¥æ•°æ®çš„æ•°é‡è¿™ä¸ªæ•°å­—å°†ä¼šéšç€æˆ‘ä»¬é‡åˆ°çš„æ•°æ®é‡çš„å¢åŠ è€Œå¢åŠ ï¼Œ å› æ­¤éœ€è¦ä¸€ä¸ªè¿‘ä¼¼æ–¹æ³•æ¥ä½¿è¿™ä¸ªè®¡ç®—å˜å¾—å®¹æ˜“å¤„ç†ã€‚ æœ¬ç« åé¢çš„å¤§éƒ¨åˆ†å†…å®¹å°†å›´ç»•ç€å¦‚ä½•æœ‰æ•ˆä¼°è®¡<img data-src="https://s2.loli.net/2023/08/11/c82anIiD6Cmr9OE.png" alt="image-20230811182733764">å±•å¼€ã€‚ ç®€å•åœ°è¯´ï¼Œå®ƒå½’ç»“ä¸ºä»¥ä¸‹ä¸¤ç§ç­–ç•¥ã€‚</p><p>ç¬¬ä¸€ç§ç­–ç•¥ï¼Œå‡è®¾åœ¨ç°å®æƒ…å†µä¸‹ç›¸å½“é•¿çš„åºåˆ—å¯èƒ½æ˜¯ä¸å¿…è¦çš„ï¼Œ å› æ­¤æˆ‘ä»¬åªéœ€è¦æ»¡è¶³æŸä¸ªé•¿åº¦ä¸ºlçš„æ—¶é—´è·¨åº¦ã€‚ å½“ä¸‹è·å¾—çš„æœ€ç›´æ¥çš„å¥½å¤„å°±æ˜¯å‚æ•°çš„æ•°é‡æ€»æ˜¯ä¸å˜çš„ï¼Œ è‡³å°‘åœ¨t&gt;læ—¶å¦‚æ­¤ï¼Œè¿™å°±ä½¿æˆ‘ä»¬èƒ½å¤Ÿè®­ç»ƒä¸€ä¸ªä¸Šé¢æåŠçš„æ·±åº¦ç½‘ç»œã€‚ è¿™ç§æ¨¡å‹è¢«ç§°ä¸º<em>è‡ªå›å½’æ¨¡å‹</em>ï¼ˆautoregressive modelsï¼‰ï¼Œ å› ä¸ºå®ƒä»¬æ˜¯å¯¹è‡ªå·±æ‰§è¡Œå›å½’ã€‚</p><p>ç¬¬äºŒç§ç­–ç•¥ï¼Œ æ˜¯ä¿ç•™ä¸€äº›å¯¹è¿‡å»è§‚æµ‹çš„æ€»ç»“â„ï¼Œ å¹¶ä¸”åŒæ—¶æ›´æ–°é¢„æµ‹å’Œæ€»ç»“â„ã€‚ è¿™å°±äº§ç”Ÿäº†åŸºäº<img data-src="https://s2.loli.net/2023/08/11/RZ8LQh2qyYW4Su6.png" alt="image-20230811182855054">è®¡xï¼Œ ä»¥åŠå…¬å¼<img data-src="https://s2.loli.net/2023/08/11/2mkvsVQXMIpajlY.png" alt="image-20230811182927632">æ›´æ–°çš„æ¨¡å‹ã€‚ ç”±äºâ„ä»æœªè¢«è§‚æµ‹åˆ°ï¼Œè¿™ç±»æ¨¡å‹ä¹Ÿè¢«ç§°ä¸º <em>éšå˜é‡è‡ªå›å½’æ¨¡å‹</em>ï¼ˆlatent autoregressive models</p><p><img data-src="https://zh-v2.d2l.ai/_images/sequence-model.svg" alt="../_images/sequence-model.svg"></p><h4 id="æ–‡æœ¬é¢„å¤„ç†æ–¹å¼"><a href="#æ–‡æœ¬é¢„å¤„ç†æ–¹å¼" class="headerlink" title="æ–‡æœ¬é¢„å¤„ç†æ–¹å¼"></a>æ–‡æœ¬é¢„å¤„ç†æ–¹å¼</h4><p>æ­¥éª¤é€šå¸¸åŒ…æ‹¬ï¼š</p><ol><li>å°†æ–‡æœ¬ä½œä¸ºå­—ç¬¦ä¸²åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</li><li>å°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºè¯å…ƒï¼ˆå¦‚å•è¯å’Œå­—ç¬¦ï¼‰ã€‚</li><li>å»ºç«‹ä¸€ä¸ªè¯è¡¨ï¼Œå°†æ‹†åˆ†çš„è¯å…ƒæ˜ å°„åˆ°æ•°å­—ç´¢å¼•ã€‚</li><li>å°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°å­—ç´¢å¼•åºåˆ—ï¼Œæ–¹ä¾¿æ¨¡å‹æ“ä½œã€‚</li></ol><p><em>è¯å…ƒ</em>ï¼ˆtokenï¼‰æ˜¯æ–‡æœ¬çš„åŸºæœ¬å•ä½ï¼Œè¯å…ƒçš„ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ¨¡å‹éœ€è¦çš„è¾“å…¥æ˜¯æ•°å­—ï¼Œå› æ­¤è¿™ç§ç±»å‹ä¸æ–¹ä¾¿æ¨¡å‹ä½¿ç”¨ã€‚ ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªå­—å…¸ï¼Œé€šå¸¸ä¹Ÿå«åš<em>è¯è¡¨</em>ï¼ˆvocabularyï¼‰ï¼Œ ç”¨æ¥å°†å­—ç¬¦ä¸²ç±»å‹çš„è¯å…ƒæ˜ å°„åˆ°ä»0å¼€å§‹çš„æ•°å­—ç´¢å¼•ä¸­ã€‚</p><p>å°†è®­ç»ƒé›†ä¸­çš„æ‰€æœ‰æ–‡æ¡£åˆå¹¶åœ¨ä¸€èµ·ï¼Œå¯¹å®ƒä»¬çš„å”¯ä¸€è¯å…ƒè¿›è¡Œç»Ÿè®¡ï¼Œ å¾—åˆ°çš„ç»Ÿè®¡ç»“æœç§°ä¹‹ä¸º<em>è¯­æ–™</em>ï¼ˆcorpusï¼‰ã€‚ ç„¶åæ ¹æ®æ¯ä¸ªå”¯ä¸€è¯å…ƒçš„å‡ºç°é¢‘ç‡ï¼Œä¸ºå…¶åˆ†é…ä¸€ä¸ªæ•°å­—ç´¢å¼•ã€‚ å¾ˆå°‘å‡ºç°çš„è¯å…ƒé€šå¸¸è¢«ç§»é™¤ï¼Œè¿™å¯ä»¥é™ä½å¤æ‚æ€§ã€‚ å¦å¤–ï¼Œè¯­æ–™åº“ä¸­ä¸å­˜åœ¨æˆ–å·²åˆ é™¤çš„ä»»ä½•è¯å…ƒéƒ½å°†æ˜ å°„åˆ°ä¸€ä¸ªç‰¹å®šçš„æœªçŸ¥è¯å…ƒâ€œ<unk>â€ã€‚ æˆ‘ä»¬å¯ä»¥é€‰æ‹©å¢åŠ ä¸€ä¸ªåˆ—è¡¨ï¼Œç”¨äºä¿å­˜é‚£äº›è¢«ä¿ç•™çš„è¯å…ƒï¼Œ ä¾‹å¦‚ï¼šå¡«å……è¯å…ƒï¼ˆâ€œ<pad>â€ï¼‰ï¼› åºåˆ—å¼€å§‹è¯å…ƒï¼ˆâ€œ<bos>â€ï¼‰ï¼› åºåˆ—ç»“æŸè¯å…ƒï¼ˆâ€œ<eos>â€ï¼‰ã€‚</p><p>è‡ªç„¶è¯­è¨€ç‰¹å¾:</p><ol><li><p>è¯é¢‘ä»¥ä¸€ç§æ˜ç¡®çš„æ–¹å¼è¿…é€Ÿè¡°å‡ã€‚ å°†å‰å‡ ä¸ªå•è¯ä½œä¸ºä¾‹å¤–æ¶ˆé™¤åï¼Œå‰©ä½™çš„æ‰€æœ‰å•è¯å¤§è‡´éµå¾ªåŒå¯¹æ•°åæ ‡å›¾ä¸Šçš„ä¸€æ¡ç›´çº¿ã€‚ è¿™æ„å‘³ç€å•è¯çš„é¢‘ç‡æ»¡è¶³<em>é½æ™®å¤«å®šå¾‹</em>ï¼ˆZipfâ€™s lawï¼‰ï¼Œ</p><p><img data-src="https://s2.loli.net/2023/08/12/5CnHizhOuTlW1wc.png" alt="image-20230812181916062"></p></li><li><p>é™¤äº†ä¸€å…ƒè¯­æ³•è¯ï¼Œå•è¯åºåˆ—ä¼¼ä¹ä¹Ÿéµå¾ªé½æ™®å¤«å®šå¾‹ï¼Œ å°½ç®¡å…¬å¼ä¸­çš„æŒ‡æ•°Î±æ›´å° ï¼ˆæŒ‡æ•°çš„å¤§å°å—åºåˆ—é•¿åº¦çš„å½±å“ï¼‰ï¼›</p></li><li>è¯è¡¨ä¸­nå…ƒç»„çš„æ•°é‡å¹¶æ²¡æœ‰é‚£ä¹ˆå¤§ï¼Œè¿™è¯´æ˜è¯­è¨€ä¸­å­˜åœ¨ç›¸å½“å¤šçš„ç»“æ„ï¼Œ è¿™äº›ç»“æ„ç»™äº†æˆ‘ä»¬åº”ç”¨æ¨¡å‹çš„å¸Œæœ›ï¼›</li><li>å¾ˆå¤šnå…ƒç»„å¾ˆå°‘å‡ºç°ï¼Œè¿™ä½¿å¾—æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘éå¸¸ä¸é€‚åˆè¯­è¨€å»ºæ¨¡ã€‚ ä½œä¸ºä»£æ›¿ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åŸºäºæ·±åº¦å­¦ä¹ çš„æ¨¡å‹ã€‚</li></ol><h3 id="å¾ªç¯ç¥ç»ç½‘ç»œ-1"><a href="#å¾ªç¯ç¥ç»ç½‘ç»œ-1" class="headerlink" title="å¾ªç¯ç¥ç»ç½‘ç»œ"></a>å¾ªç¯ç¥ç»ç½‘ç»œ</h3><p><img data-src="https://zh.d2l.ai/_images/rnn.svg" alt="../_images/rnn.svg" style="zoom: 67%;" /></p><h4 id="éšçŠ¶æ€"><a href="#éšçŠ¶æ€" class="headerlink" title="éšçŠ¶æ€"></a>éšçŠ¶æ€</h4><p><img data-src="https://s2.loli.net/2023/08/16/zpKICRmb4FvML2g.png" alt="image-20230815235353077"></p><p>éšçŠ¶æ€H,æœ‰ä¸Šä¸€ä¸ªéšçŠ¶æ€ä¸æœ¬æ¬¡è¾“å…¥æ§åˆ¶.</p><p><img data-src="https://s2.loli.net/2023/08/16/kWAnvRDGEHc2Bxi.png" alt="image-20230816000019295"></p><p>è¾“å‡ºO</p><h4 id="æ¢¯åº¦è£å‰ª"><a href="#æ¢¯åº¦è£å‰ª" class="headerlink" title="æ¢¯åº¦è£å‰ª"></a>æ¢¯åº¦è£å‰ª</h4><p><img data-src="https://s2.loli.net/2023/08/16/EPUuOp3Gf1Szlxq.png" alt="image-20230816130933516"></p><h4 id="ç®€å•çš„RNNç¼ºç‚¹"><a href="#ç®€å•çš„RNNç¼ºç‚¹" class="headerlink" title="ç®€å•çš„RNNç¼ºç‚¹"></a>ç®€å•çš„RNNç¼ºç‚¹</h4><ul><li>æˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šæ—©æœŸè§‚æµ‹å€¼å¯¹é¢„æµ‹æ‰€æœ‰æœªæ¥è§‚æµ‹å€¼å…·æœ‰éå¸¸é‡è¦çš„æ„ä¹‰ã€‚ è€ƒè™‘ä¸€ä¸ªæç«¯æƒ…å†µï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªè§‚æµ‹å€¼åŒ…å«ä¸€ä¸ªæ ¡éªŒå’Œï¼Œ ç›®æ ‡æ˜¯åœ¨åºåˆ—çš„æœ«å°¾è¾¨åˆ«æ ¡éªŒå’Œæ˜¯å¦æ­£ç¡®ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªè¯å…ƒçš„å½±å“è‡³å…³é‡è¦ã€‚ æˆ‘ä»¬å¸Œæœ›æœ‰æŸäº›æœºåˆ¶èƒ½å¤Ÿåœ¨ä¸€ä¸ªè®°å¿†å…ƒé‡Œå­˜å‚¨é‡è¦çš„æ—©æœŸä¿¡æ¯ã€‚ å¦‚æœæ²¡æœ‰è¿™æ ·çš„æœºåˆ¶ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸ç»™è¿™ä¸ªè§‚æµ‹å€¼æŒ‡å®šä¸€ä¸ªéå¸¸å¤§çš„æ¢¯åº¦ï¼Œ å› ä¸ºå®ƒä¼šå½±å“æ‰€æœ‰åç»­çš„è§‚æµ‹å€¼ã€‚</li><li>æˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šä¸€äº›è¯å…ƒæ²¡æœ‰ç›¸å…³çš„è§‚æµ‹å€¼ã€‚ ä¾‹å¦‚ï¼Œåœ¨å¯¹ç½‘é¡µå†…å®¹è¿›è¡Œæƒ…æ„Ÿåˆ†ææ—¶ï¼Œ å¯èƒ½æœ‰ä¸€äº›è¾…åŠ©HTMLä»£ç ä¸ç½‘é¡µä¼ è¾¾çš„æƒ…ç»ªæ— å…³ã€‚ æˆ‘ä»¬å¸Œæœ›æœ‰ä¸€äº›æœºåˆ¶æ¥<em>è·³è¿‡</em>éšçŠ¶æ€è¡¨ç¤ºä¸­çš„æ­¤ç±»è¯å…ƒã€‚</li><li>æˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šåºåˆ—çš„å„ä¸ªéƒ¨åˆ†ä¹‹é—´å­˜åœ¨é€»è¾‘ä¸­æ–­ã€‚ ä¾‹å¦‚ï¼Œä¹¦çš„ç« èŠ‚ä¹‹é—´å¯èƒ½ä¼šæœ‰è¿‡æ¸¡å­˜åœ¨ï¼Œ æˆ–è€…è¯åˆ¸çš„ç†Šå¸‚å’Œç‰›å¸‚ä¹‹é—´å¯èƒ½ä¼šæœ‰è¿‡æ¸¡å­˜åœ¨ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½æœ‰ä¸€ç§æ–¹æ³•æ¥<em>é‡ç½®</em>æˆ‘ä»¬çš„å†…éƒ¨çŠ¶æ€è¡¨ç¤º</li></ul><h3 id="GRU"><a href="#GRU" class="headerlink" title="GRU"></a>GRU</h3><blockquote><p>é—¨æ§å¾ªç¯å•å…ƒä¸æ™®é€šçš„å¾ªç¯ç¥ç»ç½‘ç»œä¹‹é—´çš„å…³é”®åŒºåˆ«åœ¨äºï¼š å‰è€…æ”¯æŒéšçŠ¶æ€çš„é—¨æ§ã€‚ è¿™æ„å‘³ç€æ¨¡å‹æœ‰ä¸“é—¨çš„æœºåˆ¶æ¥ç¡®å®šåº”è¯¥ä½•æ—¶æ›´æ–°éšçŠ¶æ€ï¼Œ ä»¥åŠåº”è¯¥ä½•æ—¶é‡ç½®éšçŠ¶æ€ã€‚ è¿™äº›æœºåˆ¶æ˜¯å¯å­¦ä¹ çš„ï¼Œå¹¶ä¸”èƒ½å¤Ÿè§£å†³äº†ä¸Šé¢åˆ—å‡ºçš„é—®é¢˜ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè¯å…ƒéå¸¸é‡è¦ï¼Œ æ¨¡å‹å°†å­¦ä¼šåœ¨ç¬¬ä¸€æ¬¡è§‚æµ‹ä¹‹åä¸æ›´æ–°éšçŠ¶æ€ã€‚ åŒæ ·ï¼Œæ¨¡å‹ä¹Ÿå¯ä»¥å­¦ä¼šè·³è¿‡ä¸ç›¸å…³çš„ä¸´æ—¶è§‚æµ‹ã€‚ æœ€åï¼Œæ¨¡å‹è¿˜å°†å­¦ä¼šåœ¨éœ€è¦çš„æ—¶å€™é‡ç½®éšçŠ¶æ€ã€‚ ä¸‹é¢æˆ‘ä»¬å°†è¯¦ç»†è®¨è®ºå„ç±»é—¨æ§</p></blockquote><p>å¼•å…¥é‡ç½®é—¨å’Œæ›´æ–°é—¨. è¾“å…¥æ˜¯ç”±å½“å‰æ—¶é—´æ­¥çš„è¾“å…¥å’Œå‰ä¸€æ—¶é—´æ­¥çš„éšçŠ¶æ€ç»™å‡ºã€‚ ä¸¤ä¸ªé—¨çš„è¾“å‡ºæ˜¯ç”±ä½¿ç”¨sigmoidæ¿€æ´»å‡½æ•°çš„ä¸¤ä¸ªå…¨è¿æ¥å±‚ç»™</p><p><img data-src="https://zh-v2.d2l.ai/_images/gru-1.svg" alt="../_images/gru-1.svg" style="zoom: 67%;" /></p><p>åˆ©ç”¨é‡ç½®é—¨çš„è¾“å‡ºä¸å¸¸è§„éšçŠ¶æ€é›†æˆ,å¾—åˆ°ä¸€ä¸ªå€™é€‰éšçŠ¶æ€.å¦‚å¦‚æœé‡ç½®é—¨è¾“å‡ºä¸º1,åˆ™æ˜¯æ™®é€šçš„éšçŠ¶æ€,ç”±æœ¬æ¬¡è¾“å…¥ä¸ä¸Šæ¬¡éšçŠ¶æ€ä½œä¸ºè¾“å…¥,å¦‚æœé‡ç½®é—¨è¾“å‡ºä¸º0,åˆ™å€™é€‰éšçŠ¶æ€åªå—è¾“å…¥å½±å“,ä¹Ÿå°±æ˜¯è¿›è¡Œäº†é‡ç½®.</p><script type="math/tex; mode=display">\tilde{\mathbf{H}}_t=\tanh \left(\mathbf{X}_t \mathbf{W}_{x h}+\left(\mathbf{R}_t \odot \mathbf{H}_{t-1}\right) \mathbf{W}_{h h}+\mathbf{b}_h\right),</script><p><img data-src="https://zh-v2.d2l.ai/_images/gru-2.svg" alt="../_images/gru-2.svg"></p><p>ç»“åˆæ›´æ–°é—¨ç¡®å®šæœ€ç»ˆéšçŠ¶æ€,å¦‚æœè¾“å‡ºä¸º1,ä¸è¿›è¡Œæ›´æ–°,ä¿æŒä¹‹å‰çš„éšçŠ¶æ€,å¦‚æœæ˜¯0åˆ™å°†å€™é€‰éšçŠ¶æ€ä½œä¸ºæ–°çš„éšçŠ¶æ€.</p><script type="math/tex; mode=display">\mathbf{H}_t=\mathbf{Z}_t \odot \mathbf{H}_{t-1}+\left(1-\mathbf{Z}_t\right) \odot \tilde{\mathbf{H}}_t .</script><p><img data-src="https://zh-v2.d2l.ai/_images/gru-3.svg" alt="../_images/gru-3.svg"></p><blockquote><ul><li>é—¨æ§å¾ªç¯ç¥ç»ç½‘ç»œå¯ä»¥æ›´å¥½åœ°æ•è·æ—¶é—´æ­¥è·ç¦»å¾ˆé•¿çš„åºåˆ—ä¸Šçš„ä¾èµ–å…³ç³»ã€‚</li><li>é‡ç½®é—¨æœ‰åŠ©äºæ•è·åºåˆ—ä¸­çš„çŸ­æœŸä¾èµ–å…³ç³»ã€‚</li><li>æ›´æ–°é—¨æœ‰åŠ©äºæ•è·åºåˆ—ä¸­çš„é•¿æœŸä¾èµ–å…³ç³»ã€‚</li><li>é‡ç½®é—¨æ‰“å¼€æ—¶ï¼Œé—¨æ§å¾ªç¯å•å…ƒåŒ…å«åŸºæœ¬å¾ªç¯ç¥ç»ç½‘ç»œï¼›æ›´æ–°é—¨æ‰“å¼€æ—¶ï¼Œé—¨æ§å¾ªç¯å•å…ƒå¯ä»¥è·³è¿‡å­åºåˆ—ã€‚</li></ul></blockquote><h3 id="LSTM"><a href="#LSTM" class="headerlink" title="LSTM"></a>LSTM</h3><p>ä»æ—¶é—´ä¸Šæ¥è¯´,LSTMæ¯”GRUç»“æ„è¦æ—©,ç»“æ„ä¹Ÿæ›´å¤æ‚.</p><blockquote><ul><li>å¯ä»¥è¯´ï¼Œé•¿çŸ­æœŸè®°å¿†ç½‘ç»œçš„è®¾è®¡çµæ„Ÿæ¥è‡ªäºè®¡ç®—æœºçš„é€»è¾‘é—¨ã€‚ é•¿çŸ­æœŸè®°å¿†ç½‘ç»œå¼•å…¥äº†<em>è®°å¿†å…ƒ</em>ï¼ˆmemory cellï¼‰ï¼Œæˆ–ç®€ç§°ä¸º<em>å•å…ƒ</em>ï¼ˆcellï¼‰ã€‚ æœ‰äº›æ–‡çŒ®è®¤ä¸ºè®°å¿†å…ƒæ˜¯éšçŠ¶æ€çš„ä¸€ç§ç‰¹æ®Šç±»å‹ï¼Œ å®ƒä»¬ä¸éšçŠ¶æ€å…·æœ‰ç›¸åŒçš„å½¢çŠ¶ï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ç”¨äºè®°å½•é™„åŠ çš„ä¿¡æ¯ã€‚ ä¸ºäº†æ§åˆ¶è®°å¿†å…ƒï¼Œæˆ‘ä»¬éœ€è¦è®¸å¤šé—¨ã€‚ å…¶ä¸­ä¸€ä¸ªé—¨ç”¨æ¥ä»å•å…ƒä¸­è¾“å‡ºæ¡ç›®ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸º<em>è¾“å‡ºé—¨</em>ï¼ˆoutput gateï¼‰ã€‚ å¦å¤–ä¸€ä¸ªé—¨ç”¨æ¥å†³å®šä½•æ—¶å°†æ•°æ®è¯»å…¥å•å…ƒï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸º<em>è¾“å…¥é—¨</em>ï¼ˆinput gateï¼‰ã€‚ æˆ‘ä»¬è¿˜éœ€è¦ä¸€ç§æœºåˆ¶æ¥é‡ç½®å•å…ƒçš„å†…å®¹ï¼Œç”±<em>é—å¿˜é—¨</em>ï¼ˆforget gateï¼‰æ¥ç®¡ç†ï¼Œ è¿™ç§è®¾è®¡çš„åŠ¨æœºä¸é—¨æ§å¾ªç¯å•å…ƒç›¸åŒï¼Œ èƒ½å¤Ÿé€šè¿‡ä¸“ç”¨æœºåˆ¶å†³å®šä»€ä¹ˆæ—¶å€™è®°å¿†æˆ–å¿½ç•¥éšçŠ¶æ€ä¸­çš„è¾“å…¥ã€‚</li></ul></blockquote><p>å¼•å…¥è¾“å…¥é—¨,å¿˜è®°é—¨,è¾“å‡ºé—¨ç”¨äºæ§åˆ¶éšçŠ¶æ€.</p><script type="math/tex; mode=display">\begin{aligned}\mathbf{I}_t & =\sigma\left(\mathbf{X}_t \mathbf{W}_{x i}+\mathbf{H}_{t-1} \mathbf{W}_{h i}+\mathbf{b}_i\right), \\\mathbf{F}_t & =\sigma\left(\mathbf{X}_t \mathbf{W}_{x f}+\mathbf{H}_{t-1} \mathbf{W}_{h f}+\mathbf{b}_f\right), \\\mathbf{O}_t & =\sigma\left(\mathbf{X}_t \mathbf{W}_{x o}+\mathbf{H}_{t-1} \mathbf{W}_{h o}+\mathbf{b}_o\right),\end{aligned}</script><p>åŒæ—¶è¿˜æœ‰å€™é€‰è®°å¿†å…ƒ,</p><script type="math/tex; mode=display">\tilde{\mathbf{C}}_t=\tanh \left(\mathbf{X}_t \mathbf{W}_{x c}+\mathbf{H}_{t-1} \mathbf{W}_{h c}+\mathbf{b}_c\right)</script><p><img data-src="https://zh-v2.d2l.ai/_images/lstm-1.svg" alt="../_images/lstm-1.svg"></p><p>åˆ©ç”¨å¿˜è®°é—¨å’Œè¾“å…¥é—¨æ§åˆ¶ä¸Šä¸€æ¬¡çš„è®°å¿†å…ƒå’Œå€™é€‰è®°å¿†å…ƒ,éšçŠ¶æ€çš„è®¡ç®—å°±æ˜¯æ ¹æ®è¾“å‡ºé—¨å’Œè®°å¿†å…ƒ.</p><script type="math/tex; mode=display">\mathbf{H}_t=\mathbf{O}_t \odot \tanh \left(\mathbf{C}_t\right)</script><p>åªè¦è¾“å‡ºé—¨æ¥è¿‘1ï¼Œå°±èƒ½å¤Ÿæœ‰æ•ˆåœ°å°†æ‰€æœ‰è®°å¿†ä¿¡æ¯ä¼ é€’ç»™é¢„æµ‹éƒ¨åˆ†ï¼Œè€Œå¯¹äºè¾“å‡ºé—¨æ¥è¿‘0ï¼Œæˆ‘ä»¬åªä¿ç•™è®°å¿†å…ƒå†…çš„æ‰€æœ‰ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦æ›´æ–°éšçŠ¶æ€ã€‚</p><p><img data-src="https://zh-v2.d2l.ai/_images/lstm-3.svg" alt="../_images/lstm-3.svg"></p><h3 id="æ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œ"><a href="#æ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œ" class="headerlink" title="æ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œ"></a>æ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œ</h3><p><img data-src="https://zh-v2.d2l.ai/_images/deep-rnn.svg" alt="../_images/deep-rnn.svg" style="zoom: 80%;" /></p><script type="math/tex; mode=display">\mathbf{H}_t^{(l)}=\phi_l\left(\mathbf{H}_t^{(l-1)} \mathbf{W}_{x h}^{(l)}+\mathbf{H}_{t-1}^{(l)} \mathbf{W}_{h h}^{(l)}+\mathbf{b}_h^{(l)}\right)</script><script type="math/tex; mode=display">\mathbf{H}_t^{(l)}=\phi_l\left(\mathbf{H}_t^{(l-1)} \mathbf{W}_{x h}^{(l)}+\mathbf{H}_{t-1}^{(l)} \mathbf{W}_{h h}^{(l)}+\mathbf{b}_h^{(l)}\right)</script><script type="math/tex; mode=display">\mathbf{O}_t=\mathbf{H}_t^{(L)} \mathbf{W}_{h q}+\mathbf{b}_q</script><p>ä¸å¤šå±‚æ„ŸçŸ¥æœºä¸€æ ·ï¼Œéšè—å±‚æ•°ç›®Lå’Œéšè—å•å…ƒæ•°ç›®â„éƒ½æ˜¯è¶…å‚æ•°ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬å¯ä»¥ç”±æˆ‘ä»¬è°ƒæ•´çš„ã€‚ å¦å¤–ï¼Œç”¨é—¨æ§å¾ªç¯å•å…ƒæˆ–é•¿çŸ­æœŸè®°å¿†ç½‘ç»œçš„éšçŠ¶æ€ æ¥ä»£æ›¿éšçŠ¶æ€è¿›è¡Œè®¡ç®—ï¼Œ å¯ä»¥å¾ˆå®¹æ˜“åœ°å¾—åˆ°æ·±åº¦é—¨æ§å¾ªç¯ç¥ç»ç½‘ç»œæˆ–æ·±åº¦é•¿çŸ­æœŸè®°å¿†ç¥ç»ç½‘ç»œã€‚</p><ul><li>åœ¨æ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼ŒéšçŠ¶æ€çš„ä¿¡æ¯è¢«ä¼ é€’åˆ°å½“å‰å±‚çš„ä¸‹ä¸€æ—¶é—´æ­¥å’Œä¸‹ä¸€å±‚çš„å½“å‰æ—¶é—´æ­¥ã€‚</li><li>æœ‰è®¸å¤šä¸åŒé£æ ¼çš„æ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œï¼Œ å¦‚é•¿çŸ­æœŸè®°å¿†ç½‘ç»œã€é—¨æ§å¾ªç¯å•å…ƒã€æˆ–ç»å…¸å¾ªç¯ç¥ç»ç½‘ç»œã€‚ è¿™äº›æ¨¡å‹åœ¨æ·±åº¦å­¦ä¹ æ¡†æ¶çš„é«˜çº§APIä¸­éƒ½æœ‰æ¶µç›–ã€‚</li><li>æ€»ä½“è€Œè¨€ï¼Œæ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œéœ€è¦å¤§é‡çš„è°ƒå‚ï¼ˆå¦‚å­¦ä¹ ç‡å’Œä¿®å‰ªï¼‰ æ¥ç¡®ä¿åˆé€‚çš„æ”¶æ•›ï¼Œæ¨¡å‹çš„åˆå§‹åŒ–ä¹Ÿéœ€è¦è°¨æ…ã€‚</li></ul><h3 id="åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ"><a href="#åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ" class="headerlink" title="åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ"></a>åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ</h3><p>å¤„åœ¨åºåˆ—ä¸­é—´çš„æ–‡å­—æ˜æ˜¾å¯ä»¥æ”¶åˆ°ä¸¤è¾¹çš„å½±å“.</p><p><img data-src="https://zh-v2.d2l.ai/_images/birnn.svg" alt="../_images/birnn.svg"></p><p>å…¶ä¸­â„æ˜¯éšè—å•å…ƒçš„æ•°ç›®ã€‚ å‰å‘å’Œåå‘éšçŠ¶æ€çš„æ›´æ–°å¦‚ä¸‹</p><script type="math/tex; mode=display">\begin{aligned}& \overrightarrow{\mathbf{H}}_t=\phi\left(\mathbf{X}_t \mathbf{W}_{x h}^{(f)}+\overrightarrow{\mathbf{H}}_{t-1} \mathbf{W}_{h h}^{(f)}+\mathbf{b}_h^{(f)}\right) \\& \overleftarrow{\mathbf{H}}_t=\phi\left(\mathbf{X}_t \mathbf{W}_{x h}^{(b)}+\overleftarrow{\mathbf{H}}_{t+1} \mathbf{W}_{h h}^{(b)}+\mathbf{b}_h^{(b)}\right)\end{aligned}</script><script type="math/tex; mode=display">\mathbf{O}_t=\mathbf{H}_t \mathbf{W}_{h q}+\mathbf{b}_q .</script><blockquote><p>åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œçš„ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯ï¼šä½¿ç”¨æ¥è‡ªåºåˆ—ä¸¤ç«¯çš„ä¿¡æ¯æ¥ä¼°è®¡è¾“å‡ºã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¥è‡ªè¿‡å»å’Œæœªæ¥çš„è§‚æµ‹ä¿¡æ¯æ¥é¢„æµ‹å½“å‰çš„è§‚æµ‹ã€‚ ä½†æ˜¯åœ¨å¯¹ä¸‹ä¸€ä¸ªè¯å…ƒè¿›è¡Œé¢„æµ‹çš„æƒ…å†µä¸­ï¼Œè¿™æ ·çš„æ¨¡å‹å¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€éœ€çš„ã€‚ å› ä¸ºåœ¨é¢„æµ‹ä¸‹ä¸€ä¸ªè¯å…ƒæ—¶ï¼Œæˆ‘ä»¬ç»ˆç©¶æ— æ³•çŸ¥é“ä¸‹ä¸€ä¸ªè¯å…ƒçš„ä¸‹æ–‡æ˜¯ä»€ä¹ˆï¼Œ æ‰€ä»¥å°†ä¸ä¼šå¾—åˆ°å¾ˆå¥½çš„ç²¾åº¦ã€‚ å…·ä½“åœ°è¯´ï¼Œåœ¨è®­ç»ƒæœŸé—´ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåˆ©ç”¨è¿‡å»å’Œæœªæ¥çš„æ•°æ®æ¥ä¼°è®¡ç°åœ¨ç©ºç¼ºçš„è¯ï¼› è€Œåœ¨æµ‹è¯•æœŸé—´ï¼Œæˆ‘ä»¬åªæœ‰è¿‡å»çš„æ•°æ®ï¼Œå› æ­¤ç²¾åº¦å°†ä¼šå¾ˆå·®ã€‚</p><p>å¦ä¸€ä¸ªä¸¥é‡é—®é¢˜æ˜¯ï¼ŒåŒå‘å¾ªç¯ç¥ç»ç½‘ç»œçš„è®¡ç®—é€Ÿåº¦éå¸¸æ…¢ã€‚ å…¶ä¸»è¦åŸå› æ˜¯ç½‘ç»œçš„å‰å‘ä¼ æ’­éœ€è¦åœ¨åŒå‘å±‚ä¸­è¿›è¡Œå‰å‘å’Œåå‘é€’å½’ï¼Œ å¹¶ä¸”ç½‘ç»œçš„åå‘ä¼ æ’­è¿˜ä¾èµ–äºå‰å‘ä¼ æ’­çš„ç»“æœã€‚ å› æ­¤ï¼Œæ¢¯åº¦æ±‚è§£å°†æœ‰ä¸€ä¸ªéå¸¸é•¿çš„é“¾</p></blockquote><p>åŒå‘å±‚çš„ä½¿ç”¨åœ¨å®è·µä¸­éå¸¸å°‘ï¼Œå¹¶ä¸”ä»…ä»…åº”ç”¨äºéƒ¨åˆ†åœºåˆã€‚ ä¾‹å¦‚ï¼Œ<strong>å¡«å……ç¼ºå¤±çš„å•è¯</strong>ã€<strong>è¯å…ƒæ³¨é‡Š</strong>ï¼ˆä¾‹å¦‚ï¼Œç”¨äºå‘½åå®ä½“è¯†åˆ«ï¼‰ ä»¥åŠä½œä¸ºåºåˆ—å¤„ç†æµæ°´çº¿ä¸­çš„ä¸€ä¸ªæ­¥éª¤<strong>å¯¹åºåˆ—è¿›è¡Œç¼–ç </strong></p><h4 id="æ•°æ®é›†ä¸€èˆ¬å¤„ç†æµç¨‹"><a href="#æ•°æ®é›†ä¸€èˆ¬å¤„ç†æµç¨‹" class="headerlink" title="æ•°æ®é›†ä¸€èˆ¬å¤„ç†æµç¨‹"></a>æ•°æ®é›†ä¸€èˆ¬å¤„ç†æµç¨‹</h4><p>å°†æ•°æ®è¿›è¡Œé¢„å¤„ç†(æ¯”å¦‚æ›¿æ¢ä¸é—´æ–­ç©ºæ ¼,å°å†™,å•è¯å’Œæ ‡ç‚¹ä¹‹é—´æ’å…¥ç©ºæ ¼)ã€è¯å…ƒåŒ–åå¾—åˆ°è¯å…ƒä¹‹å,å»ºç«‹è¯è¡¨.</p><p>ç”±äºæœºå™¨ç¿»è¯‘æ•°æ®é›†ç”±è¯­è¨€å¯¹ç»„æˆï¼Œ å› æ­¤æˆ‘ä»¬å¯ä»¥åˆ†åˆ«ä¸ºæºè¯­è¨€å’Œç›®æ ‡è¯­è¨€æ„å»ºä¸¤ä¸ªè¯è¡¨ã€‚ ä½¿ç”¨å•è¯çº§è¯å…ƒåŒ–æ—¶ï¼Œè¯è¡¨å¤§å°å°†æ˜æ˜¾å¤§äºä½¿ç”¨å­—ç¬¦çº§è¯å…ƒåŒ–æ—¶çš„è¯è¡¨å¤§å°ã€‚ ä¸ºäº†ç¼“è§£è¿™ä¸€é—®é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬å°†<strong>å‡ºç°æ¬¡æ•°å°‘äº2æ¬¡çš„ä½é¢‘ç‡è¯å…ƒ è§†ä¸ºç›¸åŒçš„æœªçŸ¥ï¼ˆâ€œ<unk>â€ï¼‰è¯å…ƒ</strong>ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æŒ‡å®šäº†é¢å¤–çš„ç‰¹å®šè¯å…ƒï¼Œ ä¾‹å¦‚åœ¨<strong>å°æ‰¹é‡æ—¶ç”¨äºå°†åºåˆ—å¡«å……åˆ°ç›¸åŒé•¿åº¦çš„å¡«å……è¯å…ƒï¼ˆâ€œ<pad>â€ï¼‰</strong>ï¼Œ ä»¥åŠ<strong>åºåˆ—çš„å¼€å§‹è¯å…ƒï¼ˆâ€œ<bos>â€ï¼‰å’Œç»“æŸè¯å…ƒï¼ˆâ€œ<eos>â€ï¼‰</strong>ã€‚ è¿™äº›ç‰¹æ®Šè¯å…ƒåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ä¸­æ¯”è¾ƒå¸¸è§.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">truncate_pad</span>(<span class="params">line, num_steps, padding_token</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;æˆªæ–­æˆ–å¡«å……æ–‡æœ¬åºåˆ—&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(line) &gt; num_steps:</span><br><span class="line">        <span class="keyword">return</span> line[:num_steps]  <span class="comment"># æˆªæ–­</span></span><br><span class="line">    <span class="keyword">return</span> line + [padding_token] * (num_steps - <span class="built_in">len</span>(line))  <span class="comment"># å¡«å……</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build_array_nmt</span>(<span class="params">lines, vocab, num_steps</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;å°†æœºå™¨ç¿»è¯‘çš„æ–‡æœ¬åºåˆ—è½¬æ¢æˆå°æ‰¹é‡&quot;&quot;&quot;</span></span><br><span class="line">    lines = [vocab[l] <span class="keyword">for</span> l <span class="keyword">in</span> lines]</span><br><span class="line">    lines = [l + [vocab[<span class="string">&#x27;&lt;eos&gt;&#x27;</span>]] <span class="keyword">for</span> l <span class="keyword">in</span> lines]</span><br><span class="line">    array = np.array([truncate_pad(</span><br><span class="line">        l, num_steps, vocab[<span class="string">&#x27;&lt;pad&gt;&#x27;</span>]) <span class="keyword">for</span> l <span class="keyword">in</span> lines])</span><br><span class="line">    valid_len = (array != vocab[<span class="string">&#x27;&lt;pad&gt;&#x27;</span>]).astype(np.int32).<span class="built_in">sum</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> array, valid_len</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>æœºå™¨ç¿»è¯‘æŒ‡çš„æ˜¯å°†æ–‡æœ¬åºåˆ—ä»ä¸€ç§è¯­è¨€è‡ªåŠ¨ç¿»è¯‘æˆå¦ä¸€ç§è¯­è¨€ã€‚</li><li>ä½¿ç”¨å•è¯çº§è¯å…ƒåŒ–æ—¶çš„è¯è¡¨å¤§å°ï¼Œå°†æ˜æ˜¾å¤§äºä½¿ç”¨å­—ç¬¦çº§è¯å…ƒåŒ–æ—¶çš„è¯è¡¨å¤§å°ã€‚ä¸ºäº†ç¼“è§£è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä½é¢‘è¯å…ƒè§†ä¸ºç›¸åŒçš„æœªçŸ¥è¯å…ƒã€‚</li><li>é€šè¿‡æˆªæ–­å’Œå¡«å……æ–‡æœ¬åºåˆ—ï¼Œå¯ä»¥ä¿è¯æ‰€æœ‰çš„æ–‡æœ¬åºåˆ—éƒ½å…·æœ‰ç›¸åŒçš„é•¿åº¦ï¼Œä»¥ä¾¿ä»¥å°æ‰¹é‡çš„æ–¹å¼åŠ è½½ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_data_nmt</span>(<span class="params">batch_size, num_steps, num_examples=<span class="number">600</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¿”å›ç¿»è¯‘æ•°æ®é›†çš„è¿­ä»£å™¨å’Œè¯è¡¨&quot;&quot;&quot;</span></span><br><span class="line">    text = preprocess_nmt(read_data_nmt())</span><br><span class="line">    source, target = tokenize_nmt(text, num_examples)</span><br><span class="line">    src_vocab = d2l.Vocab(source, min_freq=<span class="number">2</span>,</span><br><span class="line">                          reserved_tokens=[<span class="string">&#x27;&lt;pad&gt;&#x27;</span>, <span class="string">&#x27;&lt;bos&gt;&#x27;</span>, <span class="string">&#x27;&lt;eos&gt;&#x27;</span>])</span><br><span class="line">    tgt_vocab = d2l.Vocab(target, min_freq=<span class="number">2</span>,</span><br><span class="line">                          reserved_tokens=[<span class="string">&#x27;&lt;pad&gt;&#x27;</span>, <span class="string">&#x27;&lt;bos&gt;&#x27;</span>, <span class="string">&#x27;&lt;eos&gt;&#x27;</span>])</span><br><span class="line">    src_array, src_valid_len = build_array_nmt(source, src_vocab, num_steps)</span><br><span class="line">    tgt_array, tgt_valid_len = build_array_nmt(target, tgt_vocab, num_steps)</span><br><span class="line">    data_arrays = (src_array, src_valid_len, tgt_array, tgt_valid_len)</span><br><span class="line">    data_iter = d2l.load_array(data_arrays, batch_size)</span><br><span class="line">    <span class="keyword">return</span> data_iter, src_vocab, tgt_vocab</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_data_nmt</span>(<span class="params">batch_size, num_steps, num_examples=<span class="number">600</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¿”å›ç¿»è¯‘æ•°æ®é›†çš„è¿­ä»£å™¨å’Œè¯è¡¨&quot;&quot;&quot;</span></span><br><span class="line">    text = preprocess_nmt(read_data_nmt())</span><br><span class="line">    source, target = tokenize_nmt(text, num_examples)</span><br><span class="line">    src_vocab = d2l.Vocab(source, min_freq=<span class="number">2</span>,</span><br><span class="line">                          reserved_tokens=[<span class="string">&#x27;&lt;pad&gt;&#x27;</span>, <span class="string">&#x27;&lt;bos&gt;&#x27;</span>, <span class="string">&#x27;&lt;eos&gt;&#x27;</span>])</span><br><span class="line">    tgt_vocab = d2l.Vocab(target, min_freq=<span class="number">2</span>,</span><br><span class="line">                          reserved_tokens=[<span class="string">&#x27;&lt;pad&gt;&#x27;</span>, <span class="string">&#x27;&lt;bos&gt;&#x27;</span>, <span class="string">&#x27;&lt;eos&gt;&#x27;</span>])</span><br><span class="line">    src_array, src_valid_len = build_array_nmt(source, src_vocab, num_steps)</span><br><span class="line">    tgt_array, tgt_valid_len = build_array_nmt(target, tgt_vocab, num_steps)</span><br><span class="line">    data_arrays = (src_array, src_valid_len, tgt_array, tgt_valid_len)</span><br><span class="line">    data_iter = d2l.load_array(data_arrays, batch_size)</span><br><span class="line">    <span class="keyword">return</span> data_iter, src_vocab, tgt_vocab</span><br></pre></td></tr></table></figure><h3 id="ç¼–ç å™¨-è§£ç å™¨æ¶æ„"><a href="#ç¼–ç å™¨-è§£ç å™¨æ¶æ„" class="headerlink" title="ç¼–ç å™¨-è§£ç å™¨æ¶æ„"></a>ç¼–ç å™¨-è§£ç å™¨æ¶æ„</h3><p><img data-src="https://zh-v2.d2l.ai/_images/encoder-decoder.svg" alt="../_images/encoder-decoder.svg"></p><p>å‰é¢å¤„ç†æœºå™¨ç¿»è¯‘æ—¶è¾“å…¥å’Œè¾“å‡ºé•¿åº¦éƒ½æ˜¯å›ºå®šçš„.</p><p>æœºå™¨ç¿»è¯‘æ˜¯åºåˆ—è½¬æ¢æ¨¡å‹çš„ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼Œ å…¶è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯é•¿åº¦å¯å˜çš„åºåˆ—ã€‚ ä¸ºäº†å¤„ç†è¿™ç§ç±»å‹çš„è¾“å…¥å’Œè¾“å‡ºï¼Œ æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªä¸»è¦ç»„ä»¶çš„æ¶æ„ï¼š ç¬¬ä¸€ä¸ªç»„ä»¶æ˜¯ä¸€ä¸ª<em>ç¼–ç å™¨</em>ï¼ˆencoderï¼‰ï¼š å®ƒæ¥å—ä¸€ä¸ªé•¿åº¦å¯å˜çš„åºåˆ—ä½œä¸ºè¾“å…¥ï¼Œ å¹¶å°†å…¶è½¬æ¢ä¸ºå…·æœ‰å›ºå®šå½¢çŠ¶çš„ç¼–ç çŠ¶æ€ã€‚ ç¬¬äºŒä¸ªç»„ä»¶æ˜¯<em>è§£ç å™¨</em>ï¼ˆdecoderï¼‰ï¼š å®ƒå°†å›ºå®šå½¢çŠ¶çš„ç¼–ç çŠ¶æ€æ˜ å°„åˆ°é•¿åº¦å¯å˜çš„åºåˆ—ã€‚ è¿™è¢«ç§°ä¸º<em>ç¼–ç å™¨-è§£ç å™¨</em>ï¼ˆencoder-decoderï¼‰æ¶æ„.</p><ul><li>â€œç¼–ç å™¨ï¼è§£ç å™¨â€æ¶æ„å¯ä»¥å°†é•¿åº¦å¯å˜çš„åºåˆ—ä½œä¸ºè¾“å…¥å’Œè¾“å‡ºï¼Œå› æ­¤é€‚ç”¨äºæœºå™¨ç¿»è¯‘ç­‰åºåˆ—è½¬æ¢é—®é¢˜ã€‚</li><li>ç¼–ç å™¨å°†é•¿åº¦å¯å˜çš„åºåˆ—ä½œä¸ºè¾“å…¥ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå…·æœ‰å›ºå®šå½¢çŠ¶çš„ç¼–ç çŠ¶æ€ã€‚</li><li>è§£ç å™¨å°†å…·æœ‰å›ºå®šå½¢çŠ¶çš„ç¼–ç çŠ¶æ€æ˜ å°„ä¸ºé•¿åº¦å¯å˜çš„åºåˆ—ã€‚</li></ul><h3 id="seq2seq"><a href="#seq2seq" class="headerlink" title="seq2seq"></a>seq2seq</h3><blockquote><p>éµå¾ªç¼–ç å™¨ï¼è§£ç å™¨æ¶æ„çš„è®¾è®¡åŸåˆ™ï¼Œ å¾ªç¯ç¥ç»ç½‘ç»œç¼–ç å™¨ä½¿ç”¨é•¿åº¦å¯å˜çš„åºåˆ—ä½œä¸ºè¾“å…¥ï¼Œ å°†å…¶è½¬æ¢ä¸ºå›ºå®šå½¢çŠ¶çš„éšçŠ¶æ€ã€‚ æ¢è¨€ä¹‹ï¼Œè¾“å…¥åºåˆ—çš„ä¿¡æ¯è¢«<em>ç¼–ç </em>åˆ°å¾ªç¯ç¥ç»ç½‘ç»œç¼–ç å™¨çš„éšçŠ¶æ€ä¸­ã€‚ ä¸ºäº†è¿ç»­ç”Ÿæˆè¾“å‡ºåºåˆ—çš„è¯å…ƒï¼Œ ç‹¬ç«‹çš„å¾ªç¯ç¥ç»ç½‘ç»œè§£ç å™¨æ˜¯åŸºäºè¾“å…¥åºåˆ—çš„ç¼–ç ä¿¡æ¯ å’Œè¾“å‡ºåºåˆ—å·²ç»çœ‹è§çš„æˆ–è€…ç”Ÿæˆçš„è¯å…ƒæ¥é¢„æµ‹ä¸‹ä¸€ä¸ªè¯å…ƒ</p></blockquote><p><img data-src="https://zh-v2.d2l.ai/_images/seq2seq.svg" alt="../_images/seq2seq.svg"></p><h4 id="ç¼–ç å™¨"><a href="#ç¼–ç å™¨" class="headerlink" title="ç¼–ç å™¨"></a>ç¼–ç å™¨</h4><script type="math/tex; mode=display">\mathbf{h}_{t}=f(\mathbf{x}_{t},\mathbf{h}_{t-1}).</script><p>éšçŠ¶æ€æ ¹æ®æœ¬æ¬¡è¾“å…¥å’Œä¸Šæ¬¡çš„éšçŠ¶æ€è¾“å‡º.</p><script type="math/tex; mode=display">\mathbf{c}=q(\mathbf{h}_1,\ldots,\mathbf{h}_T).</script><p>å¸¸å¸¸ä¼šä½¿ç”¨ä¸€ä¸ªåµŒå…¥å±‚,è·å¾—è¾“å…¥åºåˆ—ä¸­æ¯ä¸ªè¯å…ƒçš„ç‰¹å¾å‘é‡ã€‚ åµŒå…¥å±‚çš„æƒé‡æ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œ å…¶è¡Œæ•°ç­‰äºè¾“å…¥è¯è¡¨çš„å¤§å°ï¼ˆ<code>vocab_size</code>ï¼‰ï¼Œ å…¶åˆ—æ•°ç­‰äºç‰¹å¾å‘é‡çš„ç»´åº¦ï¼ˆ<code>embed_size</code>ï¼‰ã€‚ å¯¹äºä»»æ„è¾“å…¥è¯å…ƒçš„ç´¢å¼•iï¼Œ åµŒå…¥å±‚è·å–æƒé‡çŸ©é˜µçš„ç¬¬iè¡Œï¼ˆä»0å¼€å§‹ï¼‰ä»¥è¿”å›å…¶ç‰¹å¾å‘é‡</p><h4 id="è§£ç å™¨"><a href="#è§£ç å™¨" class="headerlink" title="è§£ç å™¨"></a>è§£ç å™¨</h4><script type="math/tex; mode=display">\mathbf{s}_{t^{\prime}}=g(y_{t^{\prime}-1},\mathbf{c},\mathbf{s}_{t^{\prime}-1}).</script><p>åœ¨è·å¾—è§£ç å™¨çš„éšçŠ¶æ€ä¹‹åï¼Œ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¾“å‡ºå±‚å’Œsoftmaxæ“ä½œ æ¥è®¡ç®—åœ¨æ—¶é—´æ­¥tâ€²æ—¶è¾“å‡ºy~t~â€²çš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ</p><p>æŸå¤±å‡½æ•°ä½¿ç”¨äº¤å‰ç†µ,åœ¨æ¯ä¸ªæ—¶é—´æ­¥ï¼Œè§£ç å™¨é¢„æµ‹äº†è¾“å‡ºè¯å…ƒçš„æ¦‚ç‡åˆ†å¸ƒã€‚ ç±»ä¼¼äºè¯­è¨€æ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨softmaxæ¥è·å¾—åˆ†å¸ƒï¼Œ å¹¶é€šè¿‡è®¡ç®—äº¤å‰ç†µæŸå¤±å‡½æ•°æ¥è¿›è¡Œä¼˜åŒ–,æ­¤å¤–åº”è¯¥å°†å¡«å……è¯å…ƒçš„é¢„æµ‹æ’é™¤åœ¨æŸå¤±å‡½æ•°çš„è®¡ç®—ä¹‹å¤–å±è”½ä¸ç›¸å…³é¡¹.</p><h4 id="è®­ç»ƒä¸é¢„æµ‹"><a href="#è®­ç»ƒä¸é¢„æµ‹" class="headerlink" title="è®­ç»ƒä¸é¢„æµ‹"></a>è®­ç»ƒä¸é¢„æµ‹</h4><p>è®­ç»ƒæ—¶,ç‰¹å®šçš„åºåˆ—å¼€å§‹è¯å…ƒï¼ˆâ€œ<bos>â€ï¼‰å’Œ åŸå§‹çš„è¾“å‡ºåºåˆ—ï¼ˆä¸åŒ…æ‹¬åºåˆ—ç»“æŸè¯å…ƒâ€œ<eos>â€ï¼‰ æ‹¼æ¥åœ¨ä¸€èµ·ä½œä¸ºè§£ç å™¨çš„è¾“å…¥ã€‚ è¿™è¢«ç§°ä¸º<em>å¼ºåˆ¶æ•™å­¦</em>ï¼ˆteacher forcingï¼‰ï¼Œ å› ä¸ºåŸå§‹çš„è¾“å‡ºåºåˆ—ï¼ˆè¯å…ƒçš„æ ‡ç­¾ï¼‰è¢«é€å…¥è§£ç å™¨ã€‚ æˆ–è€…ï¼Œå°†æ¥è‡ªä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„<em>é¢„æµ‹</em>å¾—åˆ°çš„è¯å…ƒä½œä¸ºè§£ç å™¨çš„å½“å‰è¾“å…¥.</p><p>é¢„æµ‹æ—¶,ä¸ºäº†é‡‡ç”¨ä¸€ä¸ªæ¥ç€ä¸€ä¸ªè¯å…ƒçš„æ–¹å¼é¢„æµ‹è¾“å‡ºåºåˆ—ï¼Œ æ¯ä¸ªè§£ç å™¨å½“å‰æ—¶é—´æ­¥çš„è¾“å…¥éƒ½å°†æ¥è‡ªäºå‰ä¸€æ—¶é—´æ­¥çš„é¢„æµ‹è¯å…ƒã€‚ ä¸è®­ç»ƒç±»ä¼¼ï¼Œåºåˆ—å¼€å§‹è¯å…ƒï¼ˆâ€œ<bos>â€ï¼‰ åœ¨åˆå§‹æ—¶é—´æ­¥è¢«è¾“å…¥åˆ°è§£ç å™¨ä¸­.</p><p><img data-src="https://zh-v2.d2l.ai/_images/seq2seq-predict.svg" alt="../_images/seq2seq-predict.svg"></p><h3 id="æ³¨æ„åŠ›æœºåˆ¶"><a href="#æ³¨æ„åŠ›æœºåˆ¶" class="headerlink" title="æ³¨æ„åŠ›æœºåˆ¶"></a>æ³¨æ„åŠ›æœºåˆ¶</h3><p><img data-src="https://zh-v2.d2l.ai/_images/qkv.svg" alt="../_images/qkv.svg"></p><p>å°†æ³¨æ„åŠ›ç®€å•åœ°åˆ†ä¸ºè‡ªä¸»æ€§å’Œéè‡ªä¸»æ€§,åˆ©ç”¨è¿™ä¸¤ç§æ³¨æ„åŠ›æç¤º,ç”¨ç¥ç»ç½‘ç»œæ¥è®¾è®¡æ³¨æ„åŠ›æœºåˆ¶çš„æ¡†æ¶.</p><p>â€œæ˜¯å¦åŒ…å«è‡ªä¸»æ€§æç¤ºâ€å°†æ³¨æ„åŠ›æœºåˆ¶ä¸å…¨è¿æ¥å±‚æˆ–æ±‡èšå±‚åŒºåˆ«å¼€æ¥ã€‚ åœ¨æ³¨æ„åŠ›æœºåˆ¶çš„èƒŒæ™¯ä¸‹ï¼Œè‡ªä¸»æ€§æç¤ºè¢«ç§°ä¸º<em>æŸ¥è¯¢</em>ï¼ˆqueryï¼‰ã€‚ ç»™å®šä»»ä½•æŸ¥è¯¢ï¼Œæ³¨æ„åŠ›æœºåˆ¶é€šè¿‡<em>æ³¨æ„åŠ›æ±‡èš</em>ï¼ˆattention poolingï¼‰ å°†é€‰æ‹©å¼•å¯¼è‡³<em>æ„Ÿå®˜è¾“å…¥</em>ï¼ˆsensory inputsï¼Œä¾‹å¦‚ä¸­é—´ç‰¹å¾è¡¨ç¤ºï¼‰ã€‚ åœ¨æ³¨æ„åŠ›æœºåˆ¶ä¸­ï¼Œè¿™äº›æ„Ÿå®˜è¾“å…¥è¢«ç§°ä¸º<em>å€¼</em>ï¼ˆvalueï¼‰ã€‚ æ›´é€šä¿—çš„è§£é‡Šï¼Œæ¯ä¸ªå€¼éƒ½ä¸ä¸€ä¸ª<em>é”®</em>ï¼ˆkeyï¼‰é…å¯¹ï¼Œ è¿™å¯ä»¥æƒ³è±¡ä¸ºæ„Ÿå®˜è¾“å…¥çš„éè‡ªä¸»æç¤ºã€‚ </p><ul><li>äººç±»çš„æ³¨æ„åŠ›æ˜¯æœ‰é™çš„ã€æœ‰ä»·å€¼å’Œç¨€ç¼ºçš„èµ„æºã€‚</li><li>å—è¯•è€…ä½¿ç”¨éè‡ªä¸»æ€§å’Œè‡ªä¸»æ€§æç¤ºæœ‰é€‰æ‹©æ€§åœ°å¼•å¯¼æ³¨æ„åŠ›ã€‚å‰è€…åŸºäºçªå‡ºæ€§ï¼Œåè€…åˆ™ä¾èµ–äºæ„è¯†ã€‚</li><li>æ³¨æ„åŠ›æœºåˆ¶ä¸å…¨è¿æ¥å±‚æˆ–è€…æ±‡èšå±‚çš„åŒºåˆ«æºäºå¢åŠ çš„è‡ªä¸»æç¤ºã€‚</li><li>ç”±äºåŒ…å«äº†è‡ªä¸»æ€§æç¤ºï¼Œæ³¨æ„åŠ›æœºåˆ¶ä¸å…¨è¿æ¥çš„å±‚æˆ–æ±‡èšå±‚ä¸åŒã€‚</li><li>æ³¨æ„åŠ›æœºåˆ¶é€šè¿‡æ³¨æ„åŠ›æ±‡èšä½¿é€‰æ‹©åå‘äºå€¼ï¼ˆæ„Ÿå®˜è¾“å…¥ï¼‰ï¼Œå…¶ä¸­åŒ…å«æŸ¥è¯¢ï¼ˆè‡ªä¸»æ€§æç¤ºï¼‰å’Œé”®ï¼ˆéè‡ªä¸»æ€§æç¤ºï¼‰ã€‚é”®å’Œå€¼æ˜¯æˆå¯¹çš„ã€‚</li><li>å¯è§†åŒ–æŸ¥è¯¢å’Œé”®ä¹‹é—´çš„æ³¨æ„åŠ›æƒé‡æ˜¯å¯è¡Œçš„ã€‚</li></ul><p><img data-src="https://zh-v2.d2l.ai/_images/attention-output.svg" alt="../_images/attention-output.svg"></p><p>é«˜æ–¯æ ¸æŒ‡æ•°éƒ¨åˆ†å¯ä»¥è§†ä¸º<em>æ³¨æ„åŠ›è¯„åˆ†å‡½æ•°</em>ï¼ˆattention scoring functionï¼‰ï¼Œ ç®€ç§°<em>è¯„åˆ†å‡½æ•°</em>ï¼ˆscoring functionï¼‰ï¼Œ ç„¶åæŠŠè¿™ä¸ªå‡½æ•°çš„è¾“å‡ºç»“æœè¾“å…¥åˆ°softmaxå‡½æ•°ä¸­è¿›è¡Œè¿ç®—ã€‚ é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œå°†å¾—åˆ°ä¸é”®å¯¹åº”çš„å€¼çš„æ¦‚ç‡åˆ†å¸ƒï¼ˆå³æ³¨æ„åŠ›æƒé‡ï¼‰ã€‚ æœ€åï¼Œæ³¨æ„åŠ›æ±‡èšçš„è¾“å‡ºå°±æ˜¯åŸºäºè¿™äº›æ³¨æ„åŠ›æƒé‡çš„å€¼çš„åŠ æƒå’Œ</p><script type="math/tex; mode=display">f(\mathbf{q},(\mathbf{k}_1,\mathbf{v}_1),\ldots,(\mathbf{k}_m,\mathbf{v}_m))=\sum_{i=1}^m\alpha(\mathbf{q},\mathbf{k}_i)\mathbf{v}_i\in\mathbb{R}^v,</script><script type="math/tex; mode=display">\alpha(\mathbf{q},\mathbf{k}_i)=\mathrm{softmax}(a(\mathbf{q},\mathbf{k}_i))=\frac{\exp(a(\mathbf{q},\mathbf{k}_i))}{\sum_{j=1}^m\exp(a(\mathbf{q},\mathbf{k}_j))}\in\mathbb{R}.</script><p>æ³¨æ„åŠ›æœºåˆ¶æ¶‰åŠåˆ°q,k,våˆ†åˆ«ä»£è¡¨æŸ¥è¯¢,é”®,å€¼. è®¡ç®—æ³¨æ„åŠ›è¯„åˆ†æœ‰å¤šç§æ–¹æ³•,å¸¸ç”¨çš„æœ‰åŠ æ€§æ³¨æ„åŠ›å’Œç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›.</p><script type="math/tex; mode=display">a(\mathbf{q}, \mathbf{k})=\mathbf{w}_v^{\top} \tanh \left(\mathbf{W}_q \mathbf{q}+\mathbf{W}_k \mathbf{k}\right) \in \mathbb{R}</script><script type="math/tex; mode=display">\operatorname{softmax}\left(\frac{\mathbf{Q}\mathbf{K}^\top}{\sqrt d}\right)\mathbf{V}\in\mathbb{R}^{n\times v}.</script><p>æœ‰äº†è¯„åˆ†å‡½æ•°å,ç»§ç»­è€ƒè™‘æ³¨æ„åŠ›æ¨¡å‹é—®é¢˜.å¾ªç¯ç¥ç»ç½‘ç»œç¼–ç å™¨å°†é•¿åº¦å¯å˜çš„åºåˆ—è½¬æ¢ä¸ºå›ºå®šå½¢çŠ¶çš„ä¸Šä¸‹æ–‡å˜é‡ï¼Œ ç„¶åå¾ªç¯ç¥ç»ç½‘ç»œè§£ç å™¨<strong>æ ¹æ®ç”Ÿæˆçš„è¯å…ƒå’Œä¸Šä¸‹æ–‡å˜é‡</strong> æŒ‰è¯å…ƒç”Ÿæˆè¾“å‡ºï¼ˆç›®æ ‡ï¼‰åºåˆ—è¯å…ƒã€‚</p><blockquote><p>å³ä½¿å¹¶éæ‰€æœ‰è¾“å…¥ï¼ˆæºï¼‰è¯å…ƒéƒ½å¯¹è§£ç æŸä¸ªè¯å…ƒéƒ½æœ‰ç”¨ï¼Œ åœ¨æ¯ä¸ªè§£ç æ­¥éª¤ä¸­ä»ä½¿ç”¨ç¼–ç <em>ç›¸åŒ</em>çš„ä¸Šä¸‹æ–‡å˜é‡ã€‚ æœ‰ä»€ä¹ˆæ–¹æ³•èƒ½æ”¹å˜ä¸Šä¸‹æ–‡å˜é‡å‘¢</p></blockquote><h4 id="Bahdanauæ³¨æ„åŠ›"><a href="#Bahdanauæ³¨æ„åŠ›" class="headerlink" title="Bahdanauæ³¨æ„åŠ›"></a>Bahdanauæ³¨æ„åŠ›</h4><p>åœ¨é¢„æµ‹è¯å…ƒæ—¶ï¼Œå¦‚æœä¸æ˜¯æ‰€æœ‰è¾“å…¥è¯å…ƒéƒ½ç›¸å…³ï¼Œæ¨¡å‹å°†ä»…å¯¹é½ï¼ˆæˆ–å‚ä¸ï¼‰è¾“å…¥åºåˆ—ä¸­ä¸å½“å‰é¢„æµ‹ç›¸å…³çš„éƒ¨åˆ†ã€‚è¿™æ˜¯é€šè¿‡<strong>å°†ä¸Šä¸‹æ–‡å˜é‡è§†ä¸ºæ³¨æ„åŠ›é›†ä¸­çš„è¾“å‡º</strong>æ¥å®ç°çš„.</p><p>å…¶ä¸­è§£ç æ—¶é—´æ­¥t~â€™~éƒ½ä¼šè¢«c~tâ€™~æ›¿æ¢,æ˜¯ä½œä¸ºæŸ¥è¯¢(query)çš„ä¸Šä¸€æ­¥è§£ç å™¨éšçŠ¶æ€å’Œä¸ç¼–ç å™¨éšçŠ¶æ€</p><script type="math/tex; mode=display">\mathbf{c}_{t^{\prime}}=\sum_{t=1}^T\alpha(\mathbf{s}_{t^{\prime}-1},\mathbf{h}_t)\mathbf{h}_t,</script><p>æ—¶é—´æ­¥tâ€²âˆ’1æ—¶çš„è§£ç å™¨éšçŠ¶æ€s~t~â€²âˆ’1æ˜¯æŸ¥è¯¢ï¼Œ ç¼–ç å™¨éšçŠ¶æ€â„~t~æ—¢æ˜¯é”®ï¼Œä¹Ÿæ˜¯å€¼. æ³¨æ„åŠ›æƒé‡å¯ä»¥ä½¿ç”¨åŠ æ€§æ³¨æ„åŠ›æ‰“åˆ†.</p><p><img data-src="https://zh-v2.d2l.ai/_images/seq2seq-attention-details.svg" alt="../_images/seq2seq-attention-details.svg"></p><p>å®šä¹‰Bahdanauæ³¨æ„åŠ›,åªéœ€è¦æ”¹å˜è§£ç å™¨å°±è¡Œäº†.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Seq2SeqAttentionDecoder</span>(<span class="params">AttentionDecoder</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, vocab_size, embed_size, num_hiddens, num_layers,</span></span></span><br><span class="line"><span class="params"><span class="function">                 dropout=<span class="number">0</span>, **kwargs</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Seq2SeqAttentionDecoder, self).__init__(**kwargs)</span><br><span class="line">        self.attention = d2l.AdditiveAttention(</span><br><span class="line">            num_hiddens, num_hiddens, num_hiddens, dropout)</span><br><span class="line">        self.embedding = nn.Embedding(vocab_size, embed_size)</span><br><span class="line">        self.rnn = nn.GRU(</span><br><span class="line">            embed_size + num_hiddens, num_hiddens, num_layers,</span><br><span class="line">            dropout=dropout)</span><br><span class="line">        self.dense = nn.Linear(num_hiddens, vocab_size)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">init_state</span>(<span class="params">self, enc_outputs, enc_valid_lens, *args</span>):</span></span><br><span class="line">        <span class="comment"># outputsçš„å½¢çŠ¶ä¸º(batch_sizeï¼Œnum_stepsï¼Œnum_hiddens).</span></span><br><span class="line">        <span class="comment"># hidden_stateçš„å½¢çŠ¶ä¸º(num_layersï¼Œbatch_sizeï¼Œnum_hiddens)</span></span><br><span class="line">        outputs, hidden_state = enc_outputs</span><br><span class="line">        <span class="keyword">return</span> (outputs.permute(<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>), hidden_state, enc_valid_lens)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, X, state</span>):</span></span><br><span class="line">        <span class="comment"># enc_outputsçš„å½¢çŠ¶ä¸º(batch_size,num_steps,num_hiddens).</span></span><br><span class="line">        <span class="comment"># hidden_stateçš„å½¢çŠ¶ä¸º(num_layers,batch_size,</span></span><br><span class="line">        <span class="comment"># num_hiddens)</span></span><br><span class="line">        enc_outputs, hidden_state, enc_valid_lens = state</span><br><span class="line">        <span class="comment"># è¾“å‡ºXçš„å½¢çŠ¶ä¸º(num_steps,batch_size,embed_size)</span></span><br><span class="line">        X = self.embedding(X).permute(<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">        outputs, self._attention_weights = [], []</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> X:</span><br><span class="line">            <span class="comment"># queryçš„å½¢çŠ¶ä¸º(batch_size,1,num_hiddens)</span></span><br><span class="line">            query = torch.unsqueeze(hidden_state[-<span class="number">1</span>], dim=<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># contextçš„å½¢çŠ¶ä¸º(batch_size,1,num_hiddens)</span></span><br><span class="line">            context = self.attention(</span><br><span class="line">                query, enc_outputs, enc_outputs, enc_valid_lens)</span><br><span class="line">            <span class="comment"># åœ¨ç‰¹å¾ç»´åº¦ä¸Šè¿ç»“</span></span><br><span class="line">            x = torch.cat((context, torch.unsqueeze(x, dim=<span class="number">1</span>)), dim=-<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># å°†xå˜å½¢ä¸º(1,batch_size,embed_size+num_hiddens)</span></span><br><span class="line">            out, hidden_state = self.rnn(x.permute(<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>), hidden_state)</span><br><span class="line">            outputs.append(out)</span><br><span class="line">            self._attention_weights.append(self.attention.attention_weights)</span><br><span class="line">        <span class="comment"># å…¨è¿æ¥å±‚å˜æ¢åï¼Œoutputsçš„å½¢çŠ¶ä¸º</span></span><br><span class="line">        <span class="comment"># (num_steps,batch_size,vocab_size)</span></span><br><span class="line">        outputs = self.dense(torch.cat(outputs, dim=<span class="number">0</span>))</span><br><span class="line">        <span class="keyword">return</span> outputs.permute(<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>), [enc_outputs, hidden_state,</span><br><span class="line">                                          enc_valid_lens]</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">attention_weights</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._attention_weights</span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œåˆå§‹åŒ–è§£ç å™¨çš„çŠ¶æ€ï¼Œéœ€è¦ä¸‹é¢çš„è¾“å…¥ï¼š</p><p><strong>ç¼–ç å™¨</strong>åœ¨æ‰€æœ‰æ—¶é—´æ­¥çš„<strong>æœ€ç»ˆå±‚éšçŠ¶æ€ï¼Œå°†ä½œä¸ºæ³¨æ„åŠ›çš„é”®å’Œå€¼</strong>ï¼›</p><p><strong>ä¸Šä¸€æ—¶é—´æ­¥çš„ç¼–ç å™¨å…¨å±‚éšçŠ¶æ€ï¼Œå°†ä½œä¸ºåˆå§‹åŒ–è§£ç å™¨çš„éšçŠ¶æ€</strong>ï¼›</p><p><strong>ç¼–ç å™¨æœ‰æ•ˆé•¿åº¦</strong>ï¼ˆæ’é™¤åœ¨æ³¨æ„åŠ›æ± ä¸­å¡«å……è¯å…ƒï¼‰ã€‚</p><p>ç»“åˆäº†æ³¨æ„åŠ›æœºåˆ¶ä¸ç¼–ç å™¨-è§£ç å™¨,ä½¿å¾—è§£ç å™¨ä¸­æ¯ä¸ªè§£ç æ—¶é—´æ­¥æ˜¯æ³¨æ„åŠ›æ¨¡å‹çš„è¾“å‡º,æŸ¥è¯¢qæ˜¯ä¸Šä¸€æ­¥çš„éšçŠ¶æ€,é”®å’Œå€¼éƒ½æ˜¯ç¼–ç å™¨çš„æœ€ç»ˆéšçŠ¶æ€.</p><h3 id="å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶"><a href="#å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶" class="headerlink" title="å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶"></a>å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</h3><blockquote><p>åœ¨å®è·µä¸­ï¼Œå½“ç»™å®šç›¸åŒçš„æŸ¥è¯¢ã€é”®å’Œå€¼çš„é›†åˆæ—¶ï¼Œ æˆ‘ä»¬å¸Œæœ›æ¨¡å‹å¯ä»¥åŸºäºç›¸åŒçš„æ³¨æ„åŠ›æœºåˆ¶å­¦ä¹ åˆ°ä¸åŒçš„è¡Œä¸ºï¼Œ ç„¶åå°†ä¸åŒçš„è¡Œä¸ºä½œä¸ºçŸ¥è¯†ç»„åˆèµ·æ¥ï¼Œ æ•è·åºåˆ—å†…å„ç§èŒƒå›´çš„ä¾èµ–å…³ç³» ï¼ˆä¾‹å¦‚ï¼ŒçŸ­è·ç¦»ä¾èµ–å’Œé•¿è·ç¦»ä¾èµ–å…³ç³»ï¼‰ã€‚ å› æ­¤ï¼Œå…è®¸æ³¨æ„åŠ›æœºåˆ¶ç»„åˆä½¿ç”¨æŸ¥è¯¢ã€é”®å’Œå€¼çš„ä¸åŒ <em>å­ç©ºé—´è¡¨ç¤º</em>ï¼ˆrepresentation subspacesï¼‰å¯èƒ½æ˜¯æœ‰ç›Šçš„</p></blockquote><p><img data-src="https://zh-v2.d2l.ai/_images/multi-head-attention.svg" alt="../_images/multi-head-attention.svg"></p><p>å¯ä»¥ç”¨ç‹¬ç«‹å­¦ä¹ å¾—åˆ°çš„â„ç»„ä¸åŒçš„<em>çº¿æ€§æŠ•å½±</em>ï¼ˆlinear projectionsï¼‰æ¥å˜æ¢æŸ¥è¯¢ã€é”®å’Œå€¼ã€‚ ç„¶åï¼Œè¿™â„ç»„å˜æ¢åçš„æŸ¥è¯¢ã€é”®å’Œå€¼å°†å¹¶è¡Œåœ°é€åˆ°æ³¨æ„åŠ›æ±‡èšä¸­ã€‚ æœ€åï¼Œå°†è¿™â„ä¸ªæ³¨æ„åŠ›æ±‡èšçš„è¾“å‡ºæ‹¼æ¥åœ¨ä¸€èµ·ï¼Œ å¹¶ä¸”é€šè¿‡å¦ä¸€ä¸ªå¯ä»¥å­¦ä¹ çš„çº¿æ€§æŠ•å½±è¿›è¡Œå˜æ¢ï¼Œ ä»¥äº§ç”Ÿæœ€ç»ˆè¾“å‡ºã€‚</p><p>å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶,å¯¹äºhä¸ªæ³¨æ„åŠ›æ±‡èšè¾“å‡º,æ¯ä¸€ä¸ªæ³¨æ„åŠ›æ±‡èšéƒ½è¢«ç§°ä½œä¸€ä¸ªâ€å¤´â€.</p><script type="math/tex; mode=display">\mathbf{h}_i=f(\mathbf{W}_i^{(q)}\mathbf{q},\mathbf{W}_i^{(k)}\mathbf{k},\mathbf{W}_i^{(v)}\mathbf{v})\in\mathbb{R}^{p_v},</script><script type="math/tex; mode=display">\mathbf{W}_o\begin{bmatrix}\mathbf{h}_1\\\vdots\\\mathbf{h}_h\end{bmatrix}\in\mathbb{R}^{p_o}.</script><p>å…¶ä¸­çš„Wå‡æ˜¯å¯å­¦ä¹ çš„å‚æ•°,fæ˜¯æ³¨æ„åŠ›æ±‡èšçš„å‡½æ•°.</p><ul><li>å¤šå¤´æ³¨æ„åŠ›èåˆäº†æ¥è‡ªäºå¤šä¸ªæ³¨æ„åŠ›æ±‡èšçš„ä¸åŒçŸ¥è¯†ï¼Œè¿™äº›çŸ¥è¯†çš„ä¸åŒæ¥æºäºç›¸åŒçš„æŸ¥è¯¢ã€é”®å’Œå€¼çš„ä¸åŒçš„å­ç©ºé—´è¡¨ç¤ºã€‚</li><li>åŸºäºé€‚å½“çš„å¼ é‡æ“ä½œï¼Œå¯ä»¥å®ç°å¤šå¤´æ³¨æ„åŠ›çš„å¹¶è¡Œè®¡ç®—ã€‚</li></ul><h3 id="è‡ªæ³¨æ„åŠ›å’Œä½ç½®ç¼–ç "><a href="#è‡ªæ³¨æ„åŠ›å’Œä½ç½®ç¼–ç " class="headerlink" title="è‡ªæ³¨æ„åŠ›å’Œä½ç½®ç¼–ç "></a>è‡ªæ³¨æ„åŠ›å’Œä½ç½®ç¼–ç </h3><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ·±åº¦å­¦ä¹ çŸ¥è¯†ç¬¬äºŒéƒ¨åˆ†&lt;/p&gt;</summary>
    
    
    
    
    <category term="deepLearning" scheme="https://www.sekyoro.top/tags/deepLearning/"/>
    
  </entry>
  
  <entry>
    <title>GANæ·±å…¥å­¦ä¹ </title>
    <link href="https://www.sekyoro.top/2023/08/11/GAN%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0/"/>
    <id>https://www.sekyoro.top/2023/08/11/GAN%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0/</id>
    <published>2023-08-11T10:08:06.000Z</published>
    <updated>2023-09-19T09:56:55.249Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>æ·±å…¥GANå­¦ä¹ <br><span id="more"></span></p><p><img data-src="https://github.com/microsoft/AI-For-Beginners/raw/main/lessons/4-ComputerVision/10-GANs/images/gan_architecture.png" alt="img"></p><p>æ³¨æ„,å®éªŒå¤ç°æ—¶æœ€å¥½è®¾ç½®éšæœºç§å­å›ºå®š<a href="https://pytorch.org/docs/stable/notes/randomness.html">Reproducibility â€” PyTorch 2.0 documentation</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># seed setting</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">same_seeds</span>(<span class="params">seed</span>):</span></span><br><span class="line">    <span class="comment"># Python built-in random module</span></span><br><span class="line">    random.seed(seed)</span><br><span class="line">    <span class="comment"># Numpy</span></span><br><span class="line">    np.random.seed(seed)</span><br><span class="line">    <span class="comment"># Torch</span></span><br><span class="line">    torch.manual_seed(seed)</span><br><span class="line">    <span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">        torch.cuda.manual_seed(seed)</span><br><span class="line">        torch.cuda.manual_seed_all(seed)</span><br><span class="line">    torch.backends.cudnn.benchmark = <span class="literal">False</span></span><br><span class="line">    torch.backends.cudnn.deterministic = <span class="literal">True</span></span><br><span class="line">same_seeds(<span class="number">2023</span>)</span><br></pre></td></tr></table></figure><h3 id="GAN"><a href="#GAN" class="headerlink" title="GAN"></a>GAN</h3><p>æ ‡é¢˜<strong>Generative Adversarial Nets</strong> 2014å¹´</p><p><strong>æ‘˜è¦</strong></p><p>We propose a new framework for estimating generative models via an adversarial process, in which we simultaneously train two models: a generative model G that captures the data distribution, and a discriminative model D that estimates the probability that a sample came from the training data rather than G. The training procedure for G is to maximize the probability of D making a mistake. This framework corresponds to a minimax two-player game. In the space of arbitrary functions G and D, a unique solution exists, with G recovering the training data distribution and D equal to 1 2 everywhere. In the case where G and D are defined by multilayer perceptrons, the entire system can be trained with backpropagation. There is no need for any Markov chains or unrolled approximate inference networks during either training or generation of samples. Experiments demonstrate the potential of the framework through qualitative and quantitative evaluation of the generated samples</p><p><img data-src="https://pic4.zhimg.com/80/v2-044f8d58f378b088c9a85a8f19dae363_720w.webp" alt="img" style="zoom:67%;" /></p><p>ä¸»è¦è´¡çŒ®:æå‡ºGAN  å®šä¹‰Gå’ŒDä»¥åŠæŸå¤±å‡½æ•°.ç”±äºGANä¸­ä½¿ç”¨çš„æå°æå¤§ï¼ˆminmaxï¼‰ä¼˜åŒ–ï¼Œè®­ç»ƒå¯èƒ½éå¸¸ä¸ç¨³å®šã€‚</p><script type="math/tex; mode=display">\min_G\max_DV=E_{x\sim\text{p}_r}[\log D(x)]+E_{x\sim\text{p}_g}[\log(1-D(x))]</script><p>å­˜åœ¨é—®é¢˜ï¼šæ¢¯åº¦ä¸ç¨³å®š,æ¢¯åº¦æ¶ˆå¤±,<strong>æ¨¡å¼å´©æºƒ</strong>(ç‰¹åˆ«æ˜¯NS-GAN,ä½¿ç”¨äº†the - log D trick),ä¹Ÿå°±æ˜¯ç”Ÿæˆå™¨çš„æŸå¤±æ”¹ä¸º-logD(x)<a href="https://zhuanlan.zhihu.com/p/25071913">ä»¤äººæ‹æ¡ˆå«ç»çš„Wasserstein GAN - çŸ¥ä¹ (zhihu.com)</a></p><p>é¦–å…ˆæ±‚å¾—ç”Ÿæˆå™¨å›ºå®š,æœ€å¤§åŒ–Vçš„D</p><script type="math/tex; mode=display">\mathrm{P}_r(x)\log D(x)+P_g(x)\log[1-D(x)]</script><p>å¯¹D(x)æ±‚å¯¼,è®©å¯¼æ•°ä¸º0</p><script type="math/tex; mode=display">\begin{aligned}&\frac{\mathrm{P}_r(x)}{D(x)}-\frac{\mathrm{P}_g(x)}{1-D(x)}=0\\\\&\text{åŒ–ç®€ä¸Šå¼,å¾—æœ€ä¼˜çš„Dè¡¨è¾¾å¼ä¸º}.\\\\&D^*(x)=\frac{\mathrm{P}_r(x)}{\mathrm{P}_r(x)+\mathrm{P}_g(x)}\end{aligned}</script><p>å°†è¿™ä¸ªæœ€ä¼˜çš„Då¸¦å…¥ä¸€å¼€å§‹çš„å¼å­</p><script type="math/tex; mode=display">\begin{aligned}&\operatorname*{min}_{G}V=E_{x\sim\mathrm{p}_{r}}[\operatorname{log}D(x)]+E_{x\sim\mathrm{p}_{g}}[\operatorname{log}(1-D(x))] \\&\text{å°†æœ€å¤§åŒ–çš„Då³å¼}1\text{çš„}D^*(x)\text{ä»£å…¥å¼å¾—}: \\&\operatorname*{min}_{G}V=E_{x\sim\mathrm{p}_{r}}[\operatorname{log}(\frac{\mathrm{p}_{r}(x)}{\mathrm{p}_{r}(x)+\mathrm{p}_{g}(x)})]+E_{x\sim\mathrm{p}_{g}}[\operatorname{log}(\frac{\mathrm{p}_{g}(x)}{\mathrm{p}_{r}(x)+\mathrm{p}_{g}(x)})] \\&\text{å†åŒ–ç®€ä¸€æ­¥å¾—å¼:} \\&\min_GV=E_{x\sim\mathrm{p}_r}[\log(\frac{\mathrm{p}_r(x)}{\frac12(\mathrm{p}_r(x)+\mathrm{p}_g(x))})]+E_{x\sim\mathrm{p}_g}[\log(\frac{\mathrm{p}_g(x)}{\frac12(\mathrm{p}_r(x)+\mathrm{p}_g(x))}]-2\log2\end{aligned}</script><p>å°†JSæ•£åº¦å¸¦å…¥,æœ‰</p><script type="math/tex; mode=display">\min_GV=2JS(P_r||P_g)-2\log2</script><p>æ‰€ä»¥å½“åˆ¤åˆ«å™¨è¾¾åˆ°å›ºå®šGæƒ…å†µä¸‹æœ€ä¼˜æ—¶,å¦‚æœä¸¤ä¸ªåˆ†å¸ƒé‡å åˆ™ä¸ºJSåˆ™ä¸º0,å¦åˆ™JSä¸ºlog2.æ¢¯åº¦ä¸€ç›´ä¸º0,Gå¾—ä¸åˆ°æ›´æ–°,æ‰€ä»¥è¿™ç§åŸå§‹GANä¼šé¢ä¸´<strong>æ¢¯åº¦æ¶ˆå¤±é—®é¢˜</strong>,å¯¼è‡´è®­ç»ƒå›°éš¾.</p><blockquote><p>ä¸Šè¿°çš„æ¨å¯¼éƒ½æ˜¯å»ºç«‹åœ¨æœ€ä¼˜åˆ¤åˆ«å™¨çš„åŸºç¡€ä¸Šçš„ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬å®æ“è¿‡ç¨‹ä¸­å¾€å¾€ä¸€å¼€å§‹åˆ¤åˆ«å™¨æ€§èƒ½æ˜¯ä¸ç†æƒ³çš„ï¼Œæ‰€ä»¥ç”Ÿæˆå™¨è¿˜æ˜¯æœ‰æ¢¯åº¦æ›´æ–°çš„</p></blockquote><p>å¦‚æœä½¿ç”¨logD-trick,</p><script type="math/tex; mode=display">\begin{aligned}\mathbb{E}_{x\sim P_{g}}\left[-\log D^{*}(x)\right]& =KL(P_{g}||P_{r})-\mathbb{E}_{x\sim P_{g}}\log[1-D^{*}(x)]  \\&=KL(P_g||P_r)-2JS(P_r||P_g)+2\log2+\mathbb{E}_{x\sim P_r}[\log D^*(x)]\end{aligned}</script><p>æ‰€ä»¥æœ€åéœ€è¦æœ€å°åŒ–å‰é¢ä¸¤é¡¹,å› ä¸ºåé¢ä¸¤é¡¹ä¸Gæ— å…³. è¿™ä¸ªæœ€å°åŒ–ç›®æ ‡éœ€è¦åŒæ—¶æœ€å°åŒ–KLæ•£åº¦åˆè¦æœ€å¤§åŒ–JSæ•£åº¦,ç›´è§‚ä¸Šè’è°¬,æ•°å€¼ç»“æœä¸Š<strong>å¯¼è‡´æ¢¯åº¦ä¸ç¨³å®š</strong>,æ­¤å¤–ç¬¬ä¸€é¡¹çš„KLæ•£åº¦è¡¨ç¤º</p><script type="math/tex; mode=display">P_{g}(x)\log\frac{P_{g}(x)}{P_{r}(x)}</script><p>å½“P~g~(x)è¶‹è¿‘äº1,P~r~(x)è¶‹è¿‘äº0è¿™ç§æƒ…å†µä¸å½“P~g~(x)è¶‹è¿‘äº0,P~r~(x)è¶‹è¿‘äº1è¿™ç§æƒ…å†µå¯¹äºKLæ•£åº¦æƒ…å†µä¸ä¸€è‡´,ç”±äºè¦æœ€å°åŒ–KLæ•£åº¦,ä¼šå¯¼è‡´åè€…è¿™ç§æƒ…å†µ,ä¹Ÿå°±æ˜¯</p><p>è¿™ç§æƒ…å†µä¸‹,æ¢¯åº¦å¯èƒ½ä¸ä¼šæ¶ˆå¤±,ä½†ä¼šå­˜åœ¨æ¢¯åº¦ä¸ç¨³å®š,æ¨¡å¼å´©æºƒçš„é—®é¢˜.</p><p>ä»¥ä¸Šå†…å®¹éƒ¨åˆ†æ˜¯WGANä¸­çš„,ä»ç†è®ºä¸Šè§£é‡Šäº†GANè®­ç»ƒçš„ä¸€äº›é—®é¢˜.</p><h4 id="ä½¿ç”¨tensorboardè®°å½•æŸå¤±"><a href="#ä½¿ç”¨tensorboardè®°å½•æŸå¤±" class="headerlink" title="ä½¿ç”¨tensorboardè®°å½•æŸå¤±"></a>ä½¿ç”¨tensorboardè®°å½•æŸå¤±</h4><p>å¤§è‡´æµç¨‹æ˜¯é¦–å…ˆå°†æŸå¤±è®¡å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶,ç„¶åä½¿ç”¨tensorboardè¯»å–,ä¾¿èƒ½ä½¿ç”¨tensorboardæ‰“å¼€ä¸€ä¸ªç«¯å£,åœ¨ç½‘é¡µä¸ŠæŸ¥çœ‹ã€‚<a href="https://pytorch.org/docs/stable/tensorboard.html">torch.utils.tensorboard â€” PyTorch 2.0 documentation</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">!pip install tensorboard</span><br><span class="line"><span class="keyword">from</span> torch.utils.tensorboard <span class="keyword">import</span> SummaryWriter </span><br><span class="line">writer = SummaryWriter(<span class="string">&#x27;./logs&#x27;</span>)  </span><br><span class="line"></span><br><span class="line">transform = transforms.Compose([transforms.ToTensor(), transforms.Normalize((<span class="number">0.5</span>,), (<span class="number">0.5</span>,))])</span><br><span class="line">trainset = datasets.MNIST(<span class="string">&#x27;mnist_train&#x27;</span>, train=<span class="literal">True</span>, download=<span class="literal">True</span>, transform=transform)</span><br><span class="line">trainloader = torch.utils.data.DataLoader(trainset, batch_size=<span class="number">64</span>, shuffle=<span class="literal">True</span>)</span><br><span class="line">model = torchvision.models.resnet50(<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># Have ResNet model take in grayscale rather than RGB</span></span><br><span class="line">model.conv1 = torch.nn.Conv2d(<span class="number">1</span>, <span class="number">64</span>, kernel_size=<span class="number">7</span>, stride=<span class="number">2</span>, padding=<span class="number">3</span>, bias=<span class="literal">False</span>)</span><br><span class="line">images, labels = <span class="built_in">next</span>(<span class="built_in">iter</span>(trainloader))</span><br><span class="line"></span><br><span class="line">grid = torchvision.utils.make_grid(images)</span><br><span class="line">writer.add_image(<span class="string">&#x27;images&#x27;</span>, grid, <span class="number">0</span>)</span><br><span class="line">writer.add_graph(model, images)</span><br><span class="line"><span class="comment"># å…³é—­writer</span></span><br><span class="line">writer.close()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> torch.utils.tensorboard <span class="keyword">import</span> SummaryWriter</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">writer = SummaryWriter()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    x = np.random.random(<span class="number">1000</span>)</span><br><span class="line">    writer.add_histogram(<span class="string">&#x27;distribution centers&#x27;</span>, x + i, i)</span><br><span class="line">writer.close()</span><br></pre></td></tr></table></figure><p><img data-src="https://pytorch.org/docs/stable/_images/add_histogram.png" alt="_images/add_histogram.png" style="zoom: 67%;" /></p><p>åœ¨google colabä½¿ç”¨éœ€è¦æ­é…ä¸€äº›magic func</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">%load_ext tensorboard  <span class="comment">#ä½¿ç”¨tensorboard æ‰©å±•</span></span><br><span class="line">%tensorboard --logdir logs  <span class="comment">#å®šä½tensorboardè¯»å–çš„æ–‡ä»¶ç›®å½•</span></span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨visdomå¯è§†åŒ–"><a href="#ä½¿ç”¨visdomå¯è§†åŒ–" class="headerlink" title="ä½¿ç”¨visdomå¯è§†åŒ–"></a>ä½¿ç”¨visdomå¯è§†åŒ–</h4><p>visdomä¸€èˆ¬æ­é…pytorch,æ¯•ç«Ÿéƒ½æ˜¯metaçš„.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pip install visdom</span><br><span class="line">python -m visdom.server</span><br><span class="line">iz = Visdom()</span><br><span class="line">  </span><br><span class="line">viz.line([<span class="number">0.</span>],    <span class="comment">#Yçš„ç¬¬ä¸€ä¸ªç‚¹</span></span><br><span class="line">         [<span class="number">0.</span>],    <span class="comment">#Xçš„ç¬¬ä¸€ä¸ªç‚¹</span></span><br><span class="line">         win=<span class="string">&quot;train loss&quot;</span>,   <span class="comment">#å³ä¸Šè§’çª—å£çš„åç§° </span></span><br><span class="line">         opts=<span class="built_in">dict</span>(title=<span class="string">&#x27;train_loss&#x27;</span>) <span class="comment">#optçš„å‚æ•°éƒ½å¯ä»¥ç”¨pythonå­—å…¸çš„æ ¼å¼ä¼ å…¥ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„ç±»ä¼¼matplotlibç¾åŒ–å›¾å½¢çš„å‚æ•°å‚è€ƒå®˜ç½‘</span></span><br><span class="line">        )  </span><br><span class="line">        </span><br><span class="line">viz.line([<span class="number">1</span>,],<span class="comment">#Yçš„ä¸‹ä¸€ä¸ªç‚¹</span></span><br><span class="line">         [<span class="number">1.</span>],<span class="comment">#Xçš„ä¸‹ä¸€ä¸ªç‚¹</span></span><br><span class="line">         win=<span class="string">&quot;train loss&quot;</span>,</span><br><span class="line">         update=<span class="string">&#x27;append&#x27;</span><span class="comment">#æ·»åŠ åˆ°ä¸‹ä¸€ä¸ªç‚¹åé¢</span></span><br><span class="line">         )</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè¿˜æ˜¯æ¨èé€‰æ‹©ä¸¤è€…ä¹‹ä¸€å³å¯.</p><h3 id="DCGAN"><a href="#DCGAN" class="headerlink" title="*DCGAN"></a>*DCGAN</h3><p>æ ‡é¢˜<strong>WITH DEEP CONVOLUTIONAL GENERATIVE ADVERSARIAL NETWORKS</strong></p><p><strong>intro</strong></p><p>Learning reusable feature representations from large unlabeled datasets has been an area of active research. In the context of computer vision, one can leverage the practically unlimited amount of unlabeled images and videos to learn good intermediate representations, which can then be used on a variety of supervised learning tasks such as image classification. We propose that one way to build good image representations is by training Generative Adversarial Networks (GANs) (Goodfellow et al., 2014), and later reusing parts of the generator and discriminator networks as feature extractors for supervised tasks. GANs provide an attractive alternative to maximum likelihood techniques. One can additionally argue that their learning process and the lack of a heuristic cost function (such as pixel-wise independent mean-square error) are attractive to representation learning. GANs have been known to be unstable to train, often resulting in generators that produce nonsensical outputs. There has been very limited published research in trying to understand and visualize what GANs learn, and the intermediate representations of multi-layer GANs. In this paper, we make the following contributions </p><p>â€¢ We propose and evaluate a set of constraints on the architectural topology of Convolutional GANs that make them stable to train in most settings. We name this class of architectures Deep Convolutional GANs (DCGAN) </p><p>â€¢ We use the trained discriminators for image classification tasks, showing competitive performance with other unsupervised algorithms. </p><p>â€¢ We visualize the filters learnt by GANs and empirically show that specific filters have learned to draw specific objects.</p><p>We show that the generators have interesting vector arithmetic properties allowing for easy manipulation of many semantic qualities of generated sample</p><p>è´¡çŒ®:æå‡ºå·ç§¯GAN,å·ç§¯å±‚æ›¿ä»£å…¨è¿æ¥,ä½¿ç”¨è®­ç»ƒè¿‡çš„åˆ¤åˆ«å™¨ç”¨äºåˆ†ç±»ä»»åŠ¡,å¯è§†åŒ–äº†ç”Ÿæˆå™¨ä¸­çš„æŸå±‚,æ˜¾ç¤ºå‡ºè‰¯å¥½çš„ç»˜åˆ¶ç‰¹å®šå¯¹è±¡çš„èƒ½åŠ›.ç”Ÿæˆå™¨çš„å‘é‡æ˜¾ç¤ºå‡ºèƒ½æ§åˆ¶æ ·æœ¬çš„è¯­ä¹‰è´¨é‡è¡Œä¸º.ä»‹ç»äº†ä¸€äº›è¶…å‚çš„åˆå§‹åŒ–.</p><p>â€¢ Replace any pooling layers with strided convolutions (discriminator) and fractional-strided convolutions (generator). </p><p>â€¢ Use batchnorm in both the generator and the discriminator. â€¢ Remove fully connected hidden layers for deeper architectures. </p><p>â€¢ Use ReLU activation in generator for all layers except for the output, which uses Tanh. â€¢ Use LeakyReLU activation in the discriminator for all layers</p><p>ä½¿ç”¨äº†ä¸‰ä¸ªæ•°æ®é›†</p><ul><li>æ‰¹é‡æ ‡å‡†åŒ–æ˜¯ä¸¤ä¸ªç½‘ç»œä¸­å¿…é¡»çš„ã€‚</li><li>å·ç§¯å±‚æ›¿ä»£å…¨è¿æ¥å±‚ã€‚</li><li>ä½¿ç”¨stridedå·ç§¯(æ­¥å¹…å¤§äº1)å¯ä»¥ä»£æ›¿æ± åŒ–</li><li>ReLUæ¿€æ´»ï¼ˆ<em>å‡ ä¹</em>æ€»æ˜¯ï¼‰ä¼šæœ‰å¸®åŠ©ã€‚</li></ul><p><img data-src="https://s2.loli.net/2023/08/29/L1aVuqWoiDHfS2z.png" alt="image-20230829192803486"></p><p>åŸè®ºæ–‡ä¸­Dåˆ¤åˆ«å‡½æ•°ä½¿ç”¨çš„æ˜¯ReLU,ä½†ç°åœ¨ä»£ç ä¸­å¾ˆå¤šå…¶å®è¿˜æ˜¯ç”¨çš„LeakyReLU.æ­¤å¤–ä¸ä½¿ç”¨æ± åŒ–,è€Œæ˜¯ä½¿ç”¨deconvolutionæˆ–è€…å«åˆ†æ•°æ­¥é•¿å·ç§¯(fractionally-strided convolutions).</p><p><img data-src="https://s2.loli.net/2023/08/29/cktnUB7Lj5g6mlI.png" alt="image-20230829214218494"></p><p>pytorchå®ç°ä¸­,Dåˆ¤åˆ«å™¨ä½¿ç”¨nn.AvgPool2då¹³å‡æ± åŒ–æ“ä½œ.</p><p><img data-src="https://s2.loli.net/2023/08/30/eIhKBaf3t85gVqx.png" alt="image-20230830120457639"></p><p>layer normalization RNN,nlpä»»åŠ¡ä¸­,æ¯ä¸ªtokençš„ç‰¹å¾æ•°ä¸åŒ,é’ˆå¯¹æ¯ä¸ªtoken</p><p>instance normalization GANä¸­,é’ˆå¯¹å•ä¸ªå›¾åƒä¸åŒçš„é€šé“</p><p><a href="https://pytorch.org/docs/stable/generated/torch.nn.InstanceNorm2d.html#torch.nn.InstanceNorm2d"><code>InstanceNorm2d</code></a> and <a href="https://pytorch.org/docs/stable/generated/torch.nn.LayerNorm.html#torch.nn.LayerNorm"><code>LayerNorm</code></a> are very similar, but have some subtle differences. <a href="https://pytorch.org/docs/stable/generated/torch.nn.InstanceNorm2d.html#torch.nn.InstanceNorm2d"><code>InstanceNorm2d</code></a> is applied on each channel of channeled data like RGB images, but <a href="https://pytorch.org/docs/stable/generated/torch.nn.LayerNorm.html#torch.nn.LayerNorm"><code>LayerNorm</code></a> is usually applied on entire sample and often in NLP tasks. Additionally, <a href="https://pytorch.org/docs/stable/generated/torch.nn.LayerNorm.html#torch.nn.LayerNorm"><code>LayerNorm</code></a> applies elementwise affine transform, while <a href="https://pytorch.org/docs/stable/generated/torch.nn.InstanceNorm2d.html#torch.nn.InstanceNorm2d"><code>InstanceNorm2d</code></a> usually donâ€™t apply affine transform</p><p>ConvTranspose2d</p><p>é€†å·ç§¯fractionally-strided convolutions,å¯ä»¥åˆ©ç”¨<code>torchsummary</code>è¿™ä¸ªåº“æŸ¥çœ‹æ¨¡å‹ç›¸å…³ä¿¡æ¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myModel = Discriminator().to(DEVICE)</span><br><span class="line">summary(myModel,(<span class="number">1</span>,<span class="number">28</span>,<span class="number">28</span>))</span><br></pre></td></tr></table></figure><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------</span><br><span class="line">        Layer (type)               Output Shape         Param #</span><br><span class="line">================================================================</span><br><span class="line">            Conv2d<span class="string">-1</span>          [<span class="string">-1</span>, 512, 14, 14]           4,608</span><br><span class="line">       BatchNorm2d<span class="string">-2</span>          [<span class="string">-1</span>, 512, 14, 14]           1,024</span><br><span class="line">         LeakyReLU<span class="string">-3</span>          [<span class="string">-1</span>, 512, 14, 14]               0</span><br><span class="line">            Conv2d<span class="string">-4</span>            [<span class="string">-1</span>, 256, 7, 7]       1,179,648</span><br><span class="line">       BatchNorm2d<span class="string">-5</span>            [<span class="string">-1</span>, 256, 7, 7]             512</span><br><span class="line">         LeakyReLU<span class="string">-6</span>            [<span class="string">-1</span>, 256, 7, 7]               0</span><br><span class="line">            Conv2d<span class="string">-7</span>            [<span class="string">-1</span>, 128, 4, 4]         294,912</span><br><span class="line">       BatchNorm2d<span class="string">-8</span>            [<span class="string">-1</span>, 128, 4, 4]             256</span><br><span class="line">         LeakyReLU<span class="string">-9</span>            [<span class="string">-1</span>, 128, 4, 4]               0</span><br><span class="line">        AvgPool2d<span class="string">-10</span>            [<span class="string">-1</span>, 128, 1, 1]               0</span><br><span class="line">           Linear<span class="string">-11</span>                    [<span class="string">-1</span>, 1]             129</span><br><span class="line">          Sigmoid<span class="string">-12</span>                    [<span class="string">-1</span>, 1]               0</span><br><span class="line">================================================================</span><br><span class="line">Total params: 1,481,089</span><br><span class="line">Trainable params: 1,481,089</span><br><span class="line">Non-trainable params: 0</span><br><span class="line">----------------------------------------------------------------</span><br><span class="line">Input size (MB): 0.00</span><br><span class="line">Forward/backward pass size (MB): 2.63</span><br><span class="line">Params size (MB): 5.65</span><br><span class="line">Estimated Total Size (MB): 8.28</span><br><span class="line">----------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>æˆ‘åœ¨æµ‹è¯•githubä¸Šä¸€ä¸ªDCGANçš„ä»£ç æ—¶,å‘ç°å…¶åœ¨ç”Ÿæˆå™¨ä¸Šé™¤äº†æœ€åä¸€å±‚ä½¿ç”¨tanhæ¿€æ´»å‡½æ•°,å…¶ä»–å±‚éƒ½ä½¿ç”¨leakæ¿€æ´»å‡½æ•°,ä½†æ˜¯è¿™æ ·ç”Ÿæˆå™¨ä¼šé€æ¸å˜å¤§.</p><p><img data-src="https://s2.loli.net/2023/08/31/6QlMEzeH8vsLy7S.png" alt="image-20230831165159320" style="zoom:67%;" /></p><p>å› ä¸ºLeakyReLUç…§é¡¾åˆ°äº†è´Ÿæ•°,ä½¿å¾—æ¯ä¸€çº¿æ€§å±‚è¾“å‡ºä¸ºè´Ÿå€¼æ—¶ä¹Ÿæœ‰æ¢¯åº¦,è¿™æ ·ä¹Ÿè®¸èƒ½ä½¿å¾—ç”Ÿæˆå™¨è·³å‡º</p><h3 id="WGAN"><a href="#WGAN" class="headerlink" title="*WGAN"></a>*WGAN</h3><p>ä½¿ç”¨EMè·ç¦»<a href="https://jonathan-hui.medium.com/gan-wasserstein-gan-wgan-gp-6a1a2aa1b490">GAN â€” Wasserstein GAN &amp; WGAN-GP. Training GAN is hard. Models may neverâ€¦ | by Jonathan Hui | Medium</a></p><ul><li>åˆ¤åˆ«å™¨æœ€åä¸€å±‚å»æ‰sigmoid</li><li>ç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨çš„lossä¸å–log</li><li>æ¯æ¬¡æ›´æ–°åˆ¤åˆ«å™¨çš„å‚æ•°ä¹‹åæŠŠå®ƒä»¬çš„ç»å¯¹å€¼æˆªæ–­åˆ°ä¸è¶…è¿‡ä¸€ä¸ªå›ºå®šå¸¸æ•°c</li><li>ä¸è¦ç”¨åŸºäºåŠ¨é‡çš„ä¼˜åŒ–ç®—æ³•ï¼ˆåŒ…æ‹¬momentumå’ŒAdamï¼‰ï¼Œæ¨èRMSPropï¼ŒSGDä¹Ÿè¡Œ</li></ul><p><img data-src="https://pic1.zhimg.com/80/v2-b783ce95d8bdf1499fc88994e170a02c_720w.webp" alt="img"></p><p>ä¸Šé¢è¿™ä¸ªå…¬å¼æ˜¯åŸºäºæ¨å›¾è·ç¦»çš„è®¡ç®—</p><p><img data-src="https://img1.imgtp.com/2023/09/15/B6W4SQCF.png" alt="image-20230915205616738" style="zoom: 67%;" /></p><p><img data-src="https://pic2.zhimg.com/80/v2-fe9ef30af6166a5eea47c9006bfc27cd_720w.webp" alt=""></p><p>ä¸‹é¢æ˜¯WGANè®ºæ–‡çš„intro</p><p><img data-src="https://s2.loli.net/2023/09/05/u4hjRmwN5i3E9oG.png" alt="image-20230905224350055" style="zoom: 80%;" /></p><p><img data-src="https://miro.medium.com/v2/resize:fit:700/1*5jF5gbIDwU6k9m1ILl0Utg.jpeg" alt="img"></p><p>ä¸€å¼€å§‹çš„GANçš„æŸå¤±å‡½æ•°è®¾è®¡è¢«è®¤ä¸ºæœ‰é—®é¢˜,ä¸KL,JSæ•£åº¦æœ‰å…³.</p><script type="math/tex; mode=display">KL(P_1||P_2)=E_{x\sim P_1}log\frac{P_1}{P_2}</script><script type="math/tex; mode=display">KL(P_1||P_2)=\int\limits_xP_1\log\frac{P_1}{P_2}dx\text{æˆ–}KL(P_1||P_2)=\sum p_1\log\frac{P_1}{P_2}</script><p>KLæ•£åº¦æ˜¯ç†µä¸äº¤å‰ç†µçš„å·®,å®ƒä¸æ˜¯å¯¹ç§°çš„.</p><p>è€ŒJSæ•£åº¦å’ŒKLæ•£åº¦æ˜¯æœ‰å…³è”çš„,å¯ä»¥çœ‹å‡ºJSæ•£åº¦æ˜¯å¯¹ç§°çš„,</p><script type="math/tex; mode=display">JS(P_1||P_2)=\frac12KL(P_1||\frac{P_1+P_2}2)+\frac12KL(P_2||\frac{P_1+P_2}2)</script><p>ç»è¯æ˜,å½“ä¸¤ä¸ªåˆ†å¸ƒä¸é‡å æ—¶,JSæ•£åº¦ä¸ºlog2<a href="https://blog.csdn.net/Invokar/article/details/88917214">GANï¼šä¸¤è€…åˆ†å¸ƒä¸é‡åˆJSæ•£åº¦ä¸ºlog2çš„æ•°å­¦è¯æ˜_ä¸ºä»€ä¹ˆæ·±åº¦å­¦ä¹ wganjsæ•£åº¦ç­‰äºlog2</a></p><blockquote><p>ä»ç†è®ºå’Œç»éªŒä¸Šæ¥è¯´ï¼ŒçœŸå®çš„æ•°æ®åˆ†å¸ƒé€šå¸¸æ˜¯ä¸€ä¸ª<strong>ä½ç»´æµå½¢</strong>ï¼Œç®€å•åœ°è¯´å°±æ˜¯æ•°æ®ä¸å…·å¤‡é«˜ç»´ç‰¹æ€§ï¼Œè€Œæ˜¯å­˜åœ¨ä¸€ä¸ªåµŒå…¥åœ¨é«˜ç»´åº¦çš„ä½ç»´ç©ºé—´å†…,åœ¨å®é™…æ“ä½œä¸­ï¼Œæˆ‘ä»¬çš„ç»´åº¦ç©ºé—´è¿œè¿œä¸æ­¢3ç»´ï¼Œæœ‰å¯èƒ½æ˜¯ä¸Šç™¾ç»´ï¼Œåœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œæ•°æ®å°±æ›´åŠ éš¾äºé‡åˆ.</p></blockquote><p>WGANæ‰“ç®—è®­ç»ƒç½‘ç»œå¾—åˆ°ä¸€ä¸ªå‡½æ•°,è¿™ä¸ªå‡½æ•°æ»¡è¶³1-Lipschitz,åŒæ—¶ä¹Ÿæ˜¯Dè¾¨åˆ«å™¨,è¿™æ ·èƒ½ä½¿å¾—æŸå¤±å‡½æ•°æ›´æœ‰æ„ä¹‰,ä¹Ÿèƒ½è§£å†³æ¢¯åº¦ä¸æ¨¡å¼å´©æºƒé—®é¢˜. </p><p>WGANè´¡çŒ®:è§£å†³GANè®­ç»ƒä¸ç¨³å®šä¸æ¨¡å¼å´©æºƒé—®é¢˜,æœ‰ä¸€ä¸ªæŒ‡æ ‡(EMè·ç¦»),è¿™ä¸ªå€¼è¶Šå°è®­ç»ƒå¾—è¶Šå¥½.</p><h4 id="WGAN-GP"><a href="#WGAN-GP" class="headerlink" title="WGAN-GP"></a>WGAN-GP</h4><p>è¿™é‡Œçš„GPå°±æ˜¯gradient penaltyçš„æ„æ€.åœ¨å‘äº†ç¬¬ä¸€ç¯‡GANçš„æ–‡ç« ä¹‹å,ä½œè€…åˆå‘äº†è¿™ç¯‡.</p><blockquote><p>The recently proposed Wasserstein GAN (WGAN) makes progress toward stable training of GANs, but sometimes can still generate only poor samples or fail to converge. We find that these problems are often <strong>due to the use of weight clipping in WGAN to enforce a Lipschitz constraint on the critic, which can lead to undesired behavior</strong></p></blockquote><p>WGANä»¥åŠå…¶è¡ç”Ÿä¸»è¦éƒ½æ˜¯ä¸ºäº†æ»¡è¶³Lipschitz constraint,åŒ…æ‹¬åé¢çš„Spectral Normalizaton<a href="https://arxiv.org/pdf/1802.05957.pdf">1802.05957.pdf (arxiv.org)</a>.</p><p>æ„æ€æ˜¯å¼ºåˆ¶ä½¿ç”¨æ¢¯åº¦è£å‰ª(clamp)åˆ°ä¸€ä¸ªèŒƒå›´ä¼šå¯¼è‡´ä¸æƒ³è¦çš„è¡Œä¸º,å› ä¸ºæœ¬èº«æƒ³è¦çš„æ˜¯è®©criticæ»¡è¶³Lipschitz,æ‰€ä»¥ç²—æš´åœ°ä½¿ç”¨äº†æ¢¯åº¦è£å‰ª.</p><p><img data-src="https://miro.medium.com/v2/resize:fit:700/1*NVBkG5vDwwz-1ad-zwxddA.jpeg" alt="img"></p><p>éœ€è¦ä½¿å¾—åˆ¤åˆ«å™¨fçš„æ¢¯åº¦èŒƒæ•°å¤„å¤„å°äº1,WGAN-GPè¯æ˜äº†éœ€è¦ä½¿å¾—åœ¨çœŸå®æ•°æ®å’Œç”Ÿæˆçš„æ•°æ®ä¹‹é—´æ’å€¼çš„ç‚¹å¯¹äºfåº”è¯¥å…·æœ‰1çš„æ¢¯åº¦èŒƒæ•°ã€‚</p><p>èŒƒæ•°æœ‰å¤šç§.<img data-src="https://img1.imgtp.com/2023/09/17/ZwMIQPEx.png" alt="image-20230917103610368"></p><p><img data-src="https://miro.medium.com/v2/resize:fit:700/1*TErKpfBkilA-G24FNFg0FA.png" alt="img"></p><p>æ‰€ä»¥éœ€è¦ä½¿ç”¨åˆ°æ¢¯åº¦,è€Œä¸”æ˜¯å¯¹äºè¾“å…¥çš„æ¢¯åº¦,é€šè¿‡é™åˆ¶è¾“å…¥çš„æ¢¯åº¦,è€Œä¸æ˜¯WGANä¸­é™åˆ¶æ¯æ¬¡æ¨¡å‹çš„weightå’Œbiasçš„å€¼.<a href="https://pytorch.org/docs/stable/generated/torch.autograd.grad.html">torch.autograd.grad â€” PyTorch 2.0 documentation</a>åœ¨pytorchä¸­ä½¿ç”¨autograd.gradè®¡ç®—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> autograd</span><br><span class="line"><span class="comment"># demo</span></span><br><span class="line">x = torch.rand(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">x.requires_grad_()</span><br><span class="line">y = torch.<span class="built_in">sum</span>(x**<span class="number">2</span>)</span><br><span class="line">grads = autograd.grad(outputs=y, inputs=x,create_graph=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(grads)</span><br></pre></td></tr></table></figure><p><img data-src="https://miro.medium.com/v2/resize:fit:700/1*r8472Sg5fDJ1XKQPUbRC4Q.png" alt=""></p><p><img data-src="https://miro.medium.com/v2/resize:fit:700/1*gi2isFNxtXE-pNiQ_CrZ8w.jpeg" alt="img"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Gradient Penalty (e.g. gradients w.r.t x_penalty)</span></span><br><span class="line">eps = torch.rand(batch_size, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>).to(DEVICE) <span class="comment"># x shape: (64, 1, 28, 28)</span></span><br><span class="line">x_penalty = eps*x + (<span class="number">1</span>-eps)*x_fake</span><br><span class="line">x_penalty = x_penalty.view(x_penalty.size(<span class="number">0</span>), -<span class="number">1</span>)  <span class="comment"># n 1 28*28</span></span><br><span class="line">p_outputs = D(x_penalty, y)  <span class="comment"># N,1</span></span><br><span class="line">xp_grad = autograd.grad(outputs=p_outputs, inputs=x_penalty, grad_outputs=D_labels, <span class="comment"># N 1</span></span><br><span class="line">                        create_graph=<span class="literal">True</span>, retain_graph=<span class="literal">True</span>, only_inputs=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(xp_grad)</span><br><span class="line">grad_penalty = p_coeff * torch.mean(torch.<span class="built_in">pow</span>(torch.norm(xp_grad[<span class="number">0</span>], <span class="number">2</span>, <span class="number">1</span>) - <span class="number">1</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure><p>å¯¹äºè¾¨åˆ«å™¨,WGANä¸€èˆ¬å«åšcritic,æŸå¤±å‡½æ•°,è€Œç”Ÿæˆå™¨ä¾æ—§æ˜¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Wasserstein loss</span></span><br><span class="line">x_outputs = D(x, y)</span><br><span class="line">z_outputs = D(x_fake, y)</span><br><span class="line">D_x_loss = torch.mean(x_outputs)</span><br><span class="line">D_z_loss = torch.mean(z_outputs)</span><br><span class="line">D_loss = D_z_loss - D_x_loss + grad_penalty</span><br></pre></td></tr></table></figure><p>æ­¤å¤–ä¸ä½¿ç”¨BN,æ‰¹æ¬¡æ ‡å‡†åŒ–ä¼šåœ¨åŒä¸€æ‰¹æ¬¡ä¸­çš„æ ·æœ¬ä¹‹é—´åˆ›å»ºç›¸å…³æ€§ã€‚å®ƒ<strong>å½±å“äº†æ¢¯åº¦æƒ©ç½šçš„æœ‰æ•ˆæ€§</strong>ï¼Œå®éªŒè¯å®äº†è¿™ä¸€ç‚¹ã€‚</p><p>ä¸€èˆ¬å¯ä»¥ä½¿ç”¨Layer Normalizationä¹Ÿå°±æ˜¯å¯¹å•ä¸ªæ ·æœ¬è¿›è¡Œå½’ä¸€åŒ–.</p><h3 id="Conditional-GAN"><a href="#Conditional-GAN" class="headerlink" title="*Conditional GAN"></a>*Conditional GAN</h3><p>æŸç§ç¨‹åº¦ä¸Šé‡Œç¨‹ç¢‘ä½œå“,èƒ½å¤Ÿæ§åˆ¶GANç”Ÿæˆçš„ä¸œè¥¿äº†,é€šè¿‡æ·»åŠ label,ä¹Ÿå°±æ˜¯condition.</p><h3 id="InfoGAN"><a href="#InfoGAN" class="headerlink" title="InfoGAN"></a>InfoGAN</h3><p>æå‡ºåˆ©ç”¨äº’ä¿¡æ¯è¯±å¯¼æ½œå˜é‡.è¯¥æ–¹æ³•å°†ä¿¡æ¯æœ€å¤§åŒ–å¼•å…¥åˆ°æ ‡å‡†GANç½‘ç»œä¸­ã€‚</p><p><a href="https://medium.com/mlearning-ai/infogan-interpretable-representation-learning-to-distangle-data-unsupervised-33a4089d7c09">InfoGAN: Interpretable Representation Learning to Distangle Data Unsupervised | by Renee LIN | MLearning.ai | Medium</a></p><p>æœŸæœ›æœ‰è‰¯å¥½çš„ç‰¹å¾è§£è€¦å…³ç³».</p><blockquote><p>GANå…¬å¼ä½¿ç”¨ç®€å•çš„è¿ç»­è¾“å…¥å™ªå£°çŸ¢é‡zï¼ŒåŒæ—¶å¯¹Gä½¿ç”¨å™ªå£°çš„æ–¹å¼æ²¡æœ‰é™åˆ¶ã€‚å› æ­¤ï¼Œå™ªå£°å¯èƒ½ä¼šè¢«ç”Ÿæˆå™¨ä»¥é«˜åº¦çº ç¼ (entangled)çš„æ–¹å¼ä½¿ç”¨ï¼Œå¯¼è‡´ z çš„å„ä¸ªç»´åº¦ä¸æ•°æ®çš„è¯­ä¹‰ç‰¹å¾ä¸å¯¹åº”ã€‚</p><p>åœ¨æœ¬æ–‡ä¸­ï¼Œå°†è¾“å…¥å™ªå£°å‘é‡åˆ†è§£ä¸ºä¸¤éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å•ä¸ªéç»“æ„åŒ–å™ªå£°å‘é‡ï¼šï¼ˆiï¼‰zï¼Œå®ƒè¢«è§†ä¸ºä¸å¯å‹ç¼©å™ªå£°æº;ï¼ˆiiï¼‰ cï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ½œåœ¨ä»£ç ï¼Œå°†é’ˆå¯¹æ•°æ®åˆ†å¸ƒçš„æ˜¾è‘—ç»“æ„åŒ–è¯­ä¹‰ç‰¹å¾ã€‚</p></blockquote><script type="math/tex; mode=display">I(X;Y)=H(X)-H(X|Y)=H(Y)-H(Y|X)</script><p>å¼•å…¥äº’ä¿¡æ¯,åœ¨Gè¾“å…¥æ—¶åŠ å…¥ä¸€ä¸ªæ½œå˜é‡c,æ½œåœ¨ä»£ç  C å’Œç”Ÿæˆå™¨åˆ†å¸ƒ G(z,c) ä¹‹é—´åº”è¯¥æœ‰é«˜åº¦çš„äº’ä¿¡æ¯ã€‚å› æ­¤I(c;G(z,c)) åº”è¯¥å¾ˆé«˜ã€‚ç»™å®šä»»ä½• x âˆ¼ P~G~(x),å¸Œæœ› P~G~ï¼ˆc|xï¼‰ æœ‰ä¸€ä¸ªè¾ƒå°çš„ç†µã€‚æ¢å¥è¯è¯´ï¼Œæ½œåœ¨ä»£ç cä¸­çš„ä¿¡æ¯ä¸åº”è¯¥åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­ä¸¢å¤±ã€‚</p><script type="math/tex; mode=display">\operatorname*{min}_{G}\operatorname*{max}_{D}V_{I}(D,G)=V(D,G)-\lambda I(c;G(z,c))</script><p>ç„¶è€Œä¸Šé¢äº’ä¿¡æ¯çš„è®¡ç®—æ¶‰åŠåéªŒæ¦‚ç‡åˆ†å¸ƒP(c|x)ï¼Œè€Œåè€…åœ¨å®é™…ä¸­æ˜¯å¾ˆéš¾è·å–çš„ï¼Œæ‰€ä»¥éœ€è¦å®šä¹‰ä¸€ä¸ªè¾…åŠ©æ€§çš„æ¦‚ç‡åˆ†å¸ƒQ(c|x)ï¼Œé‡‡ç”¨Variational Information Maximizationå¯¹äº’ä¿¡æ¯è¿›è¡Œä¸‹ç•Œæ‹Ÿåˆ.</p><script type="math/tex; mode=display">\begin{aligned}I(c;G(z,c))& =H(c)-H(c|G(z,c))  \\&=\mathbb{E}_{x\sim G(z,c)}[\mathbb{E}_{c^{\prime}\sim P(c|x)}[\log P(c^{\prime}|x)]]+H(c) \\&=\mathbb{E}_{x\sim G(z,c)}[\underbrace{D_{\mathrm{KL}}(P(\cdot|x)\parallel Q(\cdot|x))}_{\geq0}+\mathbb{E}_{c^{\prime}\sim P(c|x)}[\log Q(c^{\prime}|x)]]+H(c) \\&\geq\mathbb{E}_{x\sim G(z,c)}[\mathbb{E}_{c^{\prime}\sim P(c|x)}[\log Q(c^{\prime}|x)]]+H(c)\end{aligned}</script><p>è¿™æ ·äº’ä¿¡æ¯è®¡ç®—å°±èƒ½ç¡®å®šæœ€å°å€¼,ç»§ç»­æ¨å¯¼æœ‰</p><script type="math/tex; mode=display">\begin{aligned}L_{I}(G,Q)& =E_{c\sim P(c),x\sim G(z,c)}[\log Q(c|x)]+H(c)  \\&=E_{x\sim G(z,c)}[\mathbb{E}_{c^{\prime}\sim P(c|x)}[\log Q(c^{\prime}|x)]]+H(c) \\&\leq I(c;G(z,c))\end{aligned}</script><p>æœ€åç›®æ ‡å‡½æ•°ä¸º</p><p><img data-src="https://pic4.zhimg.com/80/v2-ede0624e4acb54575483852435d0ec2b_720w.webp" alt="img"></p><p><img data-src="https://miro.medium.com/v2/resize:fit:543/1*c0wSI0WJR9-yagc0ruFGGg.png" alt="img" style="zoom: 67%;" /></p><p>z,cå‡ä¸ºé‡‡æ ·å¾—åˆ°,zä¾æ—§æ˜¯æ­£æ€åˆ†å¸ƒé‡‡æ ·,cç”±ä¸¤éƒ¨åˆ†ç»„æˆ,ä¸€éƒ¨åˆ†æ˜¯ç¦»æ•£åˆ†å¸ƒå¦ä¸€éƒ¨åˆ†æ˜¯è¿ç»­åˆ†å¸ƒ.è®ºæ–‡ä¸­ä½¿ç”¨Categoricalä¸Unifåˆ†å¸ƒ,æ˜¯ç¦»æ•£å‡åŒ€åˆ†å¸ƒä¸è¿ç»­å‡åŒ€åˆ†å¸ƒ.</p><p><img data-src="https://img1.imgtp.com/2023/09/18/TvDtnXUu.png" alt="image-20230918102341583" style="zoom:67%;" /></p><p>åœ¨MNISTæ•°æ®é›†ä¸Š,æ¯”å¦‚ä½¿ç”¨c~1~ä½œä¸ºç¦»æ•£å˜é‡æ§åˆ¶ç”Ÿæˆçš„æ•°å­—çš„ç±»å‹,å…¶ä»–çš„c~2~å’Œc~3~ä½œä¸ºè¿ç»­å˜é‡æ§åˆ¶å…¶ä»–.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sample_noise</span>(<span class="params">batch_size, n_noise, n_c_discrete, n_c_continuous, label=<span class="literal">None</span>, supervised=<span class="literal">False</span></span>):</span></span><br><span class="line">    z = torch.randn(batch_size, n_noise).to(DEVICE) <span class="comment">#æ­£æ€åˆ†å¸ƒ æ½œå˜é‡ ä¸VAEçš„ä¸­é—´å˜é‡ç±»ä¼¼. bottleneck</span></span><br><span class="line">    <span class="comment"># ç¦»æ•£åˆ†å¸ƒ æ§åˆ¶æ•°å­—ç±»å‹ä¹Ÿå°±æ˜¯ç±»åˆ« å¦‚æœsupervised ä¼šæ ¹æ®labelçš„å€¼</span></span><br><span class="line">    <span class="keyword">if</span> supervised:</span><br><span class="line">        c_discrete = to_onehot(label).to(DEVICE) <span class="comment"># (B,10)</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># å¦åˆ™éšæœºç¦»æ•£å‡åŒ€ç”Ÿæˆ</span></span><br><span class="line">        c_discrete = to_onehot(torch.LongTensor(batch_size, <span class="number">1</span>).random_(<span class="number">0</span>, n_c_discrete)).to(DEVICE) <span class="comment"># (B,10)</span></span><br><span class="line">    <span class="comment"># è¿ç»­åˆ†å¸ƒ æ§åˆ¶å…¶ä»–å±æ€§ </span></span><br><span class="line">    c_continuous = torch.zeros(batch_size, n_c_continuous).uniform_(-<span class="number">1</span>, <span class="number">1</span>).to(DEVICE) <span class="comment"># (B,2)</span></span><br><span class="line">    c = torch.cat((c_discrete.<span class="built_in">float</span>(), c_continuous), <span class="number">1</span>) <span class="comment">#c (B,12)</span></span><br><span class="line">    <span class="keyword">return</span> z, c</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># Training Discriminator</span></span><br><span class="line">x = images.to(DEVICE)</span><br><span class="line">x_outputs, _, = D(x)</span><br><span class="line">D_x_loss = bce_loss(x_outputs, D_labels)</span><br><span class="line"></span><br><span class="line">z, c = sample_noise(batch_size, n_noise, n_c_discrete, n_c_continuous, label=labels, supervised=<span class="literal">True</span>)</span><br><span class="line">z_outputs, _, = D(G(z, c))</span><br><span class="line">D_z_loss = bce_loss(z_outputs, D_fakes)</span><br><span class="line">D_loss = D_x_loss + D_z_loss</span><br><span class="line"></span><br><span class="line">D_opt.zero_grad()</span><br><span class="line">D_loss.backward()</span><br><span class="line">D_opt.step()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log_gaussian</span>(<span class="params">c, mu, var</span>):</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    criterion for Q(condition classifier)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">return</span> -((c - mu)**<span class="number">2</span>)/(<span class="number">2</span>*var+<span class="number">1e-8</span>) - <span class="number">0.5</span>*torch.log(<span class="number">2</span>*np.pi*var+<span class="number">1e-8</span>)</span><br><span class="line">    </span><br><span class="line"> <span class="comment"># Training Generator</span></span><br><span class="line">z, c = sample_noise(batch_size, n_noise, n_c_discrete, n_c_continuous, label=labels, supervised=<span class="literal">True</span>)</span><br><span class="line">c_discrete_label = torch.<span class="built_in">max</span>(c[:, :-<span class="number">2</span>], <span class="number">1</span>)[<span class="number">1</span>].view(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">z_outputs, features = D(G(z, c)) <span class="comment"># (B,1), (B,10), (B,4)</span></span><br><span class="line">c_discrete_out, cc_mu, cc_var = Q(features)</span><br><span class="line"></span><br><span class="line">G_loss = bce_loss(z_outputs, D_labels)</span><br><span class="line">Q_loss_discrete = ce_loss(c_discrete_out, c_discrete_label.view(-<span class="number">1</span>))</span><br><span class="line">Q_loss_continuous = -torch.mean(torch.<span class="built_in">sum</span>(log_gaussian(c[:, -<span class="number">2</span>:], cc_mu, cc_var), <span class="number">1</span>)) <span class="comment"># N(x | mu,var) -&gt; (B, 2) -&gt; (,1)</span></span><br><span class="line">mutual_info_loss = Q_loss_discrete + Q_loss_continuous*<span class="number">0.1</span></span><br><span class="line"></span><br><span class="line">GnQ_loss = G_loss + mutual_info_loss</span><br><span class="line"></span><br><span class="line">G_opt.zero_grad()</span><br><span class="line">GnQ_loss.backward()</span><br><span class="line">G_opt.step()</span><br></pre></td></tr></table></figure><p>ç¦»æ•£åˆ†å¸ƒçš„cæ±‚æŸå¤±ä½¿ç”¨äº¤å‰ç†µ,åˆ©ç”¨ä¸€ä¸ªQç½‘ç»œ,è¾“å…¥æ˜¯Dçš„å€’æ•°ç¬¬äºŒå±‚è¾“å‡º,å¾—åˆ°ç¦»æ•£è¾“å‡ºä¸è¿ç»­è¾“å‡ºçš„å‡å€¼å’ŒlogV. ç›¸å½“äºåˆ©ç”¨Qçš„è¾“å‡ºä¸Dçš„å€’æ•°ç¬¬äºŒå±‚è¾“å‡ºè®¡ç®—æŸå¤±,åˆ¤æ–­åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­æ˜¯å¦æœ‰æŸå¤±.</p><p>å…¶ä¸­log_gaussianæ˜¯åœ¨è®¡ç®—log(q(x)),çœ‹æ¥è¿˜æ˜¯è¦å­¦å¥½æ•°ç†ç»Ÿè®¡å’ŒçŸ©é˜µè®ºæ‰è¡Œ.</p><h3 id="BIGGAN"><a href="#BIGGAN" class="headerlink" title="BIGGAN"></a>BIGGAN</h3><h3 id="proGAN"><a href="#proGAN" class="headerlink" title="proGAN"></a>proGAN</h3><h3 id="StyleGAN"><a href="#StyleGAN" class="headerlink" title="StyleGAN"></a>StyleGAN</h3><h3 id="CycleGAN"><a href="#CycleGAN" class="headerlink" title="CycleGAN"></a>CycleGAN</h3><h3 id="SAGAN"><a href="#SAGAN" class="headerlink" title="SAGAN"></a>SAGAN</h3><h3 id="TelDiGAN"><a href="#TelDiGAN" class="headerlink" title="TelDiGAN"></a>TelDiGAN</h3><h3 id="SRGAN"><a href="#SRGAN" class="headerlink" title="SRGAN"></a>SRGAN</h3><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><p><a href="https://zhuanlan.zhihu.com/p/44926155">ç›˜ç‚¹å„ç§GANåŠèµ„æºæ•´ç†ï¼ˆ1ï¼‰ - çŸ¥ä¹ (zhihu.com)</a></p></li><li><p><a href="https://github.com/soumith/ganhacks">soumith/ganhacks: starter from â€œHow to Train a GAN?â€ at NIPS2016 (github.com)</a></p></li><li><p><a href="https://github.com/Yangyangii/GAN-Tutorial/tree/master">Yangyangii/GAN-Tutorial: Simple Implementation of many GAN models with PyTorch. (github.com)</a> åœ¨ä¸€äº›æ•°æ®é›†ä¸Šçš„GAN</p></li><li><p><a href="https://github.com/eriklindernoren/PyTorch-GAN">eriklindernoren/PyTorch-GAN: PyTorch implementations of Generative Adversarial Networks. (github.com)</a>pytorchå®ç°çš„GAN</p></li><li><p><a href="https://github.com/ccc013/GAN_Study">ccc013/GAN_Study: å­¦ä¹ GANçš„ç¬”è®°å’Œä»£ç  (github.com)</a></p></li><li><p><a href="https://github.com/torchgan/torchgan">torchgan/torchgan: Research Framework for easy and efficient training of GANs based on Pytorch (github.com)</a> pytorchå®ç°çš„åº“</p></li><li><p><a href="https://github.com/tensorflow/models/tree/master/research/gan">File not found (github.com)</a>tensorflowå®ç°çš„GAN</p></li><li><p><a href="https://github.com/eriklindernoren/Keras-GAN">eriklindernoren/Keras-GAN: Keras implementations of Generative Adversarial Networks. (github.com)</a>keraså®ç°çš„GAN</p></li><li><p><a href="https://github.com/zhangqianhui/AdversarialNetsPapers">zhangqianhui/AdversarialNetsPapers: Awesome paper list with code about generative adversarial nets (github.com)</a>GANè®ºæ–‡ä¸ä»£ç </p></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ·±å…¥GANå­¦ä¹ &lt;br&gt;</summary>
    
    
    
    
    <category term="GAN" scheme="https://www.sekyoro.top/tags/GAN/"/>
    
  </entry>
  
  <entry>
    <title>tailwindé€Ÿæˆ</title>
    <link href="https://www.sekyoro.top/2023/08/04/tailwind%E9%80%9F%E6%88%90/"/>
    <id>https://www.sekyoro.top/2023/08/04/tailwind%E9%80%9F%E6%88%90/</id>
    <published>2023-08-04T14:09:28.000Z</published>
    <updated>2023-08-05T12:13:24.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>å¾ˆç«çš„CSSæ¡†æ¶<br><span id="more"></span></p><p><a href="https://www.tailwindcss.cn/docs/installation">å®‰è£… - TailwindCSSä¸­æ–‡æ–‡æ¡£ | TailwindCSSä¸­æ–‡ç½‘</a></p><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><p><img data-src="https://s2.loli.net/2023/08/04/7d4CpYb5QeXHguV.png" alt="image-20230804221132617"></p><p><strong>Mobile first</strong></p><h2 id="å¸¸ç”¨å±æ€§"><a href="#å¸¸ç”¨å±æ€§" class="headerlink" title="å¸¸ç”¨å±æ€§"></a>å¸¸ç”¨å±æ€§</h2><h2 id="è‡ªå®šä¹‰è®¾ç½®å€¼"><a href="#è‡ªå®šä¹‰è®¾ç½®å€¼" class="headerlink" title="è‡ªå®šä¹‰è®¾ç½®å€¼"></a>è‡ªå®šä¹‰è®¾ç½®å€¼</h2><p>åœ¨<code>tailwind.config.js</code>æ–‡ä»¶ä¸­,ç”±äº Tailwind æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºå®šåˆ¶ç”¨æˆ·ç•Œé¢çš„æ¡†æ¶ï¼Œå› æ­¤åœ¨è®¾è®¡ä¹‹åˆå°±è€ƒè™‘åˆ°äº†å®šåˆ¶åŒ–ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒTailwindä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æŸ¥æ‰¾ä¸€ä¸ªå¯é€‰çš„ tailwind.config.js æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­å®šä¹‰ä»»ä½•è‡ªå®šä¹‰å†…å®¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx tailwindcss init</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">theme</span>: &#123;</span><br><span class="line">    <span class="attr">colors</span>: &#123;</span><br><span class="line">      <span class="attr">primary</span>: <span class="string">&#x27;#5c6ac4&#x27;</span>,</span><br><span class="line">      <span class="attr">secondary</span>: <span class="string">&#x27;#ecc94b&#x27;</span>,</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://www.tailwindcss.cn/docs/customizing-colors#naming-your-colors">Customizing Colors - TailwindCSSä¸­æ–‡æ–‡æ¡£ | TailwindCSSä¸­æ–‡ç½‘</a></p><h2 id="é‡ç”¨"><a href="#é‡ç”¨" class="headerlink" title="é‡ç”¨"></a>é‡ç”¨</h2><p><a href="https://www.tailwindcss.cn/docs/reusing-styles#extracting-classes-with-apply">Reusing Styles - TailwindCSSä¸­æ–‡æ–‡æ¡£ | TailwindCSSä¸­æ–‡ç½‘</a></p><p>ä¸€èˆ¬ä½¿ç”¨ä¸¤ç§æ–¹æ³•,ä¸€ç§ä½¿ç”¨@layerå’Œ@apply,å¦ä¸€ç§ä½¿ç”¨reactæˆ–è€…vueæ¡†æ¶å®šä¹‰component.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¾ˆç«çš„CSSæ¡†æ¶&lt;br&gt;</summary>
    
    
    
    
    <category term="css" scheme="https://www.sekyoro.top/tags/css/"/>
    
    <category term="Tailwind" scheme="https://www.sekyoro.top/tags/Tailwind/"/>
    
  </entry>
  
  <entry>
    <title>æ·±åº¦çŸ¥è¯†åŸºç¡€å­¦ä¹ (ä¸€)</title>
    <link href="https://www.sekyoro.top/2023/08/02/%E6%B7%B1%E5%BA%A6%E7%9F%A5%E8%AF%86%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0(%E4%B8%80)/"/>
    <id>https://www.sekyoro.top/2023/08/02/%E6%B7%B1%E5%BA%A6%E7%9F%A5%E8%AF%86%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0(%E4%B8%80)/</id>
    <published>2023-08-02T03:59:56.000Z</published>
    <updated>2023-09-05T07:05:44.320Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>è¿™æ–¹é¢çš„çŸ¥è¯†å®åœ¨æ˜¯å¾ˆå¤š<br><span id="more"></span></p><p>é¦–å…ˆå†™ä¸€ä¸‹è®¡ç®—æœºè§†è§‰æ–¹å‘çš„,ä»‹ç»ä¸€ä¸‹å„ç§Netçš„å‘å±•å².</p><h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="å·ç§¯ç¥ç»ç½‘ç»œ"><a href="#å·ç§¯ç¥ç»ç½‘ç»œ" class="headerlink" title="å·ç§¯ç¥ç»ç½‘ç»œ"></a>å·ç§¯ç¥ç»ç½‘ç»œ</h3><p>Padding Stride å·ç§¯æ ¸å¤§å°</p><p>pè¡¨ç¤ºå¡«å……padding,kè¡¨ç¤ºå·ç§¯æ ¸å®½é«˜,sè¡¨ç¤ºstride</p><script type="math/tex; mode=display">n_{\mathrm{out}}=\frac{n_{\mathrm{in}}+2p-k}{s}+1</script><h4 id="LeNet"><a href="#LeNet" class="headerlink" title="LeNet"></a>LeNet</h4><blockquote><p>LeNetï¼Œå®ƒæ˜¯æœ€æ—©å‘å¸ƒçš„å·ç§¯ç¥ç»ç½‘ç»œä¹‹ä¸€ï¼Œå› å…¶åœ¨è®¡ç®—æœºè§†è§‰ä»»åŠ¡ä¸­çš„é«˜æ•ˆæ€§èƒ½è€Œå—åˆ°å¹¿æ³›å…³æ³¨ã€‚ è¿™ä¸ªæ¨¡å‹æ˜¯ç”±AT&amp;Tè´å°”å®éªŒå®¤çš„ç ”ç©¶å‘˜Yann LeCunåœ¨1989å¹´æå‡ºçš„ï¼ˆå¹¶ä»¥å…¶å‘½åï¼‰ï¼Œç›®çš„æ˜¯è¯†åˆ«å›¾åƒ (<a href="https://zh.d2l.ai/chapter_references/zreferences.html#id90">LeCun <em>et al.</em>, 1998</a>)ä¸­çš„æ‰‹å†™æ•°å­—ã€‚ å½“æ—¶ï¼ŒYann LeCunå‘è¡¨äº†ç¬¬ä¸€ç¯‡é€šè¿‡åå‘ä¼ æ’­æˆåŠŸè®­ç»ƒå·ç§¯ç¥ç»ç½‘ç»œçš„ç ”ç©¶ï¼Œè¿™é¡¹å·¥ä½œä»£è¡¨äº†åå¤šå¹´æ¥ç¥ç»ç½‘ç»œç ”ç©¶å¼€å‘çš„æˆæœ</p></blockquote><p><img data-src="https://s2.loli.net/2023/08/03/wQkVZHUIGzYyvMs.png" alt="image-20230803191703397"></p><p>â€‹    æ¯ä¸ªå·ç§¯å—ä¸­çš„åŸºæœ¬å•å…ƒæ˜¯ä¸€ä¸ªå·ç§¯å±‚ã€ä¸€ä¸ªsigmoidæ¿€æ´»å‡½æ•°å’Œå¹³å‡æ±‡èšå±‚ã€‚è¯·æ³¨æ„ï¼Œè™½ç„¶ReLUå’Œæœ€å¤§æ±‡èšå±‚æ›´æœ‰æ•ˆï¼Œä½†å®ƒä»¬åœ¨20ä¸–çºª90å¹´ä»£è¿˜æ²¡æœ‰å‡ºç°ã€‚æ¯ä¸ªå·ç§¯å±‚ä½¿ç”¨5Ã—5å·ç§¯æ ¸å’Œä¸€ä¸ªsigmoidæ¿€æ´»å‡½æ•°ã€‚è¿™äº›å±‚å°†è¾“å…¥æ˜ å°„åˆ°å¤šä¸ªäºŒç»´ç‰¹å¾è¾“å‡ºï¼Œé€šå¸¸åŒæ—¶å¢åŠ é€šé“çš„æ•°é‡ã€‚ç¬¬ä¸€å·ç§¯å±‚æœ‰6ä¸ªè¾“å‡ºé€šé“ï¼Œè€Œç¬¬äºŒä¸ªå·ç§¯å±‚æœ‰16ä¸ªè¾“å‡ºé€šé“ã€‚æ¯ä¸ª2Ã—2æ± æ“ä½œï¼ˆæ­¥å¹…2ï¼‰é€šè¿‡ç©ºé—´ä¸‹é‡‡æ ·å°†ç»´æ•°å‡å°‘4å€ã€‚å·ç§¯çš„è¾“å‡ºå½¢çŠ¶ç”±æ‰¹é‡å¤§å°ã€é€šé“æ•°ã€é«˜åº¦ã€å®½åº¦å†³å®šã€‚</p><p>â€‹    ä¸ºäº†å°†å·ç§¯å—çš„è¾“å‡ºä¼ é€’ç»™ç¨ å¯†å—ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨å°æ‰¹é‡ä¸­å±•å¹³æ¯ä¸ªæ ·æœ¬ã€‚æ¢è¨€ä¹‹ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªå››ç»´è¾“å…¥è½¬æ¢æˆå…¨è¿æ¥å±‚æ‰€æœŸæœ›çš„äºŒç»´è¾“å…¥ã€‚è¿™é‡Œçš„äºŒç»´è¡¨ç¤ºçš„ç¬¬ä¸€ä¸ªç»´åº¦ç´¢å¼•å°æ‰¹é‡ä¸­çš„æ ·æœ¬ï¼Œç¬¬äºŒä¸ªç»´åº¦ç»™å‡ºæ¯ä¸ªæ ·æœ¬çš„å¹³é¢å‘é‡è¡¨ç¤ºã€‚LeNetçš„ç¨ å¯†å—æœ‰ä¸‰ä¸ªå…¨è¿æ¥å±‚ï¼Œåˆ†åˆ«æœ‰120ã€84å’Œ10ä¸ªè¾“å‡ºã€‚å› ä¸ºæˆ‘ä»¬åœ¨æ‰§è¡Œåˆ†ç±»ä»»åŠ¡ï¼Œæ‰€ä»¥è¾“å‡ºå±‚çš„10ç»´å¯¹åº”äºæœ€åè¾“å‡ºç»“æœçš„æ•°é‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LeNet</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(LeNet, self).__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">3</span>, <span class="number">6</span>, <span class="number">5</span>)</span><br><span class="line">        self.conv2 = nn.Conv2d(<span class="number">6</span>, <span class="number">16</span>, <span class="number">5</span>)</span><br><span class="line">        self.fc1 = nn.Linear(in_features=<span class="number">16</span>*<span class="number">5</span>*<span class="number">5</span>, out_features=<span class="number">120</span>)</span><br><span class="line">        self.fc2 = nn.Linear(in_features=<span class="number">120</span>, out_features=<span class="number">84</span>)</span><br><span class="line">        self.fc3 = nn.Linear(in_features=<span class="number">84</span>, out_features=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self,x</span>):</span></span><br><span class="line">        out = F.relu(self.conv1(x)) <span class="comment"># 3*32*32 -&gt; 6*28*28</span></span><br><span class="line">        out = F.max_pool2d(out,<span class="number">2</span>) <span class="comment"># 6*28*28 -&gt; 6*14*14</span></span><br><span class="line">        out = F.relu(self.conv2(out)) <span class="comment"># 6*14*14 -&gt; 16*10*10</span></span><br><span class="line">        out = F.max_pool2d(out, <span class="number">2</span>) <span class="comment"># 16*10*10 -&gt; 16*5*5</span></span><br><span class="line">        out = out.view(out.size(<span class="number">0</span>), -<span class="number">1</span>) <span class="comment"># 16*5*5 -&gt; 400</span></span><br><span class="line"></span><br><span class="line">        out = F.relu(self.fc1(out))</span><br><span class="line">        out = F.relu(self.fc2(out))</span><br><span class="line">        out = self.fc3(out)</span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure><h4 id="AlexNet"><a href="#AlexNet" class="headerlink" title="AlexNet"></a>AlexNet</h4><p>2012å¹´ï¼ŒAlexNetæ¨ªç©ºå‡ºä¸–ã€‚å®ƒé¦–æ¬¡è¯æ˜äº†å­¦ä¹ åˆ°çš„ç‰¹å¾å¯ä»¥è¶…è¶Šæ‰‹å·¥è®¾è®¡çš„ç‰¹å¾ã€‚å®ƒä¸€ä¸¾æ‰“ç ´äº†è®¡ç®—æœºè§†è§‰ç ”ç©¶çš„ç°çŠ¶ã€‚ AlexNetä½¿ç”¨äº†8å±‚å·ç§¯ç¥ç»ç½‘ç»œï¼Œå¹¶ä»¥å¾ˆå¤§çš„ä¼˜åŠ¿èµ¢å¾—äº†2012å¹´ImageNetå›¾åƒè¯†åˆ«æŒ‘æˆ˜èµ›ã€‚</p><p>AlexNetå’ŒLeNetçš„æ¶æ„éå¸¸ç›¸ä¼¼</p><p><img data-src="https://s2.loli.net/2023/08/03/olDupY69gcaJGH3.png" alt="image-20230803213645408" style="zoom:67%;" /></p><p>AlexNetå’ŒLeNetçš„è®¾è®¡ç†å¿µéå¸¸ç›¸ä¼¼ï¼Œä½†ä¹Ÿå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚</p><ol><li>AlexNetæ¯”ç›¸å¯¹è¾ƒå°çš„LeNet5è¦æ·±å¾—å¤šã€‚AlexNetç”±å…«å±‚ç»„æˆï¼šäº”ä¸ªå·ç§¯å±‚ã€ä¸¤ä¸ªå…¨è¿æ¥éšè—å±‚å’Œä¸€ä¸ªå…¨è¿æ¥è¾“å‡ºå±‚ã€‚</li><li>AlexNetä½¿ç”¨ReLUè€Œä¸æ˜¯sigmoidä½œä¸ºå…¶æ¿€æ´»å‡½æ•°ã€‚</li></ol><p>AlexNeté€šè¿‡<code>DropOut</code>æ§åˆ¶å…¨è¿æ¥å±‚çš„æ¨¡å‹å¤æ‚åº¦ï¼Œè€ŒLeNetåªä½¿ç”¨äº†æƒé‡è¡°å‡ã€‚ ä¸ºäº†è¿›ä¸€æ­¥æ‰©å……æ•°æ®ï¼ŒAlexNetåœ¨è®­ç»ƒæ—¶å¢åŠ äº†å¤§é‡çš„å›¾åƒå¢å¼ºæ•°æ®ï¼Œå¦‚ç¿»è½¬ã€è£åˆ‡å’Œå˜è‰²ã€‚ è¿™ä½¿å¾—æ¨¡å‹æ›´å¥å£®ï¼Œæ›´å¤§çš„æ ·æœ¬é‡æœ‰æ•ˆåœ°å‡å°‘äº†è¿‡æ‹Ÿåˆã€‚ åœ¨ <a href="https://zh-v2.d2l.ai/chapter_computer-vision/image-augmentation.html#sec-image-augmentation">13.1èŠ‚</a>ä¸­æ›´è¯¦ç»†åœ°è®¨è®ºæ•°æ®æ‰©å¢ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlexNet</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.features = nn.Sequential(</span><br><span class="line">            nn.Conv2d(<span class="number">3</span>, <span class="number">64</span>, kernel_size=<span class="number">11</span>, stride=<span class="number">4</span>, padding=<span class="number">2</span>), <span class="comment"># 3*224*224 -&gt; 64*55*55</span></span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.MaxPool2d(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>), <span class="comment"># 64*55*55 -&gt; 64*27*27</span></span><br><span class="line">            nn.Conv2d(<span class="number">64</span>, <span class="number">192</span>, kernel_size=<span class="number">5</span>, padding=<span class="number">2</span>), <span class="comment"># 64*27*27 -&gt; 192*27*27</span></span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.MaxPool2d(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>), <span class="comment"># 192*27*27 -&gt; 192*13*13</span></span><br><span class="line">            nn.Conv2d(<span class="number">192</span>, <span class="number">384</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>), <span class="comment"># 192*13*13 -&gt; 384*13*13</span></span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.Conv2d(<span class="number">384</span>, <span class="number">256</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>), <span class="comment"># 384*13*13 -&gt; 256*13*13</span></span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.Conv2d(<span class="number">256</span>, <span class="number">256</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>), <span class="comment"># 256*13*13 -&gt; 256*13*13</span></span><br><span class="line">            nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">            nn.MaxPool2d(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>), <span class="comment"># 256*13*13 -&gt; 256*6*6</span></span><br><span class="line">        )</span><br><span class="line">        self.fc = nn.Linear(<span class="number">256</span>,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self,x</span>):</span></span><br><span class="line">        out = self.features(x)</span><br><span class="line">        out = out.view(out.size(<span class="number">0</span>), -<span class="number">1</span>)</span><br><span class="line">        out = self.fc(out)</span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure><h4 id="VGGNet"><a href="#VGGNet" class="headerlink" title="VGGNet"></a>VGGNet</h4><blockquote><p>AlexNetè¯æ˜æ·±å±‚ç¥ç»ç½‘ç»œå“æœ‰æˆæ•ˆï¼Œä½†å®ƒæ²¡æœ‰æä¾›ä¸€ä¸ªé€šç”¨çš„æ¨¡æ¿æ¥æŒ‡å¯¼åç»­çš„ç ”ç©¶äººå‘˜è®¾è®¡æ–°çš„ç½‘ç»œ</p></blockquote><p><img data-src="https://zh-v2.d2l.ai/_images/vgg.svg" alt="../_images/vgg.svg" style="zoom:50%;" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Variable</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cfg = &#123;</span><br><span class="line">    <span class="string">&#x27;VGG11&#x27;</span>: [<span class="number">64</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">128</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">256</span>, <span class="number">256</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="string">&#x27;M&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;VGG13&#x27;</span>: [<span class="number">64</span>, <span class="number">64</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">128</span>, <span class="number">128</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">256</span>, <span class="number">256</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="string">&#x27;M&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;VGG16&#x27;</span>: [<span class="number">64</span>, <span class="number">64</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">128</span>, <span class="number">128</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">256</span>, <span class="number">256</span>, <span class="number">256</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="string">&#x27;M&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;VGG19&#x27;</span>: [<span class="number">64</span>, <span class="number">64</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">128</span>, <span class="number">128</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">256</span>, <span class="number">256</span>, <span class="number">256</span>, <span class="number">256</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="string">&#x27;M&#x27;</span>],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VGG</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, vgg_name</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(VGG, self).__init__()</span><br><span class="line">        self.features = self._make_layers(cfg[vgg_name])</span><br><span class="line">        self.classifier = nn.Linear(<span class="number">512</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        out = self.features(x)</span><br><span class="line">        out = out.view(out.size(<span class="number">0</span>), -<span class="number">1</span>)</span><br><span class="line">        out = self.classifier(out)</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_make_layers</span>(<span class="params">self, cfg</span>):</span></span><br><span class="line">        layers = []</span><br><span class="line">        in_channels = <span class="number">3</span></span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> cfg:</span><br><span class="line">            <span class="keyword">if</span> x == <span class="string">&#x27;M&#x27;</span>:</span><br><span class="line">                layers += [nn.MaxPool2d(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                layers += [nn.Conv2d(in_channels, x, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>),</span><br><span class="line">                           nn.BatchNorm2d(x),</span><br><span class="line">                           nn.ReLU(inplace=<span class="literal">True</span>)]</span><br><span class="line">                in_channels = x</span><br><span class="line">        layers += [nn.AvgPool2d(kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>)]</span><br><span class="line">        <span class="keyword">return</span> nn.Sequential(*layers)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">VGG16</span>():</span></span><br><span class="line">    <span class="keyword">return</span> VGG(<span class="string">&#x27;VGG16&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">VGG19</span>():</span></span><br><span class="line">    <span class="keyword">return</span> VGG(<span class="string">&#x27;VGG19&#x27;</span>)</span><br></pre></td></tr></table></figure><p>LeNetã€AlexNetå’ŒVGGéƒ½æœ‰ä¸€ä¸ªå…±åŒçš„è®¾è®¡æ¨¡å¼ï¼šé€šè¿‡ä¸€ç³»åˆ—çš„å·ç§¯å±‚ä¸æ±‡èšå±‚æ¥æå–ç©ºé—´ç»“æ„ç‰¹å¾ï¼›ç„¶åé€šè¿‡å…¨è¿æ¥å±‚å¯¹ç‰¹å¾çš„è¡¨å¾è¿›è¡Œå¤„ç†ã€‚</p><h4 id="NiN"><a href="#NiN" class="headerlink" title="NiN"></a>NiN</h4><p><strong>1x1å·ç§¯</strong></p><blockquote><p>LeNetã€AlexNetå’ŒVGGéƒ½æœ‰ä¸€ä¸ªå…±åŒçš„è®¾è®¡æ¨¡å¼ï¼šé€šè¿‡ä¸€ç³»åˆ—çš„å·ç§¯å±‚ä¸æ±‡èšå±‚æ¥æå–ç©ºé—´ç»“æ„ç‰¹å¾ï¼›ç„¶åé€šè¿‡å…¨è¿æ¥å±‚å¯¹ç‰¹å¾çš„è¡¨å¾è¿›è¡Œå¤„ç†ã€‚ AlexNetå’ŒVGGå¯¹LeNetçš„æ”¹è¿›ä¸»è¦åœ¨äºå¦‚ä½•æ‰©å¤§å’ŒåŠ æ·±è¿™ä¸¤ä¸ªæ¨¡å—ã€‚ æˆ–è€…ï¼Œå¯ä»¥æƒ³è±¡åœ¨è¿™ä¸ªè¿‡ç¨‹çš„æ—©æœŸä½¿ç”¨å…¨è¿æ¥å±‚ã€‚ç„¶è€Œï¼Œå¦‚æœä½¿ç”¨äº†å…¨è¿æ¥å±‚ï¼Œå¯èƒ½ä¼šå®Œå…¨æ”¾å¼ƒè¡¨å¾çš„ç©ºé—´ç»“æ„ã€‚ <em>ç½‘ç»œä¸­çš„ç½‘ç»œ</em>ï¼ˆ<em>NiN</em>ï¼‰æä¾›äº†ä¸€ä¸ªéå¸¸ç®€å•çš„è§£å†³æ–¹æ¡ˆï¼š<strong>åœ¨æ¯ä¸ªåƒç´ çš„é€šé“ä¸Šåˆ†åˆ«ä½¿ç”¨å¤šå±‚æ„ŸçŸ¥æœº</strong></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚è€ƒAlexNetè®¾è®¡</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NiN</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, num_labels</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(NiN, self).__init__()</span><br><span class="line">        self.net = nn.Sequential(</span><br><span class="line">            self.nin_block(in_channels=<span class="number">3</span>, out_channels=<span class="number">96</span>, kernel_size=<span class="number">11</span>, stride=<span class="number">4</span>, padding=<span class="number">2</span>),</span><br><span class="line">            nn.Dropout(p=<span class="number">0.5</span>),</span><br><span class="line">            nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>),</span><br><span class="line">            self.nin_block(in_channels=<span class="number">96</span>, out_channels=<span class="number">256</span>, kernel_size=<span class="number">5</span>, stride=<span class="number">1</span>, padding=<span class="number">2</span>),</span><br><span class="line">            nn.Dropout(p=<span class="number">0.5</span>),</span><br><span class="line">            nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>),</span><br><span class="line">            self.nin_block(in_channels=<span class="number">256</span>, out_channels=<span class="number">384</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>),</span><br><span class="line">            nn.Dropout(p=<span class="number">0.5</span>),</span><br><span class="line">            nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>),</span><br><span class="line">            self.nin_block(in_channels=<span class="number">384</span>, out_channels=num_labels, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>),</span><br><span class="line">            nn.AdaptiveAvgPool2d((<span class="number">1</span>, <span class="number">1</span>)),</span><br><span class="line">            nn.Flatten()</span><br><span class="line">        )</span><br><span class="line">        self.init_weight()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self,x</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.net(x)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">init_weight</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">for</span> layer <span class="keyword">in</span> self.net:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(layer, nn.Conv2d):</span><br><span class="line">                nn.init.kaiming_normal_(layer.weight, mode=<span class="string">&#x27;fan_out&#x27;</span>, nonlinearity=<span class="string">&#x27;relu&#x27;</span>)</span><br><span class="line">                nn.init.constant_(layer.bias, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">nin_block</span>(<span class="params">self, in_channels, out_channels, kernel_size, stride, padding</span>):</span></span><br><span class="line">        <span class="keyword">return</span> nn.Sequential(</span><br><span class="line">            nn.Conv2d(in_channels=in_channels, out_channels=out_channels, kernel_size=kernel_size, stride=stride,</span><br><span class="line">                      padding=padding),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Conv2d(in_channels=out_channels, out_channels=out_channels, kernel_size=(<span class="number">1</span>, <span class="number">1</span>), stride=(<span class="number">1</span>, <span class="number">1</span>)),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Conv2d(in_channels=out_channels, out_channels=out_channels, kernel_size=(<span class="number">1</span>, <span class="number">1</span>), stride=(<span class="number">1</span>, <span class="number">1</span>)),</span><br><span class="line">            nn.ReLU()</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_output_shape</span>(<span class="params">self</span>):</span></span><br><span class="line">        test_img = torch.rand(size=(<span class="number">1</span>, <span class="number">3</span>, <span class="number">227</span>, <span class="number">227</span>), dtype=torch.float32)</span><br><span class="line">        <span class="keyword">for</span> layer <span class="keyword">in</span> self.net:</span><br><span class="line">            test_img = layer(test_img)</span><br><span class="line">            <span class="built_in">print</span>(layer.__class__.__name__, <span class="string">&#x27;output shape: \t&#x27;</span>, test_img.shape)</span><br></pre></td></tr></table></figure><p>NiNçš„æƒ³æ³•æ˜¯åœ¨æ¯ä¸ªåƒç´ ä½ç½®ï¼ˆé’ˆå¯¹æ¯ä¸ªé«˜åº¦å’Œå®½åº¦ï¼‰åº”ç”¨ä¸€ä¸ªå…¨è¿æ¥å±‚ã€‚ å¦‚æœæˆ‘ä»¬å°†æƒé‡è¿æ¥åˆ°æ¯ä¸ªç©ºé—´ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è§†ä¸º1Ã—1å·ç§¯å±‚ï¼Œæˆ–ä½œä¸ºåœ¨æ¯ä¸ªåƒç´ ä½ç½®ä¸Šç‹¬ç«‹ä½œç”¨çš„å…¨è¿æ¥å±‚ã€‚ä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œå³å°†ç©ºé—´ç»´åº¦ä¸­çš„æ¯ä¸ªåƒç´ è§†ä¸ºå•ä¸ªæ ·æœ¬ï¼Œå°†é€šé“ç»´åº¦è§†ä¸ºä¸åŒç‰¹å¾ï¼ˆfeatureï¼‰</p><h4 id="GoogleNet"><a href="#GoogleNet" class="headerlink" title="GoogleNet"></a>GoogleNet</h4><p>GoogLeNetå¸æ”¶äº†NiNä¸­ä¸²è”ç½‘ç»œçš„æ€æƒ³ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šåšäº†æ”¹è¿›ã€‚ GoogleNetæ ¸å¿ƒæ˜¯æå‡ºäº†<code>Inception</code>è¿™ç§æ¨¡å—.</p><p>è¿™ç¯‡è®ºæ–‡çš„ä¸€ä¸ªé‡ç‚¹æ˜¯è§£å†³äº†ä»€ä¹ˆæ ·å¤§å°çš„å·ç§¯æ ¸æœ€åˆé€‚çš„é—®é¢˜ã€‚ </p><p><img data-src="https://zh-v2.d2l.ai/_images/inception.svg" alt="../_images/inception.svg"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> torch.nn <span class="keyword">import</span> functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> d2l <span class="keyword">import</span> torch <span class="keyword">as</span> d2l</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Inception</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="comment"># c1--c4æ˜¯æ¯æ¡è·¯å¾„çš„è¾“å‡ºé€šé“æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, in_channels, c1, c2, c3, c4, **kwargs</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Inception, self).__init__(**kwargs)</span><br><span class="line">        <span class="comment"># çº¿è·¯1ï¼Œå•1x1å·ç§¯å±‚</span></span><br><span class="line">        self.p1_1 = nn.Conv2d(in_channels, c1, kernel_size=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># çº¿è·¯2ï¼Œ1x1å·ç§¯å±‚åæ¥3x3å·ç§¯å±‚</span></span><br><span class="line">        self.p2_1 = nn.Conv2d(in_channels, c2[<span class="number">0</span>], kernel_size=<span class="number">1</span>)</span><br><span class="line">        self.p2_2 = nn.Conv2d(c2[<span class="number">0</span>], c2[<span class="number">1</span>], kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># çº¿è·¯3ï¼Œ1x1å·ç§¯å±‚åæ¥5x5å·ç§¯å±‚</span></span><br><span class="line">        self.p3_1 = nn.Conv2d(in_channels, c3[<span class="number">0</span>], kernel_size=<span class="number">1</span>)</span><br><span class="line">        self.p3_2 = nn.Conv2d(c3[<span class="number">0</span>], c3[<span class="number">1</span>], kernel_size=<span class="number">5</span>, padding=<span class="number">2</span>)</span><br><span class="line">        <span class="comment"># çº¿è·¯4ï¼Œ3x3æœ€å¤§æ±‡èšå±‚åæ¥1x1å·ç§¯å±‚</span></span><br><span class="line">        self.p4_1 = nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.p4_2 = nn.Conv2d(in_channels, c4, kernel_size=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        p1 = F.relu(self.p1_1(x))</span><br><span class="line">        p2 = F.relu(self.p2_2(F.relu(self.p2_1(x))))</span><br><span class="line">        p3 = F.relu(self.p3_2(F.relu(self.p3_1(x))))</span><br><span class="line">        p4 = F.relu(self.p4_2(self.p4_1(x)))</span><br><span class="line">        <span class="comment"># åœ¨é€šé“ç»´åº¦ä¸Šè¿ç»“è¾“å‡º</span></span><br><span class="line">        <span class="keyword">return</span> torch.cat((p1, p2, p3, p4), dim=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p><img data-src="https://zh-v2.d2l.ai/_images/inception-full.svg" alt="../_images/inception-full.svg" style="zoom: 67%;" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">b1 = nn.Sequential(nn.Conv2d(<span class="number">1</span>, <span class="number">64</span>, kernel_size=<span class="number">7</span>, stride=<span class="number">2</span>, padding=<span class="number">3</span>),</span><br><span class="line">                   nn.ReLU(),</span><br><span class="line">                   nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>))</span><br><span class="line">b2 = nn.Sequential(nn.Conv2d(<span class="number">64</span>, <span class="number">64</span>, kernel_size=<span class="number">1</span>),</span><br><span class="line">                   nn.ReLU(),</span><br><span class="line">                   nn.Conv2d(<span class="number">64</span>, <span class="number">192</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>),</span><br><span class="line">                   nn.ReLU(),</span><br><span class="line">                   nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>))</span><br><span class="line">b3 = nn.Sequential(Inception(<span class="number">192</span>, <span class="number">64</span>, (<span class="number">96</span>, <span class="number">128</span>), (<span class="number">16</span>, <span class="number">32</span>), <span class="number">32</span>),</span><br><span class="line">                   Inception(<span class="number">256</span>, <span class="number">128</span>, (<span class="number">128</span>, <span class="number">192</span>), (<span class="number">32</span>, <span class="number">96</span>), <span class="number">64</span>),</span><br><span class="line">                   nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>))</span><br><span class="line">b4 = nn.Sequential(Inception(<span class="number">480</span>, <span class="number">192</span>, (<span class="number">96</span>, <span class="number">208</span>), (<span class="number">16</span>, <span class="number">48</span>), <span class="number">64</span>),</span><br><span class="line">                   Inception(<span class="number">512</span>, <span class="number">160</span>, (<span class="number">112</span>, <span class="number">224</span>), (<span class="number">24</span>, <span class="number">64</span>), <span class="number">64</span>),</span><br><span class="line">                   Inception(<span class="number">512</span>, <span class="number">128</span>, (<span class="number">128</span>, <span class="number">256</span>), (<span class="number">24</span>, <span class="number">64</span>), <span class="number">64</span>),</span><br><span class="line">                   Inception(<span class="number">512</span>, <span class="number">112</span>, (<span class="number">144</span>, <span class="number">288</span>), (<span class="number">32</span>, <span class="number">64</span>), <span class="number">64</span>),</span><br><span class="line">                   Inception(<span class="number">528</span>, <span class="number">256</span>, (<span class="number">160</span>, <span class="number">320</span>), (<span class="number">32</span>, <span class="number">128</span>), <span class="number">128</span>),</span><br><span class="line">                   nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>))</span><br><span class="line">b5 = nn.Sequential(Inception(<span class="number">832</span>, <span class="number">256</span>, (<span class="number">160</span>, <span class="number">320</span>), (<span class="number">32</span>, <span class="number">128</span>), <span class="number">128</span>),</span><br><span class="line">                   Inception(<span class="number">832</span>, <span class="number">384</span>, (<span class="number">192</span>, <span class="number">384</span>), (<span class="number">48</span>, <span class="number">128</span>), <span class="number">128</span>),</span><br><span class="line">                   nn.AdaptiveAvgPool2d((<span class="number">1</span>,<span class="number">1</span>)),</span><br><span class="line">                   nn.Flatten())</span><br><span class="line"></span><br><span class="line">net = nn.Sequential(b1, b2, b3, b4, b5, nn.Linear(<span class="number">1024</span>, <span class="number">10</span>))</span><br></pre></td></tr></table></figure><blockquote><p>å¯¹ç”±å¤šä¸ªè¾“å…¥å¹³é¢ç»„æˆçš„è¾“å…¥ä¿¡å·è¿›è¡ŒäºŒç»´è‡ªé€‚åº”å¹³å‡æ± åŒ–å¤„ç†ã€‚</p><p>å¯¹äºä»»ä½•è¾“å…¥å°ºå¯¸ï¼Œè¾“å‡ºçš„å°ºå¯¸éƒ½æ˜¯ H x Wã€‚è¾“å‡ºç‰¹å¾çš„æ•°é‡ç­‰äºè¾“å…¥å¹³é¢çš„æ•°é‡ã€‚</p></blockquote><p>nn.AdaptiveAvgPool2d((1,1))ï¼Œé¦–å…ˆè¿™å¥è¯çš„å«ä¹‰æ˜¯ä½¿å¾—æ± åŒ–åçš„æ¯ä¸ªé€šé“ä¸Šçš„å¤§å°æ˜¯ä¸€ä¸ª1x1çš„ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªé€šé“ä¸Šåªæœ‰ä¸€ä¸ªåƒç´ ç‚¹ã€‚ï¼ˆ1ï¼Œ1ï¼‰è¡¨ç¤ºçš„outputsizeã€‚</p><h5 id="Inception-V1"><a href="#Inception-V1" class="headerlink" title="Inception V1"></a>Inception V1</h5><p>ä½¿ç”¨äº†å…¨å±€å¹³å‡æ± åŒ–</p><h5 id="Inception-V2"><a href="#Inception-V2" class="headerlink" title="Inception V2"></a>Inception V2</h5><p>ä½¿ç”¨Batch Normalizationï¼ŒåŠ å¿«æ¨¡å‹è®­ç»ƒé€Ÿåº¦ï¼›<br>ä½¿ç”¨ä¸¤ä¸ª3x3çš„å·ç§¯ä»£æ›¿5x5çš„å¤§å·ç§¯ï¼Œé™ä½äº†å‚æ•°æ•°é‡å¹¶å‡è½»äº†è¿‡æ‹Ÿåˆ</p><h5 id="Inception-V3"><a href="#Inception-V3" class="headerlink" title="Inception V3"></a>Inception V3</h5><blockquote><p>Inception V3ä¸€ä¸ªæœ€é‡è¦çš„æ”¹è¿›æ˜¯å·ç§¯åˆ†è§£ï¼ˆFactorizationï¼‰ï¼Œå°†7x7å·ç§¯åˆ†è§£æˆä¸¤ä¸ªä¸€ç»´çš„å·ç§¯ä¸²è”ï¼ˆ1x7å’Œ7x1ï¼‰ï¼Œ3x3å·ç§¯åˆ†è§£ä¸ºä¸¤ä¸ªä¸€ç»´çš„å·ç§¯ä¸²è”ï¼ˆ1x3å’Œ3x1ï¼‰ï¼Œè¿™æ ·æ—¢å¯ä»¥åŠ é€Ÿè®¡ç®—ï¼Œåˆå¯ä½¿ç½‘ç»œæ·±åº¦è¿›ä¸€æ­¥å¢åŠ ï¼Œå¢åŠ äº†ç½‘ç»œçš„éçº¿æ€§ï¼ˆæ¯å¢åŠ ä¸€å±‚éƒ½è¦è¿›è¡ŒReLUï¼‰</p></blockquote><p><img data-src="https://img-blog.csdnimg.cn/20190827133529424.png" alt="img" style="zoom: 67%;" /></p><h5 id="Inception-V4"><a href="#Inception-V4" class="headerlink" title="Inception V4"></a>Inception V4</h5><p>inception v4æŠŠåŸæ¥çš„inceptionç»“æ„ä¸­åŠ å…¥äº†ResNetä¸­çš„Residual Blocksç»“æ„ï¼ŒæŠŠä¸€äº›å±‚çš„è¾“å‡ºåŠ ä¸Šå‰å‡ å±‚çš„è¾“å‡ºï¼Œè¿™æ ·ä¸­é—´è¿™å‡ å±‚å­¦ä¹ çš„å®é™…ä¸Šæ˜¯æ®‹å·®ã€‚</p><h4 id="ResNet"><a href="#ResNet" class="headerlink" title="ResNet"></a>ResNet</h4><p>å‡è®¾æˆ‘ä»¬çš„åŸå§‹è¾“å…¥ä¸ºxï¼Œè€Œå¸Œæœ›å­¦å‡ºçš„ç†æƒ³æ˜ å°„ä¸ºf(x)ï¼ˆä½œä¸ºä¸Šæ–¹æ¿€æ´»å‡½æ•°çš„è¾“å…¥ï¼‰ã€‚å·¦å›¾è™šçº¿æ¡†ä¸­çš„éƒ¨åˆ†éœ€è¦ç›´æ¥æ‹Ÿåˆå‡ºè¯¥æ˜ å°„f(x)ï¼Œè€Œå³å›¾è™šçº¿æ¡†ä¸­çš„éƒ¨åˆ†åˆ™éœ€è¦æ‹Ÿåˆå‡ºæ®‹å·®æ˜ å°„f(x)âˆ’xã€‚ æ®‹å·®æ˜ å°„åœ¨ç°å®ä¸­å¾€å¾€æ›´å®¹æ˜“ä¼˜åŒ–ã€‚ ä»¥æœ¬èŠ‚å¼€å¤´æåˆ°çš„æ’ç­‰æ˜ å°„ä½œä¸ºæˆ‘ä»¬å¸Œæœ›å­¦å‡ºçš„ç†æƒ³æ˜ å°„f(x)ï¼Œæˆ‘ä»¬åªéœ€å°†å³å›¾è™šçº¿æ¡†å†…ä¸Šæ–¹çš„åŠ æƒè¿ç®—ï¼ˆå¦‚ä»¿å°„ï¼‰çš„æƒé‡å’Œåç½®å‚æ•°è®¾æˆ0ï¼Œé‚£ä¹ˆf(x)å³ä¸ºæ’ç­‰æ˜ å°„ã€‚ å®é™…ä¸­ï¼Œå½“ç†æƒ³æ˜ å°„f(x)ææ¥è¿‘äºæ’ç­‰æ˜ å°„æ—¶ï¼Œæ®‹å·®æ˜ å°„ä¹Ÿæ˜“äºæ•æ‰æ’ç­‰æ˜ å°„çš„ç»†å¾®æ³¢åŠ¨ã€‚ å³å›¾æ˜¯ResNetçš„åŸºç¡€æ¶æ„â€“<em>æ®‹å·®å—</em>ï¼ˆresidual blockï¼‰ã€‚ åœ¨æ®‹å·®å—ä¸­ï¼Œè¾“å…¥å¯é€šè¿‡è·¨å±‚æ•°æ®çº¿è·¯æ›´å¿«åœ°å‘å‰ä¼ æ’­ã€‚</p><p><img data-src="https://zh-v2.d2l.ai/_images/residual-block.svg" alt="../_images/residual-block.svg" style="zoom:67%;" /></p><blockquote><p>ResNetæ²¿ç”¨äº†VGGå®Œæ•´çš„3Ã—3å·ç§¯å±‚è®¾è®¡ã€‚ æ®‹å·®å—é‡Œé¦–å…ˆæœ‰2ä¸ªæœ‰ç›¸åŒè¾“å‡ºé€šé“æ•°çš„3Ã—3å·ç§¯å±‚ã€‚ æ¯ä¸ªå·ç§¯å±‚åæ¥ä¸€ä¸ªæ‰¹é‡è§„èŒƒåŒ–å±‚å’ŒReLUæ¿€æ´»å‡½æ•°ã€‚ ç„¶åæˆ‘ä»¬é€šè¿‡è·¨å±‚æ•°æ®é€šè·¯ï¼Œè·³è¿‡è¿™2ä¸ªå·ç§¯è¿ç®—ï¼Œå°†è¾“å…¥ç›´æ¥åŠ åœ¨æœ€åçš„ReLUæ¿€æ´»å‡½æ•°å‰ã€‚ è¿™æ ·çš„è®¾è®¡è¦æ±‚2ä¸ªå·ç§¯å±‚çš„è¾“å‡ºä¸è¾“å…¥å½¢çŠ¶ä¸€æ ·ï¼Œä»è€Œä½¿å®ƒä»¬å¯ä»¥ç›¸åŠ ã€‚ å¦‚æœæƒ³æ”¹å˜é€šé“æ•°ï¼Œå°±éœ€è¦å¼•å…¥ä¸€ä¸ªé¢å¤–çš„1Ã—1å·ç§¯å±‚æ¥å°†è¾“å…¥å˜æ¢æˆéœ€è¦çš„å½¢çŠ¶åå†åšç›¸åŠ è¿ç®—</p></blockquote><p><img data-src="https://zh-v2.d2l.ai/_images/resnet-block.svg" alt="../_images/resnet-block.svg" style="zoom:80%;" /></p><p><img data-src="https://zh-v2.d2l.ai/_images/resnet18.svg" alt="../_images/resnet18.svg" style="zoom:67%;" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ®‹å·®å—  é€šè¿‡å·ç§¯</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Residual</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, input_channels, num_channels,</span></span></span><br><span class="line"><span class="params"><span class="function">                use_1x1conv=<span class="literal">False</span>, strides=<span class="number">1</span></span>):</span></span><br><span class="line">      <span class="built_in">super</span>().__init__()</span><br><span class="line">      self.conv1 = nn.Conv2d(input_channels, num_channels,</span><br><span class="line">                              kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>, stride=strides)</span><br><span class="line">      self.conv2 = nn.Conv2d(num_channels, num_channels,</span><br><span class="line">                              kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">if</span> use_1x1conv:</span><br><span class="line">          self.conv3 = nn.Conv2d(input_channels, num_channels,</span><br><span class="line">                                  kernel_size=<span class="number">1</span>, stride=strides)</span><br><span class="line">      <span class="keyword">else</span>:</span><br><span class="line">          self.conv3 = <span class="literal">None</span></span><br><span class="line">      self.bn1 = nn.BatchNorm2d(num_channels)</span><br><span class="line">      self.bn2 = nn.BatchNorm2d(num_channels)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, X</span>):</span></span><br><span class="line">      Y = F.relu(self.bn1(self.conv1(X)))</span><br><span class="line">      Y = self.bn2(self.conv2(Y))</span><br><span class="line">      <span class="keyword">if</span> self.conv3:</span><br><span class="line">          X = self.conv3(X)</span><br><span class="line">      Y += X</span><br><span class="line">      <span class="keyword">return</span> F.relu(Y)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ®‹å·®æ¨¡å—</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">resnet_block</span>(<span class="params">input_channels, num_channels, num_residuals,</span></span></span><br><span class="line"><span class="params"><span class="function">                 first_block=<span class="literal">False</span></span>):</span></span><br><span class="line">    blk = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_residuals):</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">and</span> <span class="keyword">not</span> first_block:</span><br><span class="line">            blk.append(Residual(input_channels, num_channels,</span><br><span class="line">                                use_1x1conv=<span class="literal">True</span>, strides=<span class="number">2</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            blk.append(Residual(num_channels, num_channels))</span><br><span class="line">    <span class="keyword">return</span> blk</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">net = nn.Sequential()</span><br><span class="line">net.add(nn.Conv2D(<span class="number">64</span>, kernel_size=<span class="number">7</span>, strides=<span class="number">2</span>, padding=<span class="number">3</span>),</span><br><span class="line">        nn.BatchNorm(), nn.Activation(<span class="string">&#x27;relu&#x27;</span>),</span><br><span class="line">        nn.MaxPool2D(pool_size=<span class="number">3</span>, strides=<span class="number">2</span>, padding=<span class="number">1</span>))</span><br><span class="line">net.add(resnet_block(<span class="number">64</span>, <span class="number">2</span>, first_block=<span class="literal">True</span>),</span><br><span class="line">        resnet_block(<span class="number">128</span>, <span class="number">2</span>),</span><br><span class="line">        resnet_block(<span class="number">256</span>, <span class="number">2</span>),</span><br><span class="line">        resnet_block(<span class="number">512</span>, <span class="number">2</span>))</span><br><span class="line">net.add(nn.GlobalAvgPool2D(), nn.Dense(<span class="number">10</span>))</span><br></pre></td></tr></table></figure><h4 id="DenseNet"><a href="#DenseNet" class="headerlink" title="DenseNet"></a>DenseNet</h4><p><img data-src="https://zh-v2.d2l.ai/_images/densenet-block.svg" alt="../_images/densenet-block.svg"></p><p>ResNetå’ŒDenseNetçš„å…³é”®åŒºåˆ«åœ¨äºï¼ŒDenseNetè¾“å‡ºæ˜¯<em>è¿æ¥</em>ï¼ˆç”¨å›¾ä¸­çš„[,]è¡¨ç¤ºï¼‰è€Œä¸æ˜¯å¦‚ResNetçš„ç®€å•ç›¸åŠ </p><p><img data-src="https://zh-v2.d2l.ai/_images/densenet.svg" alt="../_images/densenet.svg"></p><p>ç¨ å¯†ç½‘ç»œä¸»è¦ç”±2éƒ¨åˆ†æ„æˆï¼š<em>ç¨ å¯†å—</em>ï¼ˆdense blockï¼‰å’Œ<em>è¿‡æ¸¡å±‚</em>ï¼ˆtransition layerï¼‰ã€‚ å‰è€…å®šä¹‰å¦‚ä½•è¿æ¥è¾“å…¥å’Œè¾“å‡ºï¼Œè€Œåè€…åˆ™æ§åˆ¶é€šé“æ•°é‡ï¼Œä½¿å…¶ä¸ä¼šå¤ªå¤æ‚</p><h5 id="denseblock"><a href="#denseblock" class="headerlink" title="denseblock"></a>denseblock</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv_block</span>(<span class="params">input_channels, num_channels</span>):</span></span><br><span class="line">    <span class="keyword">return</span> nn.Sequential(</span><br><span class="line">        nn.BatchNorm2d(input_channels), nn.ReLU(),</span><br><span class="line">        nn.Conv2d(input_channels, num_channels, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>))</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DenseBlock</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, num_convs, input_channels, num_channels</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(DenseBlock, self).__init__()</span><br><span class="line">        layer = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_convs):</span><br><span class="line">            layer.append(conv_block(</span><br><span class="line">                num_channels * i + input_channels, num_channels))</span><br><span class="line">        self.net = nn.Sequential(*layer)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, X</span>):</span></span><br><span class="line">        <span class="keyword">for</span> blk <span class="keyword">in</span> self.net:</span><br><span class="line">            Y = blk(X)</span><br><span class="line">            <span class="comment"># è¿æ¥é€šé“ç»´åº¦ä¸Šæ¯ä¸ªå—çš„è¾“å…¥å’Œè¾“å‡º</span></span><br><span class="line">            X = torch.cat((X, Y), dim=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> X</span><br></pre></td></tr></table></figure><h5 id="transition-layer"><a href="#transition-layer" class="headerlink" title="transition layer"></a>transition layer</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">transition_block</span>(<span class="params">input_channels, num_channels</span>):</span></span><br><span class="line">    <span class="keyword">return</span> nn.Sequential(</span><br><span class="line">        nn.BatchNorm2d(input_channels), nn.ReLU(),</span><br><span class="line">        nn.Conv2d(input_channels, num_channels, kernel_size=<span class="number">1</span>),</span><br><span class="line">        nn.AvgPool2d(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>))</span><br></pre></td></tr></table></figure><p>ç”±äºæ¯ä¸ªç¨ å¯†å—éƒ½ä¼šå¸¦æ¥é€šé“æ•°çš„å¢åŠ ï¼Œä½¿ç”¨è¿‡å¤šåˆ™ä¼šè¿‡äºå¤æ‚åŒ–æ¨¡å‹ã€‚ è€Œè¿‡æ¸¡å±‚å¯ä»¥ç”¨æ¥æ§åˆ¶æ¨¡å‹å¤æ‚åº¦ã€‚ å®ƒé€šè¿‡1Ã—1å·ç§¯å±‚æ¥å‡å°é€šé“æ•°ï¼Œå¹¶ä½¿ç”¨æ­¥å¹…ä¸º2çš„å¹³å‡æ±‡èšå±‚å‡åŠé«˜å’Œå®½ï¼Œä»è€Œè¿›ä¸€æ­¥é™ä½æ¨¡å‹å¤æ‚åº¦.</p><h5 id="DenseNet-1"><a href="#DenseNet-1" class="headerlink" title="DenseNet"></a>DenseNet</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">transition_block</span>(<span class="params">input_channels, num_channels</span>):</span></span><br><span class="line">    <span class="keyword">return</span> nn.Sequential(</span><br><span class="line">        nn.BatchNorm2d(input_channels), nn.ReLU(),</span><br><span class="line">        nn.Conv2d(input_channels, num_channels, kernel_size=<span class="number">1</span>),</span><br><span class="line">        nn.AvgPool2d(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>))</span><br><span class="line"><span class="comment"># num_channelsä¸ºå½“å‰çš„é€šé“æ•°</span></span><br><span class="line">num_channels, growth_rate = <span class="number">64</span>, <span class="number">32</span></span><br><span class="line">num_convs_in_dense_blocks = [<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>]</span><br><span class="line">blks = []</span><br><span class="line"><span class="keyword">for</span> i, num_convs <span class="keyword">in</span> <span class="built_in">enumerate</span>(num_convs_in_dense_blocks):</span><br><span class="line">    blks.append(DenseBlock(num_convs, num_channels, growth_rate))</span><br><span class="line">    <span class="comment"># ä¸Šä¸€ä¸ªç¨ å¯†å—çš„è¾“å‡ºé€šé“æ•°</span></span><br><span class="line">    num_channels += num_convs * growth_rate</span><br><span class="line">    <span class="comment"># åœ¨ç¨ å¯†å—ä¹‹é—´æ·»åŠ ä¸€ä¸ªè½¬æ¢å±‚ï¼Œä½¿é€šé“æ•°é‡å‡åŠ</span></span><br><span class="line">    <span class="keyword">if</span> i != <span class="built_in">len</span>(num_convs_in_dense_blocks) - <span class="number">1</span>:</span><br><span class="line">        blks.append(transition_block(num_channels, num_channels // <span class="number">2</span>))</span><br><span class="line">        num_channels = num_channels // <span class="number">2</span></span><br><span class="line">        </span><br><span class="line">net = nn.Sequential(</span><br><span class="line">    b1, *blks,</span><br><span class="line">    nn.BatchNorm2d(num_channels), nn.ReLU(),</span><br><span class="line">    nn.AdaptiveAvgPool2d((<span class="number">1</span>, <span class="number">1</span>)),</span><br><span class="line">    nn.Flatten(),</span><br><span class="line">    nn.Linear(num_channels, <span class="number">10</span>))</span><br></pre></td></tr></table></figure><p>åœ¨æ¯ä¸ªæ¨¡å—ä¹‹é—´ï¼ŒResNeté€šè¿‡æ­¥å¹…ä¸º2çš„æ®‹å·®å—å‡å°é«˜å’Œå®½ï¼ŒDenseNetåˆ™ä½¿ç”¨è¿‡æ¸¡å±‚æ¥å‡åŠé«˜å’Œå®½ï¼Œå¹¶å‡åŠé€šé“æ•°ã€‚</p><ul><li>åœ¨è·¨å±‚è¿æ¥ä¸Šï¼Œä¸åŒäºResNetä¸­å°†è¾“å…¥ä¸è¾“å‡ºç›¸åŠ ï¼Œç¨ å¯†è¿æ¥ç½‘ç»œï¼ˆDenseNetï¼‰åœ¨é€šé“ç»´ä¸Šè¿ç»“è¾“å…¥ä¸è¾“å‡ºã€‚</li><li>DenseNetçš„ä¸»è¦æ„å»ºæ¨¡å—æ˜¯ç¨ å¯†å—å’Œè¿‡æ¸¡å±‚ã€‚</li><li>åœ¨æ„å»ºDenseNetæ—¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ·»åŠ è¿‡æ¸¡å±‚æ¥æ§åˆ¶ç½‘ç»œçš„ç»´æ•°ï¼Œä»è€Œå†æ¬¡å‡å°‘é€šé“çš„æ•°é‡  </li></ul><h2 id="æ­£åˆ™åŒ–æ–¹å¼"><a href="#æ­£åˆ™åŒ–æ–¹å¼" class="headerlink" title="æ­£åˆ™åŒ–æ–¹å¼"></a>æ­£åˆ™åŒ–æ–¹å¼</h2><h3 id="ä¸åŒçš„normalization"><a href="#ä¸åŒçš„normalization" class="headerlink" title="ä¸åŒçš„normalization"></a>ä¸åŒçš„normalization</h3><blockquote><p>ä¸ºä»€ä¹ˆéœ€è¦æ‰¹é‡è§„èŒƒåŒ–å±‚å‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹è®­ç»ƒç¥ç»ç½‘ç»œæ—¶å‡ºç°çš„ä¸€äº›å®é™…æŒ‘æˆ˜ã€‚</p><p>é¦–å…ˆï¼Œæ•°æ®é¢„å¤„ç†çš„æ–¹å¼é€šå¸¸ä¼šå¯¹æœ€ç»ˆç»“æœäº§ç”Ÿå·¨å¤§å½±å“ã€‚ ä½¿ç”¨çœŸå®æ•°æ®æ—¶ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€æ­¥æ˜¯æ ‡å‡†åŒ–è¾“å…¥ç‰¹å¾ï¼Œä½¿å…¶å¹³å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1ã€‚ ç›´è§‚åœ°è¯´ï¼Œè¿™ç§æ ‡å‡†åŒ–å¯ä»¥å¾ˆå¥½åœ°ä¸æˆ‘ä»¬çš„ä¼˜åŒ–å™¨é…åˆä½¿ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥å°†å‚æ•°çš„é‡çº§è¿›è¡Œç»Ÿä¸€ã€‚</p><p>ç¬¬äºŒï¼Œå¯¹äºå…¸å‹çš„å¤šå±‚æ„ŸçŸ¥æœºæˆ–å·ç§¯ç¥ç»ç½‘ç»œã€‚å½“æˆ‘ä»¬è®­ç»ƒæ—¶ï¼Œä¸­é—´å±‚ä¸­çš„å˜é‡ï¼ˆä¾‹å¦‚ï¼Œå¤šå±‚æ„ŸçŸ¥æœºä¸­çš„ä»¿å°„å˜æ¢è¾“å‡ºï¼‰å¯èƒ½å…·æœ‰æ›´å¹¿çš„å˜åŒ–èŒƒå›´ï¼š<strong>ä¸è®ºæ˜¯æ²¿ç€ä»è¾“å…¥åˆ°è¾“å‡ºçš„å±‚ï¼Œè·¨åŒä¸€å±‚ä¸­çš„å•å…ƒï¼Œæˆ–æ˜¯éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ¨¡å‹å‚æ•°çš„éšç€è®­ç»ƒæ›´æ–°å˜å¹»è«æµ‹ã€‚ æ‰¹é‡è§„èŒƒåŒ–çš„å‘æ˜è€…éæ­£å¼åœ°å‡è®¾ï¼Œè¿™äº›å˜é‡åˆ†å¸ƒä¸­çš„è¿™ç§åç§»å¯èƒ½ä¼šé˜»ç¢ç½‘ç»œçš„æ”¶æ•›</strong>ã€‚ ç›´è§‚åœ°è¯´ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šçŒœæƒ³ï¼Œå¦‚æœä¸€ä¸ªå±‚çš„å¯å˜å€¼æ˜¯å¦ä¸€å±‚çš„100å€ï¼Œè¿™å¯èƒ½éœ€è¦å¯¹å­¦ä¹ ç‡è¿›è¡Œè¡¥å¿è°ƒæ•´ã€‚</p><p>ç¬¬ä¸‰ï¼Œæ›´æ·±å±‚çš„ç½‘ç»œå¾ˆå¤æ‚ï¼Œå®¹æ˜“è¿‡æ‹Ÿåˆã€‚ è¿™æ„å‘³ç€æ­£åˆ™åŒ–å˜å¾—æ›´åŠ é‡è¦ã€‚</p></blockquote><p>Normalizationæœ‰å¤šç§æ–¹å¼,åŒ…æ‹¬BNï¼ŒINï¼ŒGNï¼ŒLN.</p><h4 id="BN-Batch-Normalization"><a href="#BN-Batch-Normalization" class="headerlink" title="BN Batch Normalization"></a>BN Batch Normalization</h4><p><img data-src="https://s2.loli.net/2023/08/11/YpgyB1C3ZQkTbuh.png" alt="image-20230811102021894" style="zoom:50%;" /></p><p><img data-src="https://s2.loli.net/2023/08/10/GpsxiLJhErfyOTb.png" alt="image-20230810201247075"></p><p>å…¶ä¸­Nè¡¨ç¤ºæ ·æœ¬æ•°,Hã€Wè¡¨ç¤ºé«˜å’Œå®½.å¾—åˆ°å‡å€¼å’Œæ ‡å‡†å·®,åˆ©ç”¨è¿™ä¸¤ä¸ªå€¼æ ‡å‡†åŒ–.</p><p>æ‰¹é‡è§„èŒƒåŒ–åº”ç”¨äºå•ä¸ªå¯é€‰å±‚ï¼ˆä¹Ÿå¯ä»¥åº”ç”¨åˆ°æ‰€æœ‰å±‚ï¼‰ï¼Œå…¶åŸç†å¦‚ä¸‹ï¼šåœ¨æ¯æ¬¡è®­ç»ƒè¿­ä»£ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè§„èŒƒåŒ–è¾“å…¥ï¼Œå³é€šè¿‡å‡å»å…¶å‡å€¼å¹¶é™¤ä»¥å…¶æ ‡å‡†å·®ï¼Œå…¶ä¸­ä¸¤è€…å‡åŸºäºå½“å‰å°æ‰¹é‡å¤„ç†ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åº”ç”¨æ¯”ä¾‹ç³»æ•°å’Œæ¯”ä¾‹åç§»ã€‚ æ­£æ˜¯ç”±äºè¿™ä¸ªåŸºäº<em>æ‰¹é‡</em>ç»Ÿè®¡çš„<em>æ ‡å‡†åŒ–</em>ï¼Œæ‰æœ‰äº†<em>æ‰¹é‡è§„èŒƒåŒ–</em>çš„åç§°. ç®€å•æ¥è¯´,å°±æ˜¯å¯¹äºæ¯ä¸ªbatchæ¯ä¸ªé€šé“è®¡ç®—.å¾—åˆ°ä¸‰å¯¹å‡å€¼å’Œæ–¹å·®,ç„¶åå¯¹æ¯ä¸ªé€šé“è§„èŒƒåŒ–.</p><h4 id="IN-Instance-Normalization"><a href="#IN-Instance-Normalization" class="headerlink" title="IN Instance Normalization"></a>IN Instance Normalization</h4><p><img data-src="https://s2.loli.net/2023/08/11/PoVaWGy6FLzpfAi.png" alt="image-20230811102050186" style="zoom:67%;" /></p><blockquote><p>Instance Normalization (IN) æœ€åˆç”¨äºå›¾åƒçš„é£æ ¼è¿ç§»ã€‚ä½œè€…å‘ç°ï¼Œåœ¨ç”Ÿæˆæ¨¡å‹ä¸­ï¼Œ feature map çš„å„ä¸ª channel çš„å‡å€¼å’Œæ–¹å·®ä¼šå½±å“åˆ°æœ€ç»ˆç”Ÿæˆå›¾åƒçš„é£æ ¼ï¼Œå› æ­¤å¯ä»¥å…ˆæŠŠå›¾åƒåœ¨ channel å±‚é¢å½’ä¸€åŒ–ï¼Œç„¶åå†ç”¨ç›®æ ‡é£æ ¼å›¾ç‰‡å¯¹åº” channel çš„å‡å€¼å’Œæ ‡å‡†å·®â€œå»å½’ä¸€åŒ–â€ï¼Œä»¥æœŸè·å¾—ç›®æ ‡å›¾ç‰‡çš„é£æ ¼ã€‚IN æ“ä½œä¹Ÿåœ¨å•ä¸ªæ ·æœ¬å†…éƒ¨è¿›è¡Œï¼Œä¸ä¾èµ– batchã€‚</p></blockquote><p><img data-src="https://s2.loli.net/2023/08/10/HlRGrK9joUJxkip.png" alt="image-20230810204827706"></p><p>ç®€å•ç‚¹æ¥è¯´,å°±æ˜¯å¯¹äºæ¯ä¸ªæ ·æœ¬,ä¸€å¼ å½©å›¾ä¸‰ä¸ªé€šé“è®¡ç®—,batch=1 ç”¨åœ¨ç‰¹å®šä»»åŠ¡æ¯”å¦‚é£æ ¼è¿ç§»ä¸Š.</p><h4 id="GN-Group-Normalization"><a href="#GN-Group-Normalization" class="headerlink" title="GN Group Normalization"></a>GN Group Normalization</h4><p>å¯¹äºç‰¹å®šä»»åŠ¡,batchä¸èƒ½è¿‡å¤§,å¦åˆ™å­˜åœ¨æ˜¾å­˜å ç”¨é—®é¢˜.è€Œä¸€èˆ¬çš„BNè¿™æ—¶å€™è¡¨ç°è¾ƒå·®.GN è®¡ç®—å‡å€¼å’Œæ ‡å‡†å·®æ—¶ï¼ŒæŠŠæ¯ä¸€ä¸ªæ ·æœ¬ feature map çš„ channel åˆ†æˆ G ç»„ï¼Œæ¯ç»„å°†æœ‰ C/G ä¸ª channelï¼Œç„¶åå°†è¿™äº› channel ä¸­çš„å…ƒç´ æ±‚å‡å€¼å’Œæ ‡å‡†å·®ã€‚å„ç»„ channel ç”¨å…¶å¯¹åº”çš„å½’ä¸€åŒ–å‚æ•°ç‹¬ç«‹åœ°å½’ä¸€åŒ–ã€‚</p><p><img data-src="https://s2.loli.net/2023/08/10/Ryfsc9CJhqEMLv3.png" alt="image-20230810205259430" style="zoom: 67%;" /></p><p>å¯¹é€šé“è¿›è¡Œåˆ†ç»„ï¼Œç»Ÿè®¡æ¯ä¸ªåˆ†ç»„é€šé“çš„é«˜åº¦å’Œå®½åº¦ï¼Œå¢å¼ºå¯¹æ‰¹é‡å¤§å°çš„ç¨³å®šæ€§</p><h4 id="LN-Layer-Normalization"><a href="#LN-Layer-Normalization" class="headerlink" title="LN Layer Normalization"></a>LN Layer Normalization</h4><p>åœ¨ä½¿ç”¨BNå±‚æ—¶ï¼Œéœ€è¦çš„å‡è®¾æ˜¯æ¯ä¸ªmini batchåº”è¯¥æ˜¯åŒåˆ†å¸ƒï¼ˆæˆ–è€…è¿‘ä¼¼åŒåˆ†å¸ƒï¼‰çš„ï¼Œå¦‚æœä¸åŒmini batchçš„åˆ†å¸ƒå·®å¼‚è¾ƒå¤§ï¼Œç›¸å½“äºè¿™ä¸ªBNå±‚éœ€è¦å­¦ä¹ ä¸åŒçš„å˜æ¢ï¼Œè¿™ä¾¿æ— æ³•è§£å†³<strong>Internal Covariate Shift</strong>ï¼ˆICS,ä¹Ÿå°±æ˜¯å†…éƒ¨åç§»ï¼‰é—®é¢˜ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨BNå±‚æ—¶ï¼Œbatchsizeå°½å¯èƒ½è°ƒå¤§ã€ä¸”æ•°æ®é›†å½»åº•æ‰“ä¹±ï¼Œå¦åˆ™BNçš„æ•ˆæœä¼šæ˜¾è‘—å˜å·®ã€‚æ˜¾è€Œæ˜“è§ï¼ŒBNä¹Ÿå¹¶ä¸é€‚ç”¨äºéœ€è¦å…ˆåè¾“å…¥æ•°æ®çš„RNNæ¨¡å‹ã€‚</p><p>BNå¹¶ä¸é€‚ç”¨äºåºåˆ—æ¨¡å‹ï¼ˆRNNï¼‰ï¼Œå¯¹äºåºåˆ—æ•°æ®ï¼Œæˆ‘ä»¬å…¶å®æ›´åŠ å…³å¿ƒç‹¬ç«‹çš„æ•°æ®æ ·æœ¬ï¼ˆä¾‹å¦‚ä¸€ä¸ªå¥å­çš„ç‰¹å®šä½ç½®çš„å•è¯ï¼‰ï¼Œå› æ­¤Layer Normalizationå°†æ¯ä¸€æ¡æ•°æ®åšå½’ä¸€åŒ–ã€‚</p><p><img data-src="https://s2.loli.net/2023/08/10/6xSbuFan71pBQYJ.png" alt="image-20230810211021828"></p><p>ç®€å•æ¥è¯´,å°±æ˜¯è®¡ç®—æ‰€æœ‰é€šé“ä¸Šçš„æ•°æ®å¾—åˆ°å‡å€¼å’Œæ ‡å‡†å·®.</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://blog.csdn.net/u010986753/article/details/99191760">GoogleNetã€AleXNetã€VGGNetã€ResNetç­‰æ€»ç»“_å°éº¦ç²’çš„åšå®¢-CSDNåšå®¢</a></li><li><a href="https://zh-v2.d2l.ai/chapter_convolutional-modern/batch-norm.html">7.5. æ‰¹é‡è§„èŒƒåŒ– â€” åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹  2.0.0 documentation (d2l.ai)</a></li><li><a href="https://zhuanlan.zhihu.com/p/91965772">BNã€LNã€INã€GNçš„ç®€ä»‹ - çŸ¥ä¹ (zhihu.com)</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™æ–¹é¢çš„çŸ¥è¯†å®åœ¨æ˜¯å¾ˆå¤š&lt;br&gt;</summary>
    
    
    
    
    <category term="deepLearning" scheme="https://www.sekyoro.top/tags/deepLearning/"/>
    
  </entry>
  
  <entry>
    <title>å¢åŠ live2dçœ‹æ¿å¨˜</title>
    <link href="https://www.sekyoro.top/2023/08/01/%E5%A2%9E%E5%8A%A0live2d%E7%9C%8B%E6%9D%BF%E5%A8%98/"/>
    <id>https://www.sekyoro.top/2023/08/01/%E5%A2%9E%E5%8A%A0live2d%E7%9C%8B%E6%9D%BF%E5%A8%98/</id>
    <published>2023-08-01T13:40:48.000Z</published>
    <updated>2023-08-02T02:25:50.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>çœ‹åˆ°å¯çˆ±çš„çœ‹æ¿å¨˜äº†å—?<br><span id="more"></span><br>å¾ˆå¤šä¸ªäººåšå®¢æˆ–è€…ç½‘ç«™éƒ½æœ‰ä¸€ä¸ªå¯çˆ±çš„çœ‹æ¿å¨˜,è¿™é‡Œä¸»è¦ç”¨çš„å°±æ˜¯ä¸€ä½å¤§ä½¬çš„ä»£ç (è¯¦ç»†çœ‹å‚è€ƒèµ„æ–™),å…¨éƒ½å¯¼å…¥å,ç”¨äºè·å–ä»¥åŠå¤„ç†live2däººç‰©ä»¥åŠå¯¹è¯æ¶ˆæ¯.</p><p><img data-src="https://s2.loli.net/2023/08/02/GLDCzqIf9XHAn2Q.png" alt="image-20230802091503678"></p><h3 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h3><p>ç°åœ¨çš„éœ€æ±‚å°±æ˜¯,åç«¯çš„apiç”¨çš„æ˜¯åˆ«äººçš„æœåŠ¡,live2däººç‰©çš„è¡£æœæ”¾åœ¨githubä¸Š,å¦‚æœä¸ç¿»çš„è¯å¾ˆå¯èƒ½çœ‹ä¸äº†,æ‰€ä»¥ç°åœ¨ä¸»è¦å°±æ˜¯æŠŠåç«¯apiæ”¾åˆ°è‡ªå·±çš„ç½‘ç«™ä¸Š,åŒæ—¶çœ‹èƒ½ä¸èƒ½å¢åŠ ä¸€äº›æ¨¡å‹.</p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p>å¦‚æœæœ‰è‡ªå·±çš„æœåŠ¡å™¨,é‚£ä¹ˆä¸Šé¢å¦‚æœæœ‰phpçš„è¯ç›´æ¥æ”¾ä¸Šå»åŸºæœ¬å°±å¯ä»¥äº†,å¦‚æœä¸æƒ³è¿™ä¹ˆåš,å¯ä»¥ä½¿ç”¨å…¶ä»–çš„æ‰˜ç®¡å·¥å…·,æ¯”å¦‚<code>Vercel</code>,äº‹å®ä¸ŠVercelæ˜¯æ”¯æŒphpçš„,åˆ©ç”¨äº†serverless  functions.è‡³äºå¢åŠ æ›´å¤šæ¨¡å‹,å°±éœ€è¦åˆ°å¤„æ‰¾æ‰¾æˆ–è€…è‡ªå·±ä½¿ç”¨<code>cubsim</code>åˆ¶ä½œäº†.</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ol><li><a href="https://github.com/vercel-community/php/#ï¸-faq">vercel-community/php: ğŸ˜ PHP Runtime for â–² Vercel Serverless Functions (github.com)</a></li><li><a href="https://github.com/stevenjoezhang/live2d-widget">stevenjoezhang/live2d-widget: æŠŠèŒèŒå“’çš„çœ‹æ¿å¨˜æŠ±å›å®¶ (ãƒâ‰§âˆ‡â‰¦)ãƒ | Live2D widget for web platform (github.com)</a></li><li><a href="https://github.com/xiaoski/live2d_models_collection/tree/master">xiaoski/live2d_models_collection: Collections of live2d models (github.com)</a></li><li><a href="https://www.live2d.com/zh-CHS/">Live2D - Live2D Cubismã€å®˜ç½‘ã€‘</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;çœ‹åˆ°å¯çˆ±çš„çœ‹æ¿å¨˜äº†å—?&lt;br&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>æµè§ˆå™¨JS</title>
    <link href="https://www.sekyoro.top/2023/07/30/%E6%B5%8F%E8%A7%88%E5%99%A8JS/"/>
    <id>https://www.sekyoro.top/2023/07/30/%E6%B5%8F%E8%A7%88%E5%99%A8JS/</id>
    <published>2023-07-30T07:46:22.000Z</published>
    <updated>2023-08-01T01:44:22.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>æµè§ˆå™¨çš„ä¸€äº›å¸¸ç”¨jsæ–¹æ³•.ä¸»è¦æ˜¯æµè§ˆçš„å®½é«˜ä»€ä¹ˆçš„,æˆ‘ç»å¸¸å¼„æ··.<br><span id="more"></span></p><p>ç”±äºç»å¸¸æ¶‰åŠæµè§ˆå™¨é‡Œçš„å…ƒç´ <strong>å®½é«˜å±æ€§</strong>ä»¥åŠ<strong>ä¸å…¶ä»–å…ƒç´ é—´çš„è·ç¦»</strong>,è€Œä¸”è¿™è®¾è®¡åˆ°æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜,ç›¸åŒçš„è·å–æ»šåŠ¨æ¡è·ç¦»ä»€ä¹ˆçš„æ–¹æ³•åœ¨ä¸åŒæµè§ˆå™¨å¾ˆå¯èƒ½æ•ˆæœä¸åŒ,è¿™é‡Œå°±ä¼˜å…ˆè€ƒè™‘è°·æ­Œ,Edgeè¿™äº›Chromiumå†…æ ¸çš„.</p><p><img data-src="https://www.runoob.com/wp-content/uploads/2021/10/L0hUTUw15byA5Y-R5paH5qGjL2ltYWdlcy9Dc3NCb3hNb2RlbC5wbmc.png" alt="img" style="zoom: 67%;" /></p><p>è¿™ä¸ªå›¾ä¸Š,ç”±å†…åˆ°å¤–åˆ†åˆ«æ˜¯content,padding,border,margin,ç„¶åæ˜¯å…¶ä»–å¤–å±‚å…ƒç´ .é€šè¿‡è¿™ä¸ªå›¾å¯ä»¥æœ‰ä¸€ä¸ªå¤§è‡´äº†è§£.</p><div class="table-container"><table><thead><tr><th>å…ƒç´ å°ºå¯¸å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>clientWidth</td><td>è·å–å…ƒç´ å¯è§†éƒ¨åˆ†çš„å®½åº¦ï¼Œå³ CSS çš„ width å’Œ padding å±æ€§å€¼ä¹‹å’Œï¼Œå…ƒç´ è¾¹æ¡†å’Œæ»šåŠ¨æ¡ä¸åŒ…æ‹¬åœ¨å†…ï¼Œä¹Ÿä¸åŒ…å«ä»»ä½•å¯èƒ½çš„æ»šåŠ¨åŒºåŸŸ</td></tr><tr><td>clientHeight</td><td>è·å–å…ƒç´ å¯è§†éƒ¨åˆ†çš„é«˜åº¦ï¼Œå³ CSS çš„ height å’Œ padding å±æ€§å€¼ä¹‹å’Œï¼Œå…ƒç´ è¾¹æ¡†å’Œæ»šåŠ¨æ¡ä¸åŒ…æ‹¬åœ¨å†…ï¼Œä¹Ÿä¸åŒ…å«ä»»ä½•å¯èƒ½çš„æ»šåŠ¨åŒºåŸŸ</td></tr><tr><td>offsetWidth</td><td>å…ƒç´ åœ¨é¡µé¢ä¸­å æ®çš„å®½åº¦æ€»å’Œï¼ŒåŒ…æ‹¬ widthã€paddingã€border ä»¥åŠæ»šåŠ¨æ¡çš„å®½åº¦</td></tr><tr><td>offsetHeight</td><td>å…ƒç´ åœ¨é¡µé¢ä¸­å æ®çš„é«˜åº¦æ€»å’Œï¼ŒåŒ…æ‹¬ heightã€paddingã€border ä»¥åŠæ»šåŠ¨æ¡çš„å®½åº¦</td></tr><tr><td>scrollWidth</td><td>å½“å…ƒç´ è®¾ç½®äº† overflow:visible æ ·å¼å±æ€§æ—¶ï¼Œå…ƒç´ çš„æ€»å®½åº¦ï¼Œä¹Ÿç§°æ»šåŠ¨å®½åº¦ã€‚åœ¨é»˜è®¤çŠ¶æ€ä¸‹ï¼Œå¦‚æœè¯¥å±æ€§å€¼å¤§äº clientWidth å±æ€§å€¼ï¼Œåˆ™å…ƒç´ ä¼šæ˜¾ç¤ºæ»šåŠ¨æ¡ï¼Œä»¥ä¾¿èƒ½å¤Ÿç¿»é˜…è¢«éšè—çš„åŒºåŸŸ</td></tr><tr><td>scrollHeight</td><td>å½“å…ƒç´ è®¾ç½®äº† overflow:visible æ ·å¼å±æ€§æ—¶ï¼Œå…ƒç´ çš„æ€»é«˜åº¦ï¼Œä¹Ÿç§°æ»šåŠ¨é«˜åº¦ã€‚åœ¨é»˜è®¤çŠ¶æ€ä¸‹ï¼Œå¦‚æœè¯¥å±æ€§å€¼å¤§äº clientWidth å±æ€§å€¼ï¼Œåˆ™å…ƒç´ ä¼šæ˜¾ç¤ºæ»šåŠ¨æ¡ï¼Œä»¥ä¾¿èƒ½å¤Ÿç¿»é˜…è¢«éšè—çš„åŒºåŸŸ</td></tr></tbody></table></div><p><img data-src="https://s2.loli.net/2023/07/31/nP1rODAi6NhLcy5.png" alt="image-20230731223846471"></p><p>æ¯”å¦‚æ‰“å¼€ä¸€ä¸ªæœ‰æ»šåŠ¨æ¡çš„ç½‘ç«™.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.documentElement.offsetWidth</span><br><span class="line">&gt;<span class="number">863</span></span><br><span class="line"><span class="built_in">document</span>.documentElement.clientWidth</span><br><span class="line">&gt;<span class="number">863</span></span><br><span class="line"><span class="built_in">document</span>.documentElement.scrollWidth</span><br><span class="line">&gt;<span class="number">1200</span></span><br></pre></td></tr></table></figure><p>å…¶ä»–çš„xxxLeft,xxxTopå«ä¹‰ç±»ä¼¼.æ¯”å¦‚clienLeftè¡¨ç¤ºborderçš„å®½åº¦.å¦‚æœè®¾ç½®ç›’æ¨¡å‹ä¸ºborder-box,é‚£ä¹ˆclientWidthå°±ç­‰äºwidth-border-æ»šåŠ¨æ¡,å› ä¸ºborder-boxçš„å®½é«˜åŒ…æ‹¬äº†paddingå’Œborder,è€ŒclientWidthä¸åŒ…æ‹¬borderä»¥åŠæ»šåŠ¨æ¡.</p><p>è€ŒoffsetLeftè¡¨ç¤º<code>å½“å‰å…ƒç´ å·¦ä¸Šè§’ç›¸å¯¹äºoffsetParentå·¦è¾¹ç•Œçš„åç§»</code>,offsetTopåŒç†,è®¡ç®—æ—¶ä¼šä½¿ç”¨å…ƒç´ çš„offsetParentå…ƒç´ çš„paddingã€margin,borderä»¥åŠè‡ªå·±çš„marginè®¡ç®—.</p><p>æœ€åscrolLeftè¡¨ç¤º<code>ä¸€ä¸ªå…ƒç´ çš„å†…å®¹æ°´å¹³æ»šåŠ¨çš„åƒç´ æ•°</code>,æ¯”è¾ƒå¥½ç†è§£,å°±æ˜¯å¦‚æœæœ‰æ»šåŠ¨æ¡çš„è¯,å°±æ˜¯æ»šåŠ¨æ¡æ»šåŠ¨çš„è·ç¦»</p><h3 id="è·å–å¯è§†åŒºåŸŸçš„å®½é«˜"><a href="#è·å–å¯è§†åŒºåŸŸçš„å®½é«˜" class="headerlink" title="è·å–å¯è§†åŒºåŸŸçš„å®½é«˜"></a>è·å–å¯è§†åŒºåŸŸçš„å®½é«˜</h3><ul><li>document.documentElement.clientWidth</li><li>document.documentElement.clientHeight</li></ul><p><img data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bd22ffc2355e4de99d1893ffb1f9667e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="image.png" style="zoom: 50%;" /></p><p>æ³¨æ„,è¿™ä¸ªæ–¹æ³•åœ¨è€çš„IEæµè§ˆå™¨ä¸Šè¡Œä¸é€š.å¯ä»¥çœ‹åˆ°è¿™ä¸ªå®½é«˜ä¸åŒ…æ‹¬margin,borderä»¥åŠå¯èƒ½çš„æ»šåŠ¨æ¡å®½é«˜.æ­¤å¤–æ³¨æ„è¿™ä¸ªå®½é«˜é¡¾åæ€ä¹‰<strong>å¯è§†åŒºåŸŸ</strong>,å¦‚æœæ‰“å¼€å‘è€…å·¥å…·,ä¼šå‘ç°è¿™ä¸ªå·¥å…·ä¹Ÿæ˜¯å å®½é«˜çš„.æµè§ˆå™¨ä¸Šé¢çš„ä»»åŠ¡æ ä»¥åŠæ»šåŠ¨æ¡ä¹Ÿæ˜¯å è·ç¦»çš„.</p><h3 id="è·å–æ»šåŠ¨æ¡è·ç¦»"><a href="#è·å–æ»šåŠ¨æ¡è·ç¦»" class="headerlink" title="è·å–æ»šåŠ¨æ¡è·ç¦»"></a>è·å–æ»šåŠ¨æ¡è·ç¦»</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> scrollTop = <span class="built_in">document</span>.body.scrollTop || (<span class="built_in">document</span>.documentElement &amp;&amp; <span class="built_in">document</span>.documentElement.scrollTop);</span><br></pre></td></tr></table></figure><p>åœ¨è°·æ­Œè¿™ç±»æµè§ˆå™¨ä¸­é€šå¸¸ä½¿ç”¨<code>document.documentElement.scrollTop</code></p><p>è·å–å…ƒç´ </p><p><img data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e7d4a30e10c421faf01df217a71894b~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img" style="zoom:67%;" /></p><h3 id="å±å¹•åˆ†è¾¨ç‡"><a href="#å±å¹•åˆ†è¾¨ç‡" class="headerlink" title="å±å¹•åˆ†è¾¨ç‡"></a>å±å¹•åˆ†è¾¨ç‡</h3><p>å±å¹•åˆ†è¾¨ç‡çš„é«˜ï¼šwindow.screen.height</p><p>å±å¹•åˆ†è¾¨ç‡çš„å®½ï¼šwindow.screen.width</p><p>å±å¹•å¯å·¥ä½œåŒºåŸŸçš„é«˜ï¼šwindow.screen.availHeight</p><p>å±å¹•å¯å·¥ä½œåŒºåŸŸçš„å®½ï¼šwindow.screen.availWidth</p><p>heightå’ŒavailHeightå·®åˆ«æ˜¯ä¼šå—åˆ°ç”µè„‘ä»»åŠ¡æ çš„å½±å“.æ­¤å¤–è¿™ä¸ªå€¼è·Ÿå®é™…å±å¹•åƒç´ ä¸åŒæ˜¯å› ä¸ºæœ‰<code>å±å¹•ç¼©æ”¾å› å­ï¼šwindow.devicePixelRatio</code></p><p>å±å¹•é€»è¾‘åˆ†è¾¨ç‡ï¼šwindow.screen.width * window.devicePixelRatio (ç¼©æ”¾å› å­ä¸ç‰©ç†åˆ†è¾¨ç‡çš„ä¹˜ç§¯)</p><p><img data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2240a67351d6413e8a93d5d7431ea129~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="image.png" style="zoom:50%;" /></p><p>window.screenTopï¼šæµè§ˆå™¨ç›¸å¯¹äºå±å¹•å·¦ä¸Šè§’çš„æ¨ªå‘åç§»å€¼<br>window.screenLeftï¼šæµè§ˆå™¨ç›¸å¯¹äºå±å¹•å·¦ä¸Šè§’çš„çºµå‘åç§»å€¼</p><h3 id="æµè§ˆå™¨çš„å®½é«˜"><a href="#æµè§ˆå™¨çš„å®½é«˜" class="headerlink" title="æµè§ˆå™¨çš„å®½é«˜"></a>æµè§ˆå™¨çš„å®½é«˜</h3><p><img data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/50b6dd61a0a5433fa03ef2c4a17d332f~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="image.png" style="zoom:67%;" /></p><p>æµè§ˆå™¨æ€»é«˜åº¦ï¼šwindow.outerHeight </p><p>æµè§ˆå™¨æ€»å®½åº¦ï¼šwindow.outerWidth  </p><p>æ­¤å¤–è¿˜æœ‰ä¸åŒ…æ‹¬å·¥å…·æ çš„:window.innerHeight  window.innerWidth </p><p><img data-src="https://s2.loli.net/2023/07/31/2xLB5U1Cwgo9lka.png" alt="image-20230731235947161"></p><p>è¿™ä¸¤ä¸ªéƒ½åŒ…æ‹¬æ»šåŠ¨æ¡,å¦‚æœæ²¡æœ‰æ»šåŠ¨æ¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">innerHeight = <span class="built_in">document</span>.documentElement.clientHeight</span><br><span class="line">innerWidth = <span class="built_in">document</span>.documentElement.clientWidth</span><br></pre></td></tr></table></figure><h3 id="å…ƒç´ æ–¹æ³•"><a href="#å…ƒç´ æ–¹æ³•" class="headerlink" title="å…ƒç´ æ–¹æ³•"></a>å…ƒç´ æ–¹æ³•</h3><ol><li><p><code>getBoundingClientRect()</code> :</p><p><code>getBoundingClientRect()</code> ï¼š å¾—åˆ°çŸ©å½¢å…ƒç´ çš„ç•Œçº¿ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«topã€rightã€bottomã€leftå››ä¸ªå±æ€§å€¼ï¼Œå¤§å°éƒ½æ˜¯ç›¸å¯¹äºæµè§ˆå™¨çª—å£topã€leftçš„è·ç¦»ã€‚è¿”å›çš„å†…å®¹ç±»ä¼¼äºï¼š<code>&#123;top: 143, right: 1196, bottom: 165, left: 889&#125;</code>ï¼›</p><hr></li><li><p><code>scrollIntoView()</code> :</p><p><code>obj.scrollIntoView()</code> è®©å…ƒç´ æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸï¼ˆ<code>HTML5æ ‡å‡†</code>ï¼‰ï¼Œå‚æ•°trueä¸æµè§ˆå™¨å¯¹é½ï¼Œfalseå…ƒç´ åœ¨çª—å£å±…ä¸­æ˜¾ç¤ºï¼›</p><hr></li><li><p>event.clientX / event.clientY ï¼š ç›¸å¯¹äºwindowï¼Œä¸ºé¼ æ ‡ç›¸å¯¹äºæµè§ˆå™¨çª—å£çš„åç§»é‡ã€‚</p><p><code>event.clientX</code>é¼ æ ‡åœ¨æ–‡æ¡£çš„æ°´å¹³åæ ‡ï¼›</p><p><code>even.clientY</code>é¼ æ ‡åœ¨æ–‡æ¡£çš„å‚ç›´åæ ‡ï¼›</p></li></ol><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ol><li><p><a href="https://github.com/XIANFESchool/FE-problem-collection/issues/31">jsè·å–æµè§ˆå™¨ä¸­å„ç§å®½ã€é«˜ã€åç§»å€¼ Â· Issue #31 Â· XIANFESchool/FE-problem-collection (github.com)</a></p></li><li><p><a href="https://github.com/sophianbj/JavaScript-accumulation/blob/master/å‰ç«¯å¼€å‘ä¸­çš„å„ç§å®½é«˜æ•´ç†.md">JavaScript-accumulation/å‰ç«¯å¼€å‘ä¸­çš„å„ç§å®½é«˜æ•´ç†.md at master Â· sophianbj/JavaScript-accumulation (github.com)</a></p></li><li><p><a href="https://www.runoob.com/jsref/prop-element-clientleft.html">HTML DOM clientLeft å±æ€§ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p></li><li><p><a href="https://juejin.cn/post/7116306912198524959#heading-3">scrollTopã€clientHeightã€ scrollHeightâ€¦å­¦å®ŒçœŸçš„ç†è§£äº† - æ˜é‡‘ (juejin.cn)</a></p></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;æµè§ˆå™¨çš„ä¸€äº›å¸¸ç”¨jsæ–¹æ³•.ä¸»è¦æ˜¯æµè§ˆçš„å®½é«˜ä»€ä¹ˆçš„,æˆ‘ç»å¸¸å¼„æ··.&lt;br&gt;</summary>
    
    
    
    
    <category term="js" scheme="https://www.sekyoro.top/tags/js/"/>
    
    <category term="dom" scheme="https://www.sekyoro.top/tags/dom/"/>
    
    <category term="bom" scheme="https://www.sekyoro.top/tags/bom/"/>
    
  </entry>
  
  <entry>
    <title>CSS_Modulesä»‹ç»</title>
    <link href="https://www.sekyoro.top/2023/07/29/CSS-Modules%E4%BB%8B%E7%BB%8D/"/>
    <id>https://www.sekyoro.top/2023/07/29/CSS-Modules%E4%BB%8B%E7%BB%8D/</id>
    <published>2023-07-29T07:53:28.000Z</published>
    <updated>2023-07-30T04:15:06.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>ä¹‹å‰åœ¨ç”¨Vueæ¡†æ¶æ—¶,ä¸ºäº†ä¾¿äºä¸åŒtemplateä¹‹é—´çš„æ ·å¼ä¸ç›¸äº’å½±å“,éƒ½è®¾ç½®äº†cssçš„scopedå±æ€§.ç°åœ¨åœ¨å­¦ä¹ React,å‘ç°å¹¶æ²¡æœ‰è‡ªå¸¦è¿™ç§åŠŸèƒ½,é€šå¸¸å¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ¡ˆè§£å†³.</p><span id="more"></span><p><img data-src="https://i.imgur.com/62Mf7KC.png" alt="image-20230721195018708"></p><p>ä¸€èˆ¬åœ¨ç”¨CSS Modulesæˆ–è€…CSS in Jsçš„æ–¹æ³•,ä¸è¿‡æ„Ÿè§‰CSS Modulesç”¨çš„æ¯”è¾ƒå¤š,è®¾ç½®ä¹Ÿå¹¶ä¸å¤æ‚,è¿™é‡Œå†™ä¸€ä¸‹ç®€å•çš„æ•™ç¨‹.</p><blockquote><p>ä¸ºäº†è®© CSS ä¹Ÿèƒ½é€‚ç”¨è½¯ä»¶å·¥ç¨‹æ–¹æ³•ï¼Œç¨‹åºå‘˜æƒ³äº†å„ç§åŠæ³•ï¼Œè®©å®ƒå˜å¾—åƒä¸€é—¨ç¼–ç¨‹è¯­è¨€ã€‚ä»æœ€æ—©çš„Lessã€SASSï¼Œåˆ°åæ¥çš„ PostCSSï¼Œå†åˆ°æœ€è¿‘çš„ CSS in JSï¼Œéƒ½æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p></blockquote><p>åœ¨Reactä¸­ä½¿ç”¨creat-react-appæˆ–è€…ä½¿ç”¨viteéƒ½ç›´æ¥ç”¨å°±è¡Œäº†,ä¸€èˆ¬çš„è„šæ‰‹æ¶éƒ½é»˜è®¤é›†æˆäº†CSS Modules.</p><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><p>é¦–å…ˆåˆ›å»ºcssæ–‡ä»¶,è¦æ±‚å‘½åä¸ºxxx.module.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* style.module.css */</span></span><br><span class="line"><span class="selector-class">.className</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ä»JSæ¨¡å—å¯¼å…¥CSSæ¨¡å—æ—¶ï¼Œå®ƒä¼šå¯¼å‡ºä¸€ä¸ªåŒ…å«æ‰€æœ‰æœ¬åœ°åç§°åˆ°å…¨å±€åç§°çš„æ˜ å°„çš„å¯¹è±¡ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./style.module.css&quot;</span>;</span><br><span class="line"><span class="comment">// import &#123; className &#125; from &quot;./style.css&quot;;</span></span><br><span class="line">element.innerHTML = <span class="string">&#x27;&lt;div class=&quot;&#x27;</span> + styles.className + <span class="string">&#x27;&quot;&gt;&#x27;</span>;</span><br></pre></td></tr></table></figure><p>åœ¨ç¼–è¯‘æ—¶ä¼šç»™ç±»åå‰åŠ ä¸Šä¸€ä¸ªå”¯ä¸€å€¼ç”¨ä»¥åŒºåˆ†,äº‹å®ä¸Švueçš„scopedä¹Ÿæ˜¯è¿™ä¸ªåŸç†.</p><p><img data-src="https://i.imgur.com/nCJDs00.png" alt="image-20230721201226474"></p><p>ä½¿ç”¨<code>import styles from &quot;./xxxx.module.css&quot;;</code>å¯¼å…¥å,äº‹å®ä¸Šä¸ç®¡æ˜¯å¦ä½¿ç”¨,éƒ½ä¼šå°†è¿™ä¸ªcssæ–‡ä»¶é‡Œçš„è§„åˆ™ç”¨ä¸Š,æ¯”å¦‚è¿™ä¸ªæ–‡ä»¶</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.nav</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  gap: <span class="number">4rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">a</span><span class="selector-pseudo">:link</span>,</span><br><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--color-light--<span class="number">2</span>);</span><br><span class="line">  <span class="attribute">text-transform</span>: uppercase;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.5rem</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* CSS Modules feature */</span></span><br><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">a</span>:<span class="built_in">global</span>(.active) &#123;</span><br><span class="line">  color: <span class="built_in">var</span>(--color-brand--<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.ctaLink</span><span class="selector-pseudo">:link</span>,</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.ctaLink</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--color-brand--<span class="number">2</span>);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--color-dark--<span class="number">0</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.8rem</span> <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">7px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>:red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ<code>div &#123;  background-color:red;&#125;</code>ä¼šç›´æ¥ç”¨ä¸Š,ä½†æ˜¯å¦‚æœå®šä¹‰äº†ç±»å¹¶ä½¿ç”¨çš„è¯,è¿™ä¸ªç±»å°±ä¼šç”Ÿæˆå”¯ä¸€ç±»å.</p><h3 id="å‘½åæ–¹å¼"><a href="#å‘½åæ–¹å¼" class="headerlink" title="å‘½åæ–¹å¼"></a>å‘½åæ–¹å¼</h3><p>å¯¹äºæœ¬åœ°ç±»åï¼Œå»ºè®®ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œä½†ä¸å¼ºåˆ¶è¦æ±‚ã€‚</p><p>è¿™æ˜¯å› ä¸ºå¸¸è§çš„æ›¿ä»£æ–¹æ¡ˆï¼Œè¿å­—ç¬¦å‘½åæ³•ï¼Œåœ¨å°è¯•è®¿é—®style.class-nameæ—¶å¯èƒ½ä¼šå¯¼è‡´æ„å¤–è¡Œä¸ºï¼Œå› ä¸ºå®ƒä½œä¸ºç‚¹ç¬¦å·è¡¨ç¤ºæ³•ã€‚æ‚¨ä»ç„¶å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·è¡¨ç¤ºæ³•ï¼ˆä¾‹å¦‚style[â€˜class-nameâ€™]ï¼‰æ¥è§£å†³è¿å­—ç¬¦å‘½åæ³•ï¼Œä½†æ˜¯style.classNameæ›´æ¸…æ™°ã€‚</p><p>ç®€å•æ¥è¯´å‘½åéœ€è¦é©¼å³°.</p><h3 id="globalå…¨å±€ä½¿ç”¨css"><a href="#globalå…¨å±€ä½¿ç”¨css" class="headerlink" title=":globalå…¨å±€ä½¿ç”¨css"></a>:globalå…¨å±€ä½¿ç”¨css</h3><p>:globalåˆ‡æ¢åˆ°å½“å‰é€‰æ‹©å™¨çš„å…¨å±€ä½œç”¨åŸŸï¼Œå¯¹åº”çš„æ ‡è¯†ç¬¦ã€‚:global(.xxx) å¯¹åº”çš„@keyframes :global(xxx)å£°æ˜æ‹¬å·ä¸­çš„å†…å®¹åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ã€‚</p><p>ä¾‹å¦‚,å¦‚æœè‡ªå®šä¹‰äº†navç±»,ä¸‹é¢æœ‰ç±»åä¸ºactiveçš„å…ƒç´ ,è¿™æ—¶ä¸èƒ½ä½¿ç”¨.nav .activeè¿›è¡Œé€‰æ‹©,å› ä¸ºä¼šç»™activeç±»åå­—å‰ç”ŸæˆåŒºåˆ†çš„id,åˆè¦åœ¨ç›¸å…³å…ƒç´ ä¸ŠåŠ ä¸Š. ä¸ºäº†é¿å…éº»çƒ¦,å¯ä»¥ä½¿ç”¨:global</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">a</span>:<span class="built_in">global</span>(.active) &#123;</span><br><span class="line">  color: <span class="built_in">var</span>(--color-brand--<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h3><p>ä½¿ç”¨<code>compose</code>ç»„åˆå…¶ä»–é€‰æ‹©å™¨çš„è§„åˆ™</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.className</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  composes: className;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœç»§æ‰¿å…¶ä»–æ–‡ä»¶é‡Œçš„</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.className</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  composes: className from <span class="string">&#x27;./another.css&#x27;</span>;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ol><li><a href="https://www.ruanyifeng.com/blog/2016/06/css_modules.html">CSS Modules ç”¨æ³•æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— (ruanyifeng.com)</a></li><li><a href="https://github.com/css-modules/css-modules">css-modules/css-modules: Documentation about css-modules (github.com)</a></li><li><a href="https://juejin.cn/post/7031528538209681444">react ä¸­ css modules-åŸºæœ¬ä½¿ç”¨ - æ˜é‡‘ (juejin.cn)</a></li><li><a href="https://www.jianshu.com/p/694f9c14ab35">åœ¨ React ä¸­ä½¿ç”¨ CSS Modules - ç®€ä¹¦ (jianshu.com)</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¹‹å‰åœ¨ç”¨Vueæ¡†æ¶æ—¶,ä¸ºäº†ä¾¿äºä¸åŒtemplateä¹‹é—´çš„æ ·å¼ä¸ç›¸äº’å½±å“,éƒ½è®¾ç½®äº†cssçš„scopedå±æ€§.ç°åœ¨åœ¨å­¦ä¹ React,å‘ç°å¹¶æ²¡æœ‰è‡ªå¸¦è¿™ç§åŠŸèƒ½,é€šå¸¸å¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ¡ˆè§£å†³.&lt;/p&gt;</summary>
    
    
    
    
    <category term="css" scheme="https://www.sekyoro.top/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>é’é¾™é¢æ¿éƒ¨ç½²é¡¹ç›®</title>
    <link href="https://www.sekyoro.top/2023/07/09/%E9%9D%92%E9%BE%99%E9%9D%A2%E6%9D%BF%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/"/>
    <id>https://www.sekyoro.top/2023/07/09/%E9%9D%92%E9%BE%99%E9%9D%A2%E6%9D%BF%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE/</id>
    <published>2023-07-09T03:21:18.000Z</published>
    <updated>2023-07-09T04:24:38.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>é’é¾™é¢æ¿ä¸»è¦ç”¨äºåœ¨ä¸Šé¢æ”¾ä¸€äº›è‡ªåŠ¨åŒ–è„šæœ¬,å¯ä»¥è·‘ä¸€äº›ç±»ä¼¼ç­¾åˆ°çš„ç¨‹åº.ä¹‹å‰æˆ‘éƒ¨ç½²è¿‡ä¸€äº›,ç»“æœæœåŠ¡å™¨å‡ºç°äº†ä¸€äº›é—®é¢˜,ç°åœ¨ä½¿ç”¨dockeré‡è£…ä¸€ä¸‹å¹¶å»ºç«‹ä¸€ä¸ªæ–°çš„docker image.<br><span id="more"></span></p><p>é¦–å…ˆå®˜æ–¹ä»“åº“<a href="https://github.com/whyour/qinglong">whyour/qinglong: æ”¯æŒ Python3ã€JavaScriptã€Shellã€Typescript çš„å®šæ—¶ä»»åŠ¡ç®¡ç†å¹³å°ï¼ˆTimed task management platform supporting Python3, JavaScript, Shell, Typescriptï¼‰ (github.com)</a>,æ¨èä½¿ç”¨dockerçš„æ–¹å¼,å¸è½½å®‰è£…éƒ½å¾ˆæ–¹ä¾¿.</p><p>å¯åŠ¨ä¸€ä¸ªå®¹å™¨å,åœ¨æœ¬åœ°æ‰“å¼€è®¾ç½®çš„ç«¯å£,è¿™é‡Œä¸æ¨èä½¿ç”¨5700,å› ä¸ºä¼šæœ‰æœºå™¨äººæ‰«æç«¯å£æš´åŠ›ç ´è§£,æˆ‘ä¹‹å‰å°±é‡åˆ°è¿‡.æ­¤å¤–è¦åœ¨é˜²ç«å¢™ä¸Šæ‰“å¼€å¯¹åº”çš„ç«¯å£.</p><p><img data-src="https://s2.loli.net/2023/07/09/DWxV5MUmoeqikjN.png" alt="image-20230709112516871"></p><p>ç„¶ååœ¨æœ¬åœ°æ‰“å¼€å¯¹åº”ç«¯å£çš„ç½‘é¡µ,é€‰æ‹©æ¨é€æ–¹å¼,æˆ‘ä¸€èˆ¬ä¹ç”¨PushPlusçš„ä¸€å¯¹ä¸€æ¨é€,å®˜æ–¹æ–‡æ¡£<a href="https://www.pushplus.plus/push1.html">ä¸€å¯¹ä¸€æ¶ˆæ¯|pushplus(æ¨é€åŠ )-å¾®ä¿¡æ¶ˆæ¯æ¨é€å¹³å°</a></p><p>ç„¶åè®¾ç½®è´¦å·å’Œå¯†ç .è¿™æ ·æ­å»ºå°±å®Œæˆäº†,è¿™é‡Œæ¨èå‡ ä¸ªè„šæœ¬,ä¸€èˆ¬æ¥è¯´è¶Šæ–°çš„è¶Šå¥½.</p><h3 id="äº¬ä¸œ"><a href="#äº¬ä¸œ" class="headerlink" title="äº¬ä¸œ"></a>äº¬ä¸œ</h3><p>æœ‰è®¸å¤šåº“å¯ä»¥ä½¿ç”¨,æˆ‘ä¹‹å‰å°±ç”¨çš„faker.è¯¦æƒ…å¯ä»¥çœ‹çœ‹æ–‡å°¾å‚è€ƒé“¾æ¥</p><h3 id="é˜¿é‡Œäº‘ç›˜ç­¾åˆ°"><a href="#é˜¿é‡Œäº‘ç›˜ç­¾åˆ°" class="headerlink" title="é˜¿é‡Œäº‘ç›˜ç­¾åˆ°"></a>é˜¿é‡Œäº‘ç›˜ç­¾åˆ°</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ql repo https:<span class="regexp">//gi</span>thub.com<span class="regexp">/mrabit/</span>aliyundriveDailyCheck.git <span class="string">&quot;autoSignin&quot;</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;qlApi&quot;</span></span><br></pre></td></tr></table></figure><p>é˜¿é‡Œäº‘ç›˜çš„è‡ªåŠ¨ç­¾åˆ°</p><h3 id="ç¾å›¢-é¥¿äº†å—"><a href="#ç¾å›¢-é¥¿äº†å—" class="headerlink" title="ç¾å›¢ é¥¿äº†å—"></a>ç¾å›¢ é¥¿äº†å—</h3><ul><li>ç¾å›¢</li><li>å®šæ—¶è§„åˆ™ï¼š10 8,11,18,21 <em> </em> *</li><li>è„šæœ¬åœ°å€ï¼š<a href="https://raw.githubusercontent.com/leafTheFish/DeathNote/main/meituanV3.js">https://raw.githubusercontent.com/leafTheFish/DeathNote/main/meituanV3.js</a></li><li></li><li>é¥¿äº†ä¹ˆ</li><li>å®šæ—¶è§„åˆ™ï¼š10 8,11,18,21 <em> </em> *</li><li>è„šæœ¬åœ°å€ï¼š<a href="https://raw.githubusercontent.com/leafTheFish/DeathNote/main/elmV3.js">https://raw.githubusercontent.com/leafTheFish/DeathNote/main/elmV3.js</a></li></ul><h3 id="Bç«™"><a href="#Bç«™" class="headerlink" title="Bç«™"></a>Bç«™</h3><p>æˆ‘forkäº†ä¸€ä¸‹æºé¡¹ç›®,æŠŠè¾“å‡ºé™åˆ¶åœ¨5000å­—ä»¥é…åˆPushPlusçš„å…è´¹æ¨é€é¢åº¦</p><p><a href="https://github.com/drowning-in-codes/BiliBiliToolPro/blob/main/qinglong/README.md">BiliBiliToolPro/qinglong/README.md at main Â· drowning-in-codes/BiliBiliToolPro Â· GitHub</a></p><p>æ³¨æ„é…ç½®ç›¸å…³cookieç”¨äºç™»å½•</p><p><img data-src="https://s2.loli.net/2023/07/09/czmZdETvkt41i3b.png" alt="image-20230709121439385" style="zoom:67%;" /></p><h2 id="æ‰“åŒ…é•œåƒ"><a href="#æ‰“åŒ…é•œåƒ" class="headerlink" title="æ‰“åŒ…é•œåƒ"></a>æ‰“åŒ…é•œåƒ</h2><p>ç”±äºä¹‹å‰è£…äº†ä¸€å †è„šæœ¬ç»“æœæœåŠ¡å™¨å‡ºç°äº†ä¸€ç‚¹é—®é¢˜,è¿™é‡Œæ‰“ç®—æ‰“åŒ…é•œåƒ,é•œåƒé‡Œå°±å¸¦ç€è¿™äº›è„šæœ¬ä»¥åŠä¸€äº›cookie</p><p>ä½¿ç”¨<code>docker commit</code></p><p><img data-src="https://s2.loli.net/2023/07/09/iknuaYByJEV7X8z.png" alt="image-20230709122034155"></p><p>æŸ¥è¯¢åˆšæ‰çš„æ–°é•œåƒ</p><p><img data-src="https://s2.loli.net/2023/07/09/vYIqbO6c2BPuo9Z.png" alt="image-20230709122209545"></p><p>å¯ä»¥ä½¿ç”¨<code>docker tag [IMAGE ID] [NEW NAME]</code>é‡å‘½å,åŒæ—¶åˆ é™¤ä¹‹å‰çš„é•œåƒ</p><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ol><li>[2023æœ€æ–°é’é¾™é¢æ¿äº¬ä¸œè„šæœ¬åº“ï¼ˆ7æœˆ2æ—¥ï¼ŒæŒç»­æ›´æ–°ä¸­ï¼‰ - ä¾¿åˆ©ç©ºé—´ (conveniencespace.com)]</li><li>[<a href="https://www.cnblogs.com/anyview/p/17030881.html">é’é¾™é¢æ¿è‡ªåŠ¨é¢†äº¬ä¸œäº¬è±†ï¼Œåšå†œåœºæµ‡æ°´ã€èŒå® ã€ç§è±†ã€ç­¾åˆ°ç­‰ä»»åŠ¡ - è§†è§‰ä¹¦è™« - åšå®¢å›­ (cnblogs.com)</a>(<a href="https://conveniencespace.com/index.php/2022/05/03/2022æœ€æ–°é’é¾™é¢æ¿äº¬ä¸œè„šæœ¬åº“ï¼ˆæŒç»­æ›´æ–°ä¸­ï¼‰/">https://conveniencespace.com/index.php/2022/05/03/2022æœ€æ–°é’é¾™é¢æ¿äº¬ä¸œè„šæœ¬åº“ï¼ˆæŒç»­æ›´æ–°ä¸­ï¼‰/</a>)</li><li><a href="https://www.dujin.org/20920.html">ä½¿ç”¨é’é¾™é¢æ¿æŒ‚è½½ã€Œé˜¿é‡Œäº‘ç›˜è´¦å·ã€è‡ªåŠ¨ç­¾åˆ°é¢†ä¼šå‘˜ç¦åˆ©-ç¼™å“¥å“¥ (dujin.org)</a></li><li><a href="https://blog.renzicu.com/2022/qinglong-meituanelm/index.html">ç å†œå¤§å”åšå®¢ - æŠ€æœ¯äº¤æµ | ã€Œè–…ç¾Šæ¯›ã€é’é¾™é¢æ¿ â€“ ç¾å›¢&amp;é¥¿äº†ä¹ˆ (renzicu.com)</a></li><li><a href="https://www.runoob.com/w3cnote/docker-use-container-create-image.html">Docker ä½¿ç”¨å®¹å™¨æ¥åˆ›å»ºé•œåƒ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;é’é¾™é¢æ¿ä¸»è¦ç”¨äºåœ¨ä¸Šé¢æ”¾ä¸€äº›è‡ªåŠ¨åŒ–è„šæœ¬,å¯ä»¥è·‘ä¸€äº›ç±»ä¼¼ç­¾åˆ°çš„ç¨‹åº.ä¹‹å‰æˆ‘éƒ¨ç½²è¿‡ä¸€äº›,ç»“æœæœåŠ¡å™¨å‡ºç°äº†ä¸€äº›é—®é¢˜,ç°åœ¨ä½¿ç”¨dockeré‡è£…ä¸€ä¸‹å¹¶å»ºç«‹ä¸€ä¸ªæ–°çš„docker image.&lt;br&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Astro+Verceléƒ¨ç½²åšå®¢</title>
    <link href="https://www.sekyoro.top/2023/07/07/Astro-Vercel%E9%83%A8%E7%BD%B2%E5%8D%9A%E5%AE%A2/"/>
    <id>https://www.sekyoro.top/2023/07/07/Astro-Vercel%E9%83%A8%E7%BD%B2%E5%8D%9A%E5%AE%A2/</id>
    <published>2023-07-07T07:21:56.000Z</published>
    <updated>2023-09-01T13:58:00.121Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>ç±»ä¼¼äºhexo,è¿™é‡Œä½¿ç”¨Astroéƒ¨ç½²åšå®¢.åˆ›å»ºä¸€ä¸ªGithubé¡¹ç›®éƒ¨ç½²åœ¨Vercel,ä¸»è¦ç›®çš„æ˜¯è®°å½•ä¸€äº›çç¢çš„å­¦ä¹ è®°å½•,é¡ºä¾¿å­¦ä¹ ä¸€ä¸‹å¾ˆçƒ­çš„Astro.</p><span id="more"></span><h2 id="Astroä»‹ç»"><a href="#Astroä»‹ç»" class="headerlink" title="Astroä»‹ç»"></a>Astroä»‹ç»</h2><p>Astro æ˜¯<strong>é›†å¤šåŠŸèƒ½äºä¸€ä½“çš„ Web æ¡†æ¶</strong>ï¼Œç”¨äºæ„å»º<strong>å¿«é€Ÿã€ä»¥å†…å®¹ä¸ºä¸­å¿ƒ</strong>çš„ç½‘ç«™ã€‚</p><h3 id="ä¸»è¦ç‰¹æ€§"><a href="#ä¸»è¦ç‰¹æ€§" class="headerlink" title="ä¸»è¦ç‰¹æ€§"></a>ä¸»è¦ç‰¹æ€§</h3><p><a href="https://docs.astro.build/zh-cn/getting-started/#ä¸»è¦ç‰¹æ€§">æ ‡é¢˜éƒ¨åˆ† ä¸»è¦ç‰¹æ€§</a></p><ul><li><strong>ç»„ä»¶ç¾¤å²›:</strong> ç”¨äºæ„å»ºæ›´å¿«ç½‘ç«™çš„æ–° web æ¶æ„ã€‚</li><li><strong>æœåŠ¡å™¨ä¼˜å…ˆçš„ API è®¾è®¡:</strong> ä»ç”¨æˆ·è®¾å¤‡ä¸Šå»é™¤é«˜æˆæœ¬çš„ Hydrationã€‚</li><li><strong>é»˜è®¤é›¶ JS:</strong> æ²¡æœ‰ JavaScript è¿è¡Œæ—¶å¼€é”€æ¥å‡æ…¢ä½ çš„é€Ÿåº¦ã€‚</li><li><strong>è¾¹ç¼˜å°±ç»ª:</strong> åœ¨ä»»ä½•åœ°æ–¹éƒ¨ç½²ï¼Œç”šè‡³åƒ Deno æˆ– Cloudflare è¿™æ ·çš„å…¨çƒè¾¹ç¼˜è¿è¡Œæ—¶ã€‚</li><li><strong>å¯å®šåˆ¶:</strong> Tailwind, MDX å’Œ 100 å¤šä¸ªå…¶ä»–é›†æˆå¯ä¾›é€‰æ‹©ã€‚</li><li><strong>ä¸ä¾èµ–ç‰¹å®š UI:</strong> æ”¯æŒ React, Preact, Svelte, Vue, Solid, Lit ç­‰ç­‰</li></ul><p>å¯ä»¥ä½¿ç”¨<a href="[CodeSandbox: Code, Review and Deploy in Record Time](https://codesandbox.io/">codesandbox</a>)ä¸<a href="[StackBlitz | Instant Dev Environments | Click. Code. Done.](https://stackblitz.com/">stackblitz</a>)åœ¨çº¿å†™ä¸€äº›ä»£ç .</p><p>å¯ä»¥åœ¨è¿™ä¸ªç½‘ç«™<a href="https://astro.new/latest/">Getting Started | astro.new</a>ç©ç©ä¸€äº›å¸¸ç”¨æ¨¡æ¿.</p><p>ä¹Ÿæœ‰å…¶ä»–ç”¨æˆ·çš„ä¾‹å­<a href="https://astro.build/themes/">Themes | Astro</a>ï¼Œå…³äºä¸»é¢˜çš„.</p><p>å¦å¤–å¯ä»¥ä½¿ç”¨astroæ–¹ä¾¿æ·»åŠ å…¶ä»–åº“,æ¯”å¦‚æ·»åŠ tailwind.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx astro add tailwind</span><br></pre></td></tr></table></figure><p><img data-src="https://s2.loli.net/2023/07/08/h6JqXOmDHubWRzy.png" alt="image-20230708152345258"></p><p>è¿™é‡Œå¢åŠ äº†tailwindä»¥åŠreact</p><h3 id="Astroçš„é…ç½®"><a href="#Astroçš„é…ç½®" class="headerlink" title="Astroçš„é…ç½®"></a>Astroçš„é…ç½®</h3><blockquote><p>åœ¨ <code>astro.config.mjs</code> æ–‡ä»¶ä¸­è‡ªå®šä¹‰ Astro çš„è¿è¡Œæ–¹å¼ã€‚å®ƒåœ¨ Astro é¡¹ç›®ä¸­ååˆ†å¸¸è§ï¼Œæ‰€æœ‰å®˜æ–¹çš„ç¤ºä¾‹æ¨¡æ¿å’Œä¸»é¢˜éƒ½é»˜è®¤é™„å¸¦ã€‚</p></blockquote><p>è¿™é‡Œæˆ‘ä½¿ç”¨äº†Blogæ¨¡æ¿,ç”¨äºè®°å½•åšå®¢çš„.</p><blockquote><ul><li>Edit this page in <code>src/pages/index.astro</code></li><li>Edit the site header items in <code>src/components/Header.astro</code></li><li>Add your name to the footer in <code>src/components/Footer.astro</code></li><li>Check out the included blog posts in <code>src/pages/blog/</code></li><li>Customize the blog post page layout in <code>src/layouts/BlogPost.astro</code></li></ul></blockquote><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><blockquote><p>Astro ä¸ºä½ çš„é¡¹ç›®æä¾›äº†ä¸€ä¸ªæœ‰æƒ³æ³•çš„æ–‡ä»¶å¤¹å¸ƒå±€ã€‚æ¯ä¸ª Astro é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹éƒ½åº”è¯¥åŒ…æ‹¬ä»¥ä¸‹ç›®å½•å’Œæ–‡ä»¶ï¼š</p><ul><li><code>src/*</code> - ä½ çš„é¡¹ç›®æºä»£ç ï¼ˆç»„ä»¶ã€é¡µé¢ã€æ ·å¼ç­‰ï¼‰ã€‚</li><li><code>public/*</code> - ä½ çš„éä»£ç ã€æœªå¤„ç†çš„èµ„æºï¼ˆå­—ä½“ã€å›¾æ ‡ç­‰ï¼‰ã€‚</li><li><code>package.json</code> - é¡¹ç›®åˆ—è¡¨ã€‚</li><li><code>astro.config.mjs</code> - Astro é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰ã€‚</li><li><code>tsconfig.json</code> - TypeScript é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰ã€‚</li></ul></blockquote><h4 id="src-components"><a href="#src-components" class="headerlink" title="src/components"></a><code>src/components</code></h4><p><a href="https://docs.astro.build/zh-cn/core-concepts/project-structure/#srccomponents">æ ‡é¢˜éƒ¨åˆ† src/components</a></p><p><strong>ç»„ä»¶</strong>æ˜¯ä½ åœ¨ HTML é¡µé¢ä¸­å¯é‡å¤ä½¿ç”¨çš„ä»£ç å•å…ƒã€‚å®ƒå¯ä»¥æ˜¯ <a href="https://docs.astro.build/zh-cn/core-concepts/astro-components/">Astro ç»„ä»¶</a> æˆ–æ˜¯åƒ React æˆ– Vue è¿™æ ·çš„<a href="https://docs.astro.build/zh-cn/core-concepts/framework-components/">å‰ç«¯ç»„ä»¶</a>ã€‚é€šå¸¸å°†ä½ é¡¹ç›®ä¸­æ‰€æœ‰ç»„ä»¶éƒ½åˆ†ç»„æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚</p><p>è¿™åœ¨ Astro é¡¹ç›®ä¸­æ˜¯ä¸ªä¹ æƒ¯ï¼Œä½†ä¸è¿‡ä½ å¯ä»¥è‡ªç”±åœ°æ ¹æ®å–œå¥½è¿›è¡Œç®¡ç†ã€‚</p><h4 id="src-layouts"><a href="#src-layouts" class="headerlink" title="src/layouts"></a><code>src/layouts</code></h4><p><a href="https://docs.astro.build/zh-cn/core-concepts/project-structure/#srclayouts">æ ‡é¢˜éƒ¨åˆ† src/layouts</a></p><p><a href="https://docs.astro.build/zh-cn/core-concepts/layouts/">å¸ƒå±€</a>æ˜¯ç‰¹æ®Šçš„ç»„ä»¶ï¼Œå®ƒå°†ä¸€äº›å†…å®¹åŒ…è£¹åœ¨ä¸€ä¸ªæ›´å¤§çš„é¡µé¢å¸ƒå±€ä¸­ã€‚é€šå¸¸ç”¨åœ¨ <a href="https://docs.astro.build/zh-cn/core-concepts/astro-pages/">Astro é¡µé¢</a>å’Œ <a href="https://docs.astro.build/zh-cn/guides/markdown-content/">Markdown é¡µé¢</a>ä¸­ä»¥å®šä¹‰é¡µé¢çš„å¸ƒå±€ã€‚</p><p>å’Œ <code>src/components</code> ä¸€æ ·ï¼Œè¿™ä¸ªç›®å½•ä¹Ÿåªæ˜¯çº¦å®šä¿—æˆã€‚</p><h4 id="src-pages"><a href="#src-pages" class="headerlink" title="src/pages"></a><code>src/pages</code></h4><p><a href="https://docs.astro.build/zh-cn/core-concepts/project-structure/#srcpages">æ ‡é¢˜éƒ¨åˆ† src/pages</a></p><p><a href="https://docs.astro.build/zh-cn/core-concepts/astro-pages/">é¡µé¢</a>æ˜¯ä¸€ç§ç”¨äºåˆ›å»ºæ–°çš„é¡µé¢çš„ç‰¹æ®Šç»„ä»¶ã€‚ä¸€ä¸ªé¡µé¢å¯ä»¥æ˜¯ä¸€ä¸ª Astro ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª Markdown æ–‡ä»¶ï¼Œå®ƒä»£è¡¨ä½ ç½‘ç«™çš„ä¸€äº›å†…å®¹é¡µé¢ã€‚</p><h4 id="src-styles"><a href="#src-styles" class="headerlink" title="src/styles"></a><code>src/styles</code></h4><p><a href="https://docs.astro.build/zh-cn/core-concepts/project-structure/#srcstyles">æ ‡é¢˜éƒ¨åˆ† src/styles</a></p><p>åœ¨ <code>src/styles</code> ç›®å½•ä¸‹å­˜å‚¨ä½ çš„ CSS æˆ– Sass æ–‡ä»¶ä»åªæ˜¯ä¸ªä¹ æƒ¯ã€‚åªè¦ä½ çš„æ ·å¼åœ¨ <code>src/</code> ç›®å½•ä¸‹çš„æŸä¸ªåœ°æ–¹ï¼Œå¹¶ä¸”æ­£ç¡®å¯¼å…¥ï¼ŒAstro å°±èƒ½å¤„ç†å¹¶å‹ç¼©å®ƒä»¬ã€‚</p><h4 id="public"><a href="#public" class="headerlink" title="public/"></a><code>public/</code></h4><p><a href="https://docs.astro.build/zh-cn/core-concepts/project-structure/#public">æ ‡é¢˜éƒ¨åˆ† public/</a></p><p><code>public/</code> ç›®å½•ç”¨äºæ–‡ä»¶å’Œèµ„æºï¼Œå®ƒä¸ä¼šåœ¨ Astro æ„å»ºè¿‡ç¨‹ä¸­å¤„ç†ã€‚è¿™äº›æ–‡ä»¶å°†ä¸åŠ ä¿®æ”¹åœ°è¢«ç›´æ¥å¤åˆ¶åˆ°æ„å»ºæ–‡ä»¶å¤¹ã€‚</p><p>è¿™ç§è¡Œä¸ºä½¿å¾— <code>public/</code> æˆä¸ºå­˜æ”¾å›¾ç‰‡å’Œå­—ä½“ç­‰æ™®é€šèµ„æºæˆ– <code>robots.txt</code> å’Œ <code>manifest.webmanifest</code> ç­‰ç‰¹æ®Šæ–‡ä»¶çš„ç†æƒ³é€‰æ‹©ã€‚</p><h3 id="æ’°å†™ç»„ä»¶"><a href="#æ’°å†™ç»„ä»¶" class="headerlink" title="æ’°å†™ç»„ä»¶"></a>æ’°å†™ç»„ä»¶</h3><blockquote><p>Astro ç»„ä»¶éå¸¸çµæ´»çš„ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒAstro ç»„ä»¶ä¼šåŒ…å«ä¸€äº›<strong>å¯åœ¨é¡µé¢ä¸­å¤ç”¨çš„ UI</strong>ï¼Œå¦‚ header æˆ–ç®€ä»‹å¡ã€‚åœ¨å…¶ä»–æ—¶å€™ï¼ŒAstro ç»„ä»¶å¯èƒ½åŒ…å«ä¸€ä¸ªè¾ƒå°çš„ HTML ç‰‡æ®µï¼Œåƒæ˜¯å¸¸è§çš„ä½¿ SEO æ›´å¥½çš„ <code>&lt;meta&gt;</code> æ ‡ç­¾é›†åˆã€‚Astro ç»„ä»¶ç”šè‡³å¯ä»¥åŒ…å«æ•´ä¸ªé¡µé¢å¸ƒå±€ã€‚</p><p>Astro ç»„ä»¶ä¸­æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒä»¬åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä¼šè¢«<strong>æ¸²æŸ“æˆ HTML</strong>ã€‚å³ä½¿ä½ åœ¨ç»„ä»¶å†…è¿è¡Œ JavaScript ä»£ç ï¼Œå®ƒä¹Ÿä¼šæŠ¢å…ˆä¸€æ­¥è¿è¡Œä»å‘ˆç°ç»™ç”¨æˆ·çš„æœ€ç»ˆé¡µé¢ä¸­å‰¥ç¦»å‡ºæ¥ã€‚å…¶æœ€ç»ˆä½¿å¾—ç½‘ç«™å˜å¾—æ›´å¿«ï¼Œä¸”é»˜è®¤ä¸ç”¨ä»»ä½• JavaScriptã€‚</p></blockquote><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ol><li><a href="https://docs.astro.build/zh-cn/getting-started/">å…¥é—¨æŒ‡å— ğŸš€ Astro æ–‡æ¡£</a></li><li><a href="https://2022.stateofjs.com/en-US/">State of JavaScript 2022 (stateofjs.com)</a></li><li><a href="https://astro.new/latest/">Getting Started | astro.new</a></li><li><a href="https://www.youtube.com/watch?v=NniT0vKyn-E&amp;ab_channel=developedbyed">(1) Astro Crash Course in 60 Minutes - YouTube</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç±»ä¼¼äºhexo,è¿™é‡Œä½¿ç”¨Astroéƒ¨ç½²åšå®¢.åˆ›å»ºä¸€ä¸ªGithubé¡¹ç›®éƒ¨ç½²åœ¨Vercel,ä¸»è¦ç›®çš„æ˜¯è®°å½•ä¸€äº›çç¢çš„å­¦ä¹ è®°å½•,é¡ºä¾¿å­¦ä¹ ä¸€ä¸‹å¾ˆçƒ­çš„Astro.&lt;/p&gt;</summary>
    
    
    
    
    <category term="Astro" scheme="https://www.sekyoro.top/tags/Astro/"/>
    
    <category term="Vercel" scheme="https://www.sekyoro.top/tags/Vercel/"/>
    
    <category term="Github" scheme="https://www.sekyoro.top/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>AIå†™ä½œå·¥ä½œæµ</title>
    <link href="https://www.sekyoro.top/2023/06/12/AI%E5%86%99%E4%BD%9C%E5%B7%A5%E4%BD%9C%E6%B5%81/"/>
    <id>https://www.sekyoro.top/2023/06/12/AI%E5%86%99%E4%BD%9C%E5%B7%A5%E4%BD%9C%E6%B5%81/</id>
    <published>2023-06-12T11:17:40.000Z</published>
    <updated>2023-06-12T13:33:46.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>ä½¿ç”¨ChatGPTå¯ä»¥å¸®åŠ©å†™ä½œ,ä½†å…¶æœ¬èº«æ˜¯ä¸ªå¯¹è¯AI,æœ‰ä¸“é—¨å¸®åŠ©å†™ä½œçš„AI.è¿™é‡Œåšä¸€ä¸ªä»‹ç»åŒæ—¶å°è¯•æ•´åˆåˆ°æ—¥å¸¸å·¥ä½œæµä¸­.<br><span id="more"></span></p><p>ä¹‹å‰æƒ³åœ¨ä¸€äº›è‡ªåª’ä½“å·ä¸Šå‘å¸ƒä¸€äº›å¥½ç”¨çš„ChatGPTä»¥åŠå¾®è½¯çš„Bingæ›¿ä»£å“,æ²¡æƒ³è¿‡è¿˜é€šè¿‡ä¸äº†å®¡æ ¸,ç”šè‡³æœ‰äº›å¹³å°ChatGPTéƒ½ä¸å¥½æ.äºæ˜¯æ‰“ç®—åœ¨è¿™é‡Œå†™å†™,ä¹Ÿå¯ä»¥å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·æˆ–è€…ä¸ªäººç½‘ç«™ã€‚</p><p>è¿™é‡Œæ¨èçš„AIå†™ä½œå·¥å…·æœ‰å‡ ä¸ªè¦æ±‚:</p><ol><li>æœ‰å…è´¹è®¡åˆ’æˆ–è€…é¢åº¦</li><li>æœ€å¥½æä¾›APIä¾¿äºå¼€å‘</li><li>ä¸“æ³¨äºå†™ä½œ,ä¸éœ€è¦ä¸€å¥ä¸€å¥å»è¯¢é—®.å¦‚æœèƒ½ç”Ÿæˆä¸€äº›å›¾ç‰‡è¾…åŠ©å†™ä½œå°±æ›´å¥½äº†.</li><li>å¤šè¯­è¨€æ”¯æŒ</li></ol><p>æˆ‘å°†ä½“éªŒä¸‹é¢çš„æ¯ä¸ªåº”ç”¨å¹¶ç»™å‡ºä¸ªäººè§è§£ã€‚</p><h3 id="Chatsonic-writesonic"><a href="#Chatsonic-writesonic" class="headerlink" title="Chatsonic(writesonic)"></a>Chatsonic(writesonic)</h3><p><a href="https://writesonic.com/?via=devinder14">Writesonic - Best AI Writer, Copywriting &amp; Paraphrasing Tool</a></p><p>å¯ä»¥è¯´æ˜¯æ¯”è¾ƒæ¨èçš„å·¥å…·äº†,æœ‰å…è´¹æ–¹æ¡ˆ,åŠŸèƒ½å¾ˆå¤š,è¿˜æœ‰æµè§ˆå™¨æ‰©å±•ä»¥åŠapp.</p><p><img data-src="https://i.imgur.com/NC0RjRO.png" alt="image-20230612201548133"></p><p>å¦‚æœä½ æ²¡æœ‰ç²¾åŠ›å»æå…¶ä»–å·¥å…·,é‚£å…‰ä½¿ç”¨è¿™ä¸ªå°±è¡Œäº†,å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ‰©å±•æˆ–è€…æ‰‹æœºApp.</p><p>å…·ä½“æ¥è¯´æœ‰ä»¥ä¸‹ä¼˜ç‚¹</p><p>1.æ¥æºäºäº‹å®å’Œå®æ—¶ä¿¡æ¯</p><p>å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾ä¸€ç§æœ‰æ•ˆçš„æ–¹å¼æ¥ç”Ÿæˆå…·æœ‰æœ€æ–°æ–°é—»ã€äº‹å®å’Œæ•°å­—çš„å†…å®¹ï¼ŒChatsonicæ˜¯æœ€å¥½çš„ChatGPTæ›¿ä»£å“ã€‚ä¸ºäº†æä¾›å®æ—¶æ›´æ–°ï¼ŒChatsonicçš„äººå·¥æ™ºèƒ½èŠå¤©æœºå™¨äººä¸è°·æ­Œæœç´¢é›†æˆã€‚</p><p>é€šè¿‡ä½¿ç”¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰å’Œæœºå™¨å­¦ä¹ ï¼ŒChatsonicå¯¹æœ‰å…³å½“å‰æ–°é—»å’Œè¶‹åŠ¿çš„é—®é¢˜æä¾›å‡†ç¡®çš„ç­”æ¡ˆï¼Œå¹¶æä¾›è¯¦ç»†çš„æ€»ç»“å’Œè§è§£ã€‚</p><p>2.ç†è§£è¯­éŸ³å‘½ä»¤</p><p>ç”±äºNLPâ€”ChatSonicå¯ä»¥ç†è§£è¯­éŸ³å‘½ä»¤ã€‚</p><p>ä½ åªéœ€è¦å‘å‡ºä¸€ä¸ªè¯­éŸ³å‘½ä»¤ï¼Œå®ƒå°±ä¼šç”Ÿæˆä½ æ‰€éœ€è¦çš„ä¸œè¥¿ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜å¯ä»¥å“åº”åƒSiriæˆ–è°·æ­ŒåŠ©æ‰‹çš„è¯­éŸ³å‘½ä»¤ï¼Œæœ€ç»ˆå¯ä»¥å¸®åŠ©æ‚¨èŠ‚çœæ›´å¤šçš„æ—¶é—´ï¼Œä½¿æ•´ä½“ä½“éªŒæ›´åŠ æ„‰å¿«ã€‚</p><p>3.å……å½“ä½ çš„ä¸ªäººåŠ©ç†</p><p>æŠŠChatsonicæƒ³è±¡æˆä½ çš„è™šæ‹ŸåŠ©ç†ï¼Œä»–åœ¨ä½ çš„æŒ‡å°–ä¸Šç»™ä½ æä¾›ä½ éœ€è¦çš„ä¿¡æ¯ã€‚</p><p>æ— è®ºæ‚¨æ˜¯éœ€è¦æ•°å­¦æ–¹é¢çš„å¸®åŠ©ï¼Œè¿˜æ˜¯éœ€è¦å‡†å¤‡å·¥ä½œé¢è¯•ï¼Œæˆ–æ˜¯éœ€è¦æœ‰å…³å±‹æªä¸‹ä»»ä½•ä¸œè¥¿çš„ä¿¡æ¯ï¼ŒChatsonicéƒ½èƒ½ä¸ºæ‚¨çš„å†…å®¹åˆ›ä½œå¸¦æ¥é©å‘½æ€§çš„å˜åŒ–ã€‚</p><p>åœ¨æˆ‘ä»¬éƒ½ä»¥æé«˜ç”Ÿäº§åŠ›ä¸ºç›®æ ‡çš„æ—¶å€™ï¼ŒChatsonicå¸®åŠ©ç”¨æˆ·æ›´å¿«åœ°å†™ä½œï¼Œå¹¶ä½¿è¿™ä¸ªè¿‡ç¨‹å˜å¾—æ„‰å¿«ã€‚</p><p>4.å°†æƒ³æ³•è½¬åŒ–ä¸ºç‹¬ç‰¹çš„æ•°å­—è‰ºæœ¯</p><p>ç›®å‰ï¼Œæ‰€æœ‰åƒChat GPTè¿™æ ·çš„ç½‘ç«™éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„å±€é™æ€§ï¼šå®ƒä»¬ä¸èƒ½ç”Ÿæˆæ”¯æŒå†…å®¹çš„ä»¤äººæƒŠå¹çš„AIè‰ºæœ¯ã€‚</p><p>è¿™å°±æ˜¯Chatsonicä½œä¸ºä¸€ä¸ªå·®å¼‚åŒ–å› ç´ å‡ºç°çš„åœ°æ–¹ã€‚æ‚¨å¯ä»¥å¿«é€Ÿè½»æ¾åœ°åˆ›å»ºä»¤äººæƒŠå¹çš„æ•°å­—AIè‰ºæœ¯ï¼Œå› ä¸ºChatsSonicå·²ç»æ•´åˆäº†ç¨³å®šæ‰©æ•£å’ŒDALL-Eï¼Œåªéœ€ç‚¹å‡»ä¸€ä¸‹å°±å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰AIå›¾åƒã€‚</p><p>5.Chatsonicçš„APIé›†æˆåˆ°ç°æœ‰çš„åº”ç”¨ç¨‹åºä¸­</p><p>é€šè¿‡å°†è¿™ä¸ªChatGPTçš„æ›¿ä»£å“æ•´åˆåˆ°æ‚¨ç°æœ‰çš„åº”ç”¨ç¨‹åºä¸­ï¼Œé‡Šæ”¾Chatsonicçš„å…¨éƒ¨æ½œåŠ›ã€‚è¿™æ ·ï¼Œæ‚¨å°±å¯ä»¥åœ¨ä¸åˆ‡æ¢æ ‡ç­¾çš„æƒ…å†µä¸‹è·å¾—æœ€æ–°ä¿¡æ¯ã€‚</p><p>Chatsonicçš„APIå¯ä»¥ä¸æ‚¨çš„ç½‘ç«™å’Œç§»åŠ¨åº”ç”¨ç¨‹åºæ•´åˆï¼Œå»ºç«‹å¼ºå¤§çš„å®¢æˆ·æœåŠ¡å’Œæ²Ÿé€šèƒ½åŠ›ã€‚</p><p>æƒ³äº†è§£å¦‚ä½•åœ¨è‡ªå·±çš„ç³»ç»Ÿä¸­ä½¿ç”¨ChatGPT APIï¼Œè¯·é˜…è¯»30å¤šä¸ªä½¿ç”¨æ¡ˆä¾‹ - <a href="https://writesonic.com/blog/chatgpt-api-use-cases/">ChatGPT API use cases: 35 ways to implement ChatSonic API (writesonic.com)</a>ã€‚</p><p>è¿™é‡Œçš„APIè·ŸChatGPTç±»ä¼¼,æœ‰ç©ºæˆ‘ä¹Ÿæ‰“ç®—å†™ä¸€ä¸ªå¥—å£³å¯¹è¯æœºå™¨äººã€‚</p><h3 id="YouChat"><a href="#YouChat" class="headerlink" title="YouChat"></a>YouChat</h3><p><a href="https://you.com/">The AI Search Engine You Control | AI Chat &amp; Apps</a></p><p>YouChatæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ChatGPTæ›¿ä»£å“ï¼Œç”¨äºç ”ç©¶ï¼ŒåŒæ—¶ç»™äººä¸€ç§æ—¥å¸¸ä½“éªŒã€‚è¯¥å·¥å…·æ˜¯ç”±You[ç‚¹]comï¼Œä¸€ä¸ªæœç´¢å¼•æ“æ¨å‡ºçš„ã€‚å®ƒçš„å·¥ä½œåŸç†ä¸å…¶ä»–ä¸€èˆ¬çš„èŠå¤©å·¥å…·åŸºæœ¬ç›¸åŒã€‚è¯¥å·¥å…·ä½¿ç”¨è‡ªç„¶è¯­è¨€å¤„ç†å’Œäººå·¥æ™ºèƒ½ï¼Œåƒäººä¸€æ ·è‡ªç„¶åœ°è¿›è¡Œäº¤è°ˆã€‚</p><p>YouChatå¯ä»¥å†™ä»£ç å’Œç”µå­é‚®ä»¶ï¼Œç¿»è¯‘ï¼Œæ€»ç»“æ–‡æœ¬ï¼Œå¹¶å›ç­”ä¸€èˆ¬çš„è¯¢é—®ã€‚YouChatåœ¨å›ç­”åŸºæœ¬çº§åˆ«çš„æŸ¥è¯¢æ–¹é¢éå¸¸å‡ºè‰²ï¼Œä½†ç”±äºå®ƒä»åœ¨å­¦ä¹ ä¸­ï¼Œå¯èƒ½ä¼šé”™è¿‡ä¸€äº›ç‰¹å®šçš„å°ä¼—å†…å®¹ã€‚è¯¥å·¥å…·æä¾›çš„æ‰€æœ‰ä¿¡æ¯å¹¶ä¸æ€»æ˜¯æ­£ç¡®çš„ã€‚</p><p>æ­¤å¤–ä¹Ÿæœ‰YouWriteä»¥åŠYouImageåŠŸèƒ½,ä¹Ÿæ˜¯æœ‰å…è´¹çš„ã€‚</p><h3 id="copy-ai"><a href="#copy-ai" class="headerlink" title="copy.ai"></a>copy.ai</h3><p><a href="https://app.copy.ai/projects">Copy.ai</a> å…è´¹çš„æ”¯æŒä¸­æ–‡,ç½‘ç«™ä»‹ç»è¯´ç”¨äºå†™åšå®¢ä»¥åŠå†™é‚®ä»¶.</p><p><img data-src="https://i.imgur.com/7Xufnib.png" alt="image-20230612205040139"></p><p>ä¸å¾—ä¸è¯´åœ¨ç½‘ä¸Šä¸€æœæœ‰å¤ªå¤šç›¸å…³å†…å®¹äº†,ä½†å®é™…ä½¿ç”¨ä¹‹åæ‰çŸ¥é“å“ªäº›å¥½ç”¨å“ªäº›çœŸçš„ä¸ä¾¿äºä½¿ç”¨ã€‚</p><p>æ¯”å¦‚æœ‰æµè§ˆå™¨æ‰©å±•çš„è‚¯å®šæ˜¯éå¸¸å¥½çš„ä¼˜ç‚¹,ä¸åƒå…¶ä»–çš„è¿˜éœ€è¦æ‰“å¼€ç›¸å…³ç½‘ç«™.æ‰€ä»¥æˆ‘è¿™é‡Œæ˜¯å¼ºçƒˆæ¨èChatsonicçš„ã€‚</p><h3 id="Rytr"><a href="#Rytr" class="headerlink" title="Rytr"></a>Rytr</h3><p><a href="https://app.rytr.me/create">Rytr Â· Best AI Writer, Content Generator &amp; Writing Assistant</a></p><p>Rytræ˜¯ä¸€ä¸ªäººå·¥æ™ºèƒ½å†™ä½œåŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©ä½ åˆ›é€ é«˜è´¨é‡çš„å†…å®¹ï¼Œåªéœ€å‡ ç§’é’Ÿçš„æ—¶é—´ï¼Œè€Œæˆæœ¬å´å¾ˆä½!</p><p>å…è´¹ç‰ˆæœ¬æ¯ä¸ªæœˆåªèƒ½ç”Ÿæˆ5000ä¸ªå­—ç¬¦</p><p><img data-src="https://i.imgur.com/zIKQzAS.png" alt="image-20230612213317657" style="zoom: 33%;" /></p><p>ä¸‹é¢è¯¦ç»†ä»‹ç»ä¸€ä¸‹Chatsonic.</p><p>ä»¥ä¸‹æ˜¯æµè§ˆå™¨æ’ä»¶</p><p><img data-src="https://i.imgur.com/c4C1znZ.png" alt="image-20230612210508225" style="zoom: 50%;" /></p><p>å¦‚æœç”¨ç›¸åŒçš„é—®é¢˜è¯¢é—®åŸºäºGPT3.5çš„ChatGPTä¼šå¾—åˆ°éå¸¸ç³Ÿç³•çš„å›ç­”,ä½†è¿™ä¸ªçš„å›ç­”å°±å¥½å¾ˆå¤š.è™½ç„¶ä¹Ÿæœ‰ä¸€äº›é—®é¢˜.</p><p><img data-src="https://i.imgur.com/XwAjLUN.png" alt="image-20230612210640326" style="zoom:50%;" /></p><p>å…è´¹é¢åº¦å¤§æ¦‚25000å­—,æœ‰ä»¥ä¸‹å…·ä½“åŠŸèƒ½</p><p><img data-src="https://i.imgur.com/oob3R76.png" alt=" "></p><p>æ¯”å¦‚æˆ‘ä½¿ç”¨å…¶ä¸­çš„Website CopyåŠŸèƒ½å†™ä¸€ä¸ªç½‘ç«™çš„ç™»å½•é¡µ.å¡«å†™ä»¥ä¸‹ä¿¡æ¯,æˆ‘éšä¾¿å¡«çš„</p><p><img data-src="https://i.imgur.com/bS6K9Ju.png" alt="image-20230612212038829" style="zoom:50%;" /></p><p>å¾—åˆ°ç»“æœ</p><p><img data-src="https://i.imgur.com/EbQmKoZ.png" alt=" " style="zoom:50%;" /></p><p>æ•ˆæœè¿˜æ˜¯å¾ˆä¸é”™çš„.</p><p>å›åˆ°ä¸»é¢˜å†™ä½œåŠŸèƒ½,ä½ å¯ä»¥é¦–å…ˆç»™å‡ºä¸»é¢˜æœç´¢ç›¸å…³æ–‡ç« æˆ–è€…è‡ªå·±ç»™å®ƒæ–‡ç« é“¾æ¥æˆ–è€…æ–‡ç« çš„æ–‡ä»¶,ç„¶åç”Ÿæˆæ–‡ç« å¹¶è‡ªå·±ä¿®æ”¹.</p><p><img data-src="https://i.imgur.com/amfyrWe.png" alt="image-20230612212217201" style="zoom:33%;" /></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://www.wbolt.com/best-chatgpt-alternatives.html#h-6-colossal-chat">25ä¸ªæœ€ä½³ChatGPTæ›¿ä»£å“ - é—ªç”µåš (wbolt.com)</a></li><li><a href="https://zhuanlan.zhihu.com/p/625827740">Writesonicï¼š 2023å¹´æœ€å¥½ç”¨çš„çš„AI å†™ä½œå·¥å…· ï½œä½¿ç”¨ GPT 4 - çŸ¥ä¹ (zhihu.com)</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä½¿ç”¨ChatGPTå¯ä»¥å¸®åŠ©å†™ä½œ,ä½†å…¶æœ¬èº«æ˜¯ä¸ªå¯¹è¯AI,æœ‰ä¸“é—¨å¸®åŠ©å†™ä½œçš„AI.è¿™é‡Œåšä¸€ä¸ªä»‹ç»åŒæ—¶å°è¯•æ•´åˆåˆ°æ—¥å¸¸å·¥ä½œæµä¸­.&lt;br&gt;</summary>
    
    
    
    
    <category term="AI" scheme="https://www.sekyoro.top/tags/AI/"/>
    
  </entry>
  
  <entry>
    <title>nodeçš„åŒ…ç®¡ç†å·¥å…·ä»‹ç»</title>
    <link href="https://www.sekyoro.top/2023/06/10/node%E7%9A%84%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D/"/>
    <id>https://www.sekyoro.top/2023/06/10/node%E7%9A%84%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D/</id>
    <published>2023-06-10T07:13:46.000Z</published>
    <updated>2023-06-10T13:39:46.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>ä¸åŒçš„è¯­è¨€éƒ½æœ‰ç›¸åº”çš„ä¸åŒåŒ…æˆ–è€…ç¯å¢ƒç®¡ç†å·¥å…·,æœ¬æ–‡ä»‹ç»ä¸€ä¸‹nodeçš„<br><span id="more"></span></p><p>åœ¨å‰ç«¯å¼€å‘ä¸­,ä½¿ç”¨nodeä½œä¸ºè¿è¡Œæ—¶ç¯å¢ƒæ—¶,å¸¸ä½¿ç”¨npmä¸yarnç­‰ä½œä¸ºåŒ…ç®¡ç†å·¥å…·.</p><h2 id="npmä¸yarnå­˜åœ¨çš„é—®é¢˜"><a href="#npmä¸yarnå­˜åœ¨çš„é—®é¢˜" class="headerlink" title="npmä¸yarnå­˜åœ¨çš„é—®é¢˜"></a>npmä¸yarnå­˜åœ¨çš„é—®é¢˜</h2><h3 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h3><p>å¯¹äºnpm,å…¶æ ¸å¿ƒæ˜¯æœ‰ä¸€ä¸ªpackage.jsonå’Œpackage-lock.jsonæ–‡ä»¶ç”¨äºè®°å½•å’Œè¿½è¸ªåŒ…ç‰ˆæœ¬å’Œä¾èµ–ã€‚</p><p>ä¹‹å‰ç‰ˆæœ¬çš„npmçš„node_modulesç›®å½•ç»“æ„æ˜¯</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">node_modules </span><br><span class="line">â””â”€ ä¾èµ–A </span><br><span class="line">   â”œâ”€ index.<span class="keyword">js </span></span><br><span class="line">   â”œâ”€ package.<span class="keyword">json </span></span><br><span class="line">   â””â”€ node_modules </span><br><span class="line">       â””â”€ ä¾èµ–<span class="keyword">B </span></span><br><span class="line">       â”œâ”€ index.<span class="keyword">js </span></span><br><span class="line">       â””â”€ package.<span class="keyword">json</span></span><br><span class="line"><span class="keyword"></span> â””â”€ ä¾èµ–C </span><br><span class="line">   â”œâ”€ index.<span class="keyword">js </span></span><br><span class="line">   â”œâ”€ package.<span class="keyword">json </span></span><br><span class="line">   â””â”€ node_modules </span><br><span class="line">       â””â”€ ä¾èµ–<span class="keyword">B </span></span><br><span class="line">       â”œâ”€ index.<span class="keyword">js </span></span><br><span class="line">       â””â”€ package.<span class="keyword">json</span></span><br></pre></td></tr></table></figure><p>ä½†å¾ˆæ˜æ˜¾ç”±äºè¿™ç§ä¼šé‡å¤å®‰è£…ä¾èµ–,è¿˜æ— æ³•å…±äº«ä¾èµ–,ç°åœ¨çš„ç‰ˆæœ¬æ˜¯è¿™æ ·</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">node_modules </span><br><span class="line">â””â”€ ä¾èµ–A  </span><br><span class="line">    â”œâ”€ index.<span class="keyword">js </span></span><br><span class="line">    â”œâ”€ package.<span class="keyword">json </span></span><br><span class="line">    â””â”€ node_modules </span><br><span class="line">â””â”€ ä¾èµ–C   </span><br><span class="line">    â”œâ”€ index.<span class="keyword">js </span></span><br><span class="line">    â”œâ”€ package.<span class="keyword">json </span></span><br><span class="line">    â””â”€ node_modules </span><br><span class="line">â””â”€ ä¾èµ–<span class="keyword">B </span></span><br><span class="line">    â”œâ”€ index.<span class="keyword">js </span></span><br><span class="line">    â”œâ”€ package.<span class="keyword">json </span></span><br><span class="line">    â””â”€ node_modules </span><br></pre></td></tr></table></figure><blockquote><p><code>node_modules</code>ä¸‹æ‰€æœ‰çš„ä¾èµ–éƒ½ä¼šå¹³é“ºåˆ°åŒä¸€å±‚çº§ã€‚ç”±äºrequireå¯»æ‰¾åŒ…çš„æœºåˆ¶ï¼Œå¦‚æœAå’ŒCéƒ½ä¾èµ–äº†Bï¼Œé‚£ä¹ˆAå’ŒCåœ¨è‡ªå·±çš„node_modulesä¸­æœªæ‰¾åˆ°ä¾èµ–Bçš„æ—¶å€™ä¼šå‘ä¸Šå¯»æ‰¾ï¼Œå¹¶æœ€ç»ˆåœ¨ä¸ä»–ä»¬åŒçº§çš„node_modulesä¸­æ‰¾åˆ°ä¾èµ–åŒ…Bã€‚ è¿™æ ·<strong>å°±ä¸ä¼šå‡ºç°é‡å¤ä¸‹è½½çš„æƒ…å†µã€‚è€Œä¸”ä¾èµ–å±‚çº§åµŒå¥—ä¹Ÿä¸ä¼šå¤ªæ·±ã€‚å› ä¸ºæ²¡æœ‰é‡å¤çš„ä¸‹è½½ï¼Œæ‰€æœ‰çš„Aå’ŒCéƒ½ä¼šå¯»æ‰¾å¹¶ä¾èµ–äºåŒä¸€ä¸ªBåŒ…ã€‚è‡ªç„¶ä¹Ÿå°±è§£å†³äº†å®ä¾‹æ— æ³•å…±äº«æ•°æ®çš„é—®é¢˜</strong></p></blockquote><p>è¿™ç§æ‰å¹³åŒ–ç»“æ„è™½ç„¶æ˜¯è§£å†³äº†ä¹‹å‰çš„åµŒå¥—é—®é¢˜ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†å¦å¤–ä¸€äº›é—®é¢˜ï¼š</p><ul><li>ä¾èµ–ç»“æ„çš„ä¸ç¡®å®šæ€§</li><li>æ‰å¹³åŒ–ç®—æ³•çš„å¤æ‚åº¦å¢åŠ </li><li>é¡¹ç›®ä¸­ä»ç„¶å¯ä»¥éæ³•è®¿é—®æ²¡æœ‰å£°æ˜è¿‡çš„ä¾èµ–åŒ…(å¹½çµä¾èµ–)</li></ul><p>yarnçš„è¾“å‡ºæ ¼å¼æç¤ºä»¥åŠä¸‹è½½é€Ÿåº¦æ¯”npmæ›´å¿«.</p><h3 id="PNPM"><a href="#PNPM" class="headerlink" title="PNPM"></a>PNPM</h3><p>  ä¸»è¦æ˜¯é‡‡ç”¨ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥çš„æ–¹å¼ï¼Œæé«˜äº†å®‰è£…é€Ÿåº¦ã€èŠ‚çº¦äº†ç£ç›˜ç©ºé—´ã€é¿å…äº†â€œä¾èµ–åˆ†èº«ï¼ˆdoppelgangersï¼‰â€å’Œâ€œå¹»å½±ä¾èµ–ï¼ˆPhantom dependenciesï¼‰â€çš„é—®é¢˜ã€‚è€Œä¸” yarn æ”¯æŒçš„ï¼šå®‰å…¨ã€ç¦»çº¿æ¨¡å¼ã€æ›´å¿«çš„é€Ÿåº¦ï¼Œpnpm éƒ½æ”¯æŒï¼Œè€Œä¸”é€Ÿåº¦è¿˜è¦æ›´å¿«ã€‚</p><p>ç°åœ¨ä¸€èˆ¬ç”¨çš„è¿˜æ˜¯npmæˆ–è€…yarn.</p><p>æœ€åå†ä»‹ç»ä¸€äº›æ‰“åŒ…å·¥å…·.</p><p>å¸¸ç”¨çš„æ‰“åŒ…å·¥å…·æœ‰Parcel,Rollupä¸Webpack,ç°åœ¨ä¹Ÿå¸¸å¸¸ä½¿ç”¨æ¯”è¾ƒç«çš„Vite,å…¶åŠŸèƒ½ä¹Ÿä¸ä»…é™äºæ‰“åŒ….</p><p><strong>å¯¹äºåº”ç”¨ä½¿ç”¨ webpackæˆ–è€…Viteï¼Œå¯¹äºç±»åº“ä½¿ç”¨ Rollup</strong></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ol><li><a href="https://github.com/pnpm/pnpm">pnpm/pnpm: Fast, disk space efficient package manager (github.com)</a></li><li><a href="https://nodejs.org/en">Node.js (nodejs.org)</a></li><li><a href="https://www.ruanyifeng.com/blog/2020/08/how-nodejs-use-es6-module.html">Node.js å¦‚ä½•å¤„ç† ES6 æ¨¡å— - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— (ruanyifeng.com)</a></li><li><a href="https://www.yarnpkg.cn/">Home | Yarn - JavaScript è½¯ä»¶åŒ…ç®¡ç†å™¨ | Yarnä¸­æ–‡æ–‡æ¡£ - Yarnä¸­æ–‡ç½‘ (yarnpkg.cn)</a></li><li><a href="https://www.yarnpkg.cn/">Home | Yarn - JavaScript è½¯ä»¶åŒ…ç®¡ç†å™¨ | Yarnä¸­æ–‡æ–‡æ¡£ - Yarnä¸­æ–‡ç½‘ (yarnpkg.cn)</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¸åŒçš„è¯­è¨€éƒ½æœ‰ç›¸åº”çš„ä¸åŒåŒ…æˆ–è€…ç¯å¢ƒç®¡ç†å·¥å…·,æœ¬æ–‡ä»‹ç»ä¸€ä¸‹nodeçš„&lt;br&gt;</summary>
    
    
    
    
    <category term="node" scheme="https://www.sekyoro.top/tags/node/"/>
    
    <category term="npm" scheme="https://www.sekyoro.top/tags/npm/"/>
    
    <category term="yarn" scheme="https://www.sekyoro.top/tags/yarn/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥Clashé…ç½®æ–‡ä»¶</title>
    <link href="https://www.sekyoro.top/2023/06/03/%E6%B7%B1%E5%85%A5Clash%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"/>
    <id>https://www.sekyoro.top/2023/06/03/%E6%B7%B1%E5%85%A5Clash%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</id>
    <published>2023-06-03T13:16:28.000Z</published>
    <updated>2023-06-03T14:35:26.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>æœ€è¿‘ç”¨ä»£ç†éƒ½æ˜¯ç”¨çš„Clash,è‡ªå·±ä¹Ÿæ­äº†ä¸€ä¸ªä»£ç†æœåŠ¡å™¨,é¡ºä¾¿çœ‹çœ‹Clashçš„é…ç½®æ–‡ä»¶.<br><span id="more"></span></p><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p>æœ‰ä¸€äº›vmess,ssr,ssè½¬clashé…ç½®æ–‡ä»¶çš„ç½‘ç«™,æ¯”å¦‚ä¸‹é¢çš„:</p><p><a href="https://sub-web.wcc.best/">Subscription Converter (wcc.best)</a>,<a href="https://a.ppconverter.eu.org/">Proxy Provider Converter (ppconverter.eu.org)</a></p><p><a href="https://acl4ssr-sub.github.io/">ACL4SSR åœ¨çº¿è®¢é˜…è½¬æ¢ (acl4ssr-sub.github.io)</a></p><p><a href="https://sub.v1.mk/">åœ¨çº¿è®¢é˜…è½¬æ¢å·¥å…· (v1.mk)</a></p><p>ä¸è¿‡æœ‰ä¸€äº›ç•¥æ˜¾å†—ä½™è€Œä¸”æœ‰è‡ªå·±çš„ç½‘ç«™å,æ‰€ä»¥æ‰“ç®—çœ‹çœ‹é…ç½®æ–‡ä»¶æ ¼å¼è‡ªå·±æ”¹æ”¹</p><h3 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p>å¯ä»¥çœ‹çœ‹ä¸€èˆ¬çš„é…ç½®æ–‡ä»¶æ˜¯å•¥æ ·çš„,å¦‚æœä½ æœ‰è‡ªå·±çš„clashé…ç½®æ–‡ä»¶å°±å¯ä»¥çœ‹çœ‹,ä¸ºäº†é¿å…ä»£ç†è¢«ä½¿ç”¨,æˆ‘è¿™é‡Œå°±ç®€å•è¯´è¯´.</p><p><img data-src="https://s2.loli.net/2023/06/03/HwIUPr4Kq3kjvWx.png" alt="image-20230603214331664"></p><p>portç”¨äºé…ç½®HTTP(S)ä»£ç†,æ­¤å¤–ä¹Ÿæœ‰socks-portç”¨äºåŒ¹é…ä¹‹åŸºäºsocksçš„ä»£ç†</p><p>å¯ä»¥ä½¿ç”¨mixed-portæŒ‡å®šHTTP(S)å’ŒSOCKS4(A)/SOCKS5åœ¨åŒä¸€ç«¯å£,</p><p>allow-lan: trueè¡¨ç¤ºå±€åŸŸç½‘å†…å¯ä½¿ç”¨,è¿™ä¸ªä¸€èˆ¬é€‚åˆæ”¾åœ¨è·¯ç”±å™¨ä¸Šçš„æœåŠ¡å™¨.</p><p>modeæŒ‡å®šclashè·¯ç”±å·¥ä½œæ¨¡å¼,æœ‰ä¸‰ç§æ¨¡å¼åŒ…æ‹¬rule,global,direct</p><blockquote><p>rule: rule-based packet routing</p><p>global: all packets will be forwarded to a single endpoint</p><p>direct: directly forward the packets to the Internet</p></blockquote><p>external-controlleræŒ‡å®šclashçš„restfulapiè°ƒç”¨ç›‘å¬åœ°å€,å¦‚æœä½ æƒ³è‡ªå·±å†™è¯·æ±‚å¯ä»¥è®¾ç½®è¿™ä¸ªå‚æ•°.</p><h3 id="æ ¸å¿ƒ"><a href="#æ ¸å¿ƒ" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h3><p>å‰©ä¸‹æœ€é‡è¦çš„ä¸‰ä¸ªå‚æ•°proxies,proxy gropsä»¥åŠProxy Providers,å…¶å®è¿˜æœ‰rules.</p><p>å¯¹äºproxieså°±æ˜¯ç”¨äºé…ç½®è‡ªå·±çš„ä»£ç†çš„,åŒ…æ‹¬ä»¥ä¸‹å‡ ç§åè®®</p><p><img data-src="https://s2.loli.net/2023/06/03/mHEhSLt9gqKAnRO.png" alt="image-20230603220002530"></p><p>å¸¸ç”¨v2rayçš„vmessä»¥åŠssr.</p><p>å¯¹äºvmess,é…ç½®æ ¼å¼å¦‚ä¸‹.è‡³äºå¦‚ä½•è·å¾—vmessé“¾æ¥,å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« è‡ªå·±æ­å»º,å½“ç„¶ä»˜é’±ä¹°å…¶ä»–äººçš„ä¹Ÿè¡Œ.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">proxies:</span></span><br><span class="line">  <span class="bullet">-</span> &#123;<span class="attr">name:</span> <span class="string">proxy_name</span>, <span class="attr">server:</span> <span class="string">proxy_ip</span>, <span class="attr">port:</span> <span class="string">proxy_port</span>, <span class="attr">type:</span> <span class="string">vmess</span>, <span class="attr">uuid:</span> <span class="string">proxy_uuid</span>, <span class="attr">alterId:</span> <span class="number">0</span>, <span class="attr">cipher:</span> <span class="string">auto</span>, <span class="attr">tls:</span> <span class="literal">false</span>&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç›¸å½“äºå®šä¹‰äº†å¯ç”¨çš„ä»£ç†,æˆ–è€…å¦‚ä¸‹æ ¼å¼è®¾ç½®</p><p><img data-src="https://s2.loli.net/2023/06/03/lZYbvEq3WmygtIr.png" alt="image-20230603221051028"></p><p>å…¶ä¸­,nameå¯ä»¥ç”¨äºåé¢proxy-groupçš„å¼•ç”¨,typeå°±æ˜¯åè®®ç±»å‹,å…¶ä»–çš„ä¸å…·ä½“é…ç½®æœ‰å…³</p><p>proxy-groupè®¾ç½®äº†clashçš„æ˜¾ç¤º,ç›¸å½“äºä¸€ä¸ªåˆ†ç»„</p><p><img data-src="https://s2.loli.net/2023/06/03/9h85ulEtzCJSIjf.png" alt="image-20230603220831027" style="zoom:50%;" /></p><p>æœ€ä¸Šé¢çš„DIRECTå’ŒREJECTæ˜¯é»˜è®¤çš„</p><ul><li>Directï¼šä¸èµ°ä»£ç†</li><li>Rejectï¼šç¦æ­¢è®¿é—®</li></ul><p>æ­¤å¤–å¯ä»¥åµŒå¥—ä½¿ç”¨,ä¹Ÿå°±æ˜¯proxy-groupä¸­çš„proxiesä¹Ÿå¯ä»¥æ˜¯proxy-groupä¸­çš„é¡¹ç›®,è€Œtypeè®¾ç½®ä¸ºselectæ˜¯ç”¨äºé€‰æ‹©proxy.</p><p><img data-src="https://s2.loli.net/2023/06/03/neiomlIY6NMH2CE.png" alt="image-20230603222406981" style="zoom:50%;" /></p><p>ç„¶åå¯¹äºä¸€äº›ç½‘ç«™æˆ‘ä»¬æƒ³ç›´è¿,å¯¹äºå¦ä¸€äº›ä½¿ç”¨ä¸åŒçš„ä»£ç†,è¿™æ ·å°±å¯ä»¥ä½¿ç”¨rules.</p><blockquote><p>ä¸€ä¸ªä»£ç†è§„åˆ™ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><ol><li>åº”ç”¨å¯¹è±¡ï¼ŒåŒ…æ‹¬å®Œæ•´åŸŸå(DOMAIN)ã€åŸŸååç¼€(DOMAIN-SUFFIX)ã€åŸŸåå…³é”®å­—(DOMAIN-KEYWORD)ã€IPåœ°å€/æ®µ(IP-CIDR)ä»¥åŠGEOIPï¼›</li><li>ä½œç”¨çš„IPæˆ–è€…åŸŸåï¼›</li><li>é‡‡å–çš„è§„åˆ™ï¼ŒåŒ…æ‹¬ç›´è¿(DIRECT)ã€å±è”½(REJECT)ï¼Œèµ°æŸä¸ªä»£ç†ç»„(å°±æ˜¯åˆšæ‰å®šä¹‰çš„proxy-groups)</li></ol></blockquote><p><img data-src="https://s2.loli.net/2023/06/03/XMteCPELH5D3O94.png" alt="image-20230603222609199" style="zoom:50%;" /></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ol><li><a href="https://fndroid.github.io/clash-win-docs/contents/ui/profiles.html">é…ç½® Profiles Â· Clash for Windows (fndroid.github.io)</a></li><li><a href="https://vpsgongyi.com/p/2396/">æ·±å…¥ç†è§£Clashé…ç½®æ–‡ä»¶ - VPSæ”»ç•¥ (vpsgongyi.com)</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘ç”¨ä»£ç†éƒ½æ˜¯ç”¨çš„Clash,è‡ªå·±ä¹Ÿæ­äº†ä¸€ä¸ªä»£ç†æœåŠ¡å™¨,é¡ºä¾¿çœ‹çœ‹Clashçš„é…ç½®æ–‡ä»¶.&lt;br&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯æ•™ç¨‹:å¦‚ä½•è‡ªå·±æ­å»ºä¸€ä¸ªVPN</title>
    <link href="https://www.sekyoro.top/2023/06/03/%E6%8A%80%E6%9C%AF%E6%95%99%E7%A8%8B-%E5%A6%82%E4%BD%95%E8%87%AA%E5%B7%B1%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAVPN/"/>
    <id>https://www.sekyoro.top/2023/06/03/%E6%8A%80%E6%9C%AF%E6%95%99%E7%A8%8B-%E5%A6%82%E4%BD%95%E8%87%AA%E5%B7%B1%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAVPN/</id>
    <published>2023-06-03T06:52:16.000Z</published>
    <updated>2023-08-01T06:14:42.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>ä»…ä¾›æŠ€æœ¯å­¦ä¹ ä¸äº¤æµ<br><span id="more"></span></p><h2 id="VPNç®€å•ä»‹ç»"><a href="#VPNç®€å•ä»‹ç»" class="headerlink" title="VPNç®€å•ä»‹ç»"></a>VPNç®€å•ä»‹ç»</h2><p>é¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯,VPNæœ¬æ˜¯ä¸€ç§æŠ€æœ¯,è‹±æ–‡æ˜¯Virtual Private Network,é¡¾åæ€ä¹‰æ˜¯è™šæ‹ŸåŒ–çš„ç§äººç½‘ç»œ.ç®€å•æ¥è¯´å°±æ˜¯åŸºäºä»£ç†IPç„¶åè‡ªå·±åœ¨ä¸Šé¢åŠ ä¸€äº›åŠŸèƒ½.åƒæ˜¯è‡ªå·±çš„æ‰‹æœºæˆ–è€…PCå…¶å®éƒ½æœ‰è¿æ¥VPNçš„åŠŸèƒ½.æ­¤å¤–ä¹Ÿæœ‰ä¸€äº›è¿æ¥VPNçš„å®¢æˆ·ç«¯è½¯ä»¶.</p><p><img data-src="https://s2.loli.net/2023/06/03/W7lEcMw8eZK9IDo.png" alt="image-20230603150053505" style="zoom:50%;" /></p><h3 id="VPNå¥½å¤„"><a href="#VPNå¥½å¤„" class="headerlink" title="VPNå¥½å¤„"></a>VPNå¥½å¤„</h3><blockquote><ul><li><strong>åŠ å¯† IP åœ°å€ï¼š</strong>VPN çš„ä¸»è¦å·¥ä½œå°±æ˜¯å¯¹ ISP å’Œå…¶ä»–ç¬¬ä¸‰æ–¹éšè—æ‚¨çš„ IP åœ°å€ã€‚è¿™æ ·å½“æ‚¨åœ¨çº¿å‘é€å’Œæ¥æ”¶ä¿¡æ¯æ—¶ï¼Œå°±ä¸ç”¨æ‹…å¿ƒä¼šæœ‰è¢«é™¤äº†æ‚¨å’Œ VPN æä¾›å•†ä»¥å¤–çš„ä»»ä½•äººçœ‹åˆ°çš„é£é™©ã€‚</li><li><strong>åŠ å¯†åè®®ï¼š</strong>VPN è¿˜åº”è¯¥é˜²æ­¢æ‚¨ç•™ä¸‹ç—•è¿¹ï¼Œä¾‹å¦‚ï¼Œäº’è”ç½‘å†å²è®°å½•ã€æœç´¢å†å²è®°å½•å’Œ cookieã€‚åŠ å¯† cookie å°¤å…¶é‡è¦ï¼Œå› ä¸ºèƒ½é˜»æ­¢ç¬¬ä¸‰æ–¹è®¿é—®ä¿å¯†ä¿¡æ¯ï¼Œå¦‚ä¸ªäººæ•°æ®ã€è´¢åŠ¡ä¿¡æ¯å’Œç½‘ç«™ä¸Šçš„å…¶ä»–å†…å®¹ã€‚</li><li><strong>è‡ªæ€å¼€å…³ï¼š</strong>å¦‚æœæ‚¨çš„ VPN è¿æ¥çªç„¶ä¸­æ–­ï¼Œæ‚¨çš„å®‰å…¨è¿æ¥ä¹Ÿä¼šä¸­æ–­ã€‚å¥½çš„ VPN èƒ½æ£€æµ‹åˆ°è¿™ç§çªç„¶åœæœºå¹¶ç»ˆæ­¢é¢„å…ˆé€‰æ‹©çš„ç¨‹åºï¼Œä»è€Œé™ä½æ•°æ®è¢«æ³„éœ²çš„å¯èƒ½æ€§ã€‚</li><li><strong>åŒå› ç´ èº«ä»½éªŒè¯ï¼š</strong>é€šè¿‡ä½¿ç”¨å„ç§èº«ä»½éªŒè¯æ–¹æ³•ï¼Œå¼ºå¤§çš„ VPN èƒ½å¤Ÿæ£€æŸ¥è¯•å›¾ç™»å½•çš„æ¯ä¸ªäººã€‚ä¾‹å¦‚ï¼šæ‚¨å¯èƒ½ä¼šè¢«æé†’è¾“å…¥å¯†ç ï¼Œç„¶åä¼šå°†ä»£ç å‘é€åˆ°æ‚¨çš„æ‰‹æœºã€‚è¿™ä½¿å¾—æœªç»é‚€è¯·çš„ç¬¬ä¸‰æ–¹éš¾ä»¥è®¿é—®æ‚¨çš„å®‰å…¨è¿æ¥ã€‚</li></ul></blockquote><p>æœ¬ç¯‡æ–‡ç« ä¸»è¦ç›®çš„æ˜¯åŠ¨æ‰‹è‡ªå·±æ­å»ºä¸€ä¸ªè®¿é—®å¤–ç½‘çš„VPN,ä¸ºæ­¤éœ€è¦ä¸€ä¸ªæ­å»ºåœ¨å¤§é™†åœ°åŒºä»¥å¤–çš„çš„æœåŠ¡å™¨,å› æ­¤éœ€è¦ä¸€ä¸ªæ€§ä»·æ¯”é«˜çš„å›½å¤–äº‘æœåŠ¡å™¨å•†.</p><p>è¿™é‡Œå°±ä¸»è¦ä½¿ç”¨<a href="https://www.vultr.com/register/">Vultr</a>äº‘æœåŠ¡å•†,äº‹å®ä¸Šå›½å†…çš„ä¹Ÿè¡Œ,ä¸è¿‡ä¸ºäº†å®‰å…¨è€ƒè™‘è¿˜æ˜¯ç®—äº†.æ­¤å¤–Vultræ˜¯æ”¯æŒæ”¯ä»˜å®æ”¯ä»˜çš„,ä¸éœ€è¦å†å»åŠä¸€å¼ VISAé“¶è¡Œå¡äº†,è¿™å°±å¾ˆæ»¡è¶³éœ€æ±‚äº†.</p><p>ä¸»è¦æ–¹æ³•æ˜¯ä½¿ç”¨æ€§ä»·æ¯”é«˜çš„æœåŠ¡å•†çš„æœåŠ¡å™¨å†æ­å»ºVPNæœåŠ¡ç«¯è½¯ä»¶è¿›è¡Œé…ç½®.</p><p>ä¸€äº›VPSæœåŠ¡å•†æ¨è<a href="https://vpsxueyuan.com/2022-best-vps/">2023å¹´æœ€å€¼å¾—è´­ä¹°çš„VPSæ¨è</a></p><h2 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h2><h3 id="æ³¨å†ŒVultr"><a href="#æ³¨å†ŒVultr" class="headerlink" title="æ³¨å†ŒVultr"></a>æ³¨å†ŒVultr</h3><p>å¯ä»¥ç‚¹å‡»æˆ‘çš„é‚€è¯·è¿›è¡Œæ³¨å†Œ<a href="https://www.vultr.com/?ref=9473485">æ³¨å†Œåœ°å€</a>,æ­¤å¤–ä¹Ÿæœ‰<a href="https://www.vultr.com/?ref=9473486-8H">ä¼˜æƒ é“¾æ¥</a></p><p>å…¶ä»–å¯èƒ½å·²ç»å¤±æ•ˆçš„æ´»åŠ¨<a href="https://www.vultrcn.com/11.html">Vulträ¼˜æƒ ç æ•´ç†</a>,åŒ…æ‹¬å……å¤šå°‘é€å¤šå°‘(æœ€å¤š100ç¾é‡‘),å¦å¤–è¿˜æœ‰é€ç¾é‡‘ä½™é¢çš„,æ€»ä¹‹è¿˜æ˜¯ä¸é”™çš„.</p><p><img data-src="https://s2.loli.net/2023/06/03/8tl2yLZskjWGTcY.png" alt="image-20230603160407745" style="zoom:50%;" /></p><h3 id="å……å€¼"><a href="#å……å€¼" class="headerlink" title="å……å€¼"></a>å……å€¼</h3><p>è¿™é‡Œä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜,æ­¤å¤–å¯ä»¥ä½¿ç”¨ä¸€äº›å…‘æ¢ç è·å–ä¸€äº›ç¦åˆ©,ä¸‹é¢ç»†è¯´.</p><p><img data-src="https://s2.loli.net/2023/06/03/tD7BMopWwsmnvI6.png" alt="image-20230603160605588" style="zoom:50%;" /></p><h3 id="è´­ä¹°æœåŠ¡å™¨"><a href="#è´­ä¹°æœåŠ¡å™¨" class="headerlink" title="è´­ä¹°æœåŠ¡å™¨"></a>è´­ä¹°æœåŠ¡å™¨</h3><p><img data-src="https://s2.loli.net/2023/06/03/Uj9iGZ4Wo6emthV.png" alt="image-20230603151410859" style="zoom:50%;" /></p><p>é€‰æ‹©Regular Performance,</p><p><img data-src="https://s2.loli.net/2023/06/03/7ckwCSKsh9PLvTo.png" alt="image-20230603155931403"></p><p>æœ€ä½åªè¦ä¸€ä¸ªæœˆ2.5åˆ€,ä¸è¿‡è²Œä¼¼è¿™ä¸ªåªæ”¯æŒIPV6,æ‰€ä»¥åªèƒ½å†åŠ ä¸€åˆ€æ”¯æŒIPV4</p><p><img data-src="https://s2.loli.net/2023/06/03/7jpMzXtLNAgZIhU.png" alt="image-20230603155808005"></p><p>æœ€ååŠ ä¸Š0.7åˆ€å¤‡ä»½,æ‰€ä»¥ä¸€ä¸ªæœˆå°±æ˜¯4.2åˆ€.è¿˜æ˜¯æ¯”è¾ƒä¾¿å®œçš„ã€‚ç›®å‰å¤§è‡´æƒ…å†µæ€»ç»“å¦‚ä¸‹</p><div class="table-container"><table><thead><tr><th style="text-align:center">CPU</th><th style="text-align:center">å†…å­˜</th><th style="text-align:center">ç¡¬ç›˜</th><th style="text-align:center">å¸¦å®½</th><th style="text-align:center">IP</th><th style="text-align:center">ä»·æ ¼</th></tr></thead><tbody><tr><td style="text-align:center">1 æ ¸</td><td style="text-align:center">512MB</td><td style="text-align:center">10GB</td><td style="text-align:center">0.5TB</td><td style="text-align:center">IPv6</td><td style="text-align:center"><a href="https://guowaivps.org/go/vultr">$2.5/æœˆ</a></td></tr><tr><td style="text-align:center">1 æ ¸</td><td style="text-align:center">512MB</td><td style="text-align:center">10GB</td><td style="text-align:center">0.5TB</td><td style="text-align:center">IPv4</td><td style="text-align:center"><a href="https://guowaivps.org/go/vultr">$3.5/æœˆ</a></td></tr><tr><td style="text-align:center">1 æ ¸</td><td style="text-align:center">1GB</td><td style="text-align:center">25GB</td><td style="text-align:center">1TB</td><td style="text-align:center">IPv4</td><td style="text-align:center"><a href="https://guowaivps.org/go/vultr">$5/æœˆ</a></td></tr><tr><td style="text-align:center">1 æ ¸</td><td style="text-align:center">2GB</td><td style="text-align:center">55GB</td><td style="text-align:center">2TB</td><td style="text-align:center">IPv4</td><td style="text-align:center"><a href="https://guowaivps.org/go/vultr">$10/æœˆ</a></td></tr><tr><td style="text-align:center">2 æ ¸</td><td style="text-align:center">4GB</td><td style="text-align:center">80GB</td><td style="text-align:center">3TB</td><td style="text-align:center">IPv4</td><td style="text-align:center"><a href="https://guowaivps.org/go/vultr">$20/æœˆ</a></td></tr><tr><td style="text-align:center">4 æ ¸</td><td style="text-align:center">8GB</td><td style="text-align:center">160GB</td><td style="text-align:center">4TB</td><td style="text-align:center">IPv4</td><td style="text-align:center"><a href="https://guowaivps.org/go/vultr">$40/æœˆ</a></td></tr><tr><td style="text-align:center">6 æ ¸</td><td style="text-align:center">16GB</td><td style="text-align:center">320GB</td><td style="text-align:center">5TB</td><td style="text-align:center">IPv4</td><td style="text-align:center"><a href="https://guowaivps.org/go/vultr">$80/æœˆ</a></td></tr><tr><td style="text-align:center">8 æ ¸</td><td style="text-align:center">32GB</td><td style="text-align:center">640GB</td><td style="text-align:center">6TB</td><td style="text-align:center">IPv4</td><td style="text-align:center"><a href="https://guowaivps.org/go/vultr">$160/æœˆ</a></td></tr><tr><td style="text-align:center">16 æ ¸</td><td style="text-align:center">64GB</td><td style="text-align:center">1280GB</td><td style="text-align:center">10TB</td><td style="text-align:center">IPv4</td><td style="text-align:center"><a href="https://guowaivps.org/go/vultr">$320/æœˆ</a></td></tr><tr><td style="text-align:center">24 æ ¸</td><td style="text-align:center">96GB</td><td style="text-align:center">1600GB</td><td style="text-align:center">15TB</td><td style="text-align:center">IPv4</td><td style="text-align:center"><a href="https://guowaivps.org/go/vultr">$640/æœˆ</a></td></tr></tbody></table></div><p>æœ€åè´­ä¹°çš„æœåŠ¡å™¨å¦‚ä¸‹</p><p><img data-src="https://s2.loli.net/2023/06/03/xnDOYvcGfg7TRb1.png" alt="image-20230603160314905"></p><p>ç‚¹å‡»å®ä¾‹,è¿›å…¥åæŸ¥çœ‹ip,ç”¨æˆ·åå’Œå¯†ç ,è¿™æ ·æ–¹ä¾¿ä½¿ç”¨ç»ˆç«¯è¿æ¥</p><p><img data-src="https://s2.loli.net/2023/06/03/T62l48bHnrwBJjM.png" alt="image-20230603161001092"></p><p>æ­¤å¤–æµ‹è¯•ä¸€ä¸‹èƒ½ä¸èƒ½è¿æ¥,æœ¬åœ°pingä¸€ä¸‹,pingä¸é€šå¯ä»¥åˆ æ‰,åˆ æ‰åä¸è®¡è´¹.</p><p><img data-src="https://s2.loli.net/2023/06/03/l28InbCFUPd7yrS.png" alt="image-20230603161143254" style="zoom:50%;" /></p><h3 id="å®‰è£…æœåŠ¡ç«¯VPN"><a href="#å®‰è£…æœåŠ¡ç«¯VPN" class="headerlink" title="å®‰è£…æœåŠ¡ç«¯VPN"></a>å®‰è£…æœåŠ¡ç«¯VPN</h3><p>ä¸»è¦æœ‰shadowsockså’ŒV2ray,ç»ˆç«¯å¯ä»¥ä½¿ç”¨Xshellæˆ–è€…PuTTY.</p><h4 id="V2Ray"><a href="#V2Ray" class="headerlink" title="V2Ray"></a>V2Ray</h4><p>è¿™é‡Œä½¿ç”¨V2ray,å¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–çš„å¯ä»¥çœ‹çœ‹å‚è€ƒé“¾æ¥.åˆ©ç”¨çš„ä»“åº“æ˜¯<a href="https://github.com/xiaoming2028/FreePAC/wiki/ç¾å›½VPS-Hostwindsä¸€é”®è„šæœ¬æ­å»ºV2Rayæœ€æ–°ä¸­æ–‡æ•™ç¨‹">ä¸€é”®è„šæœ¬æ­å»ºV2Rayæœ€æ–°ä¸­æ–‡æ•™ç¨‹</a></p><blockquote><h4 id="V2Rayçš„ä¼˜åŠ¿"><a href="#V2Rayçš„ä¼˜åŠ¿" class="headerlink" title="V2Rayçš„ä¼˜åŠ¿"></a><strong>V2Rayçš„ä¼˜åŠ¿</strong></h4><blockquote><ul><li><strong>æ›´å®Œå–„çš„åè®®:</strong> V2Ray ä½¿ç”¨äº†æ–°çš„è‡ªè¡Œç ”å‘çš„ VMess åè®®ï¼Œæ”¹æ­£äº† Shadowsocks ä¸€äº›å·²æœ‰çš„ç¼ºç‚¹ï¼Œæ›´éš¾è¢«å¢™æ£€æµ‹åˆ°ï¼ˆä¸ä¿è¯å¯é æ€§ï¼‰</li><li><strong>æ›´å¼ºå¤§çš„æ€§èƒ½:</strong> ç½‘ç»œæ€§èƒ½æ›´å¥½ï¼Œå…·ä½“æ•°æ®å¯ä»¥çœ‹ V2Ray å®˜æ–¹åšå®¢</li><li><strong>æ›´ä¸°å¯Œçš„åŠŸèƒ½:</strong></li></ul></blockquote></blockquote><p>ä½¿ç”¨å‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -s -L https://git.io/v2ray.sh)</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç°INTERNAL ERROR 500,å¯ä»¥å†è¯•è¯•.å¦‚æœå‡ºç°å…¶ä»–é”™è¯¯,è‡ªå·±å†æ”¹æ”¹.</p><p>å®‰è£…å¥½åå‡ºç°å¦‚ä¸‹å›¾</p><p><img data-src="https://s2.loli.net/2023/06/03/AfylcpMsmGJRgV9.png" alt="image-20230603164722550" style="zoom:50%;" /></p><p>å‘½ä»¤V2rayè¿›è¡Œè¿›ä¸€æ­¥é…ç½®,ä¿®æ”¹åè®®,ç«¯å£ç­‰</p><p><img data-src="https://s2.loli.net/2023/06/03/CEuhbjH3zeXWNYd.png" alt="image-20230603164801527" style="zoom:50%;" /></p><p>ä½¿ç”¨v2ray ipæŸ¥çœ‹è‡ªå·±çš„ip</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=5200/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>é˜²ç«å¢™å¼€å¯ç«¯å£,è¿™æ˜¯å¾ˆæœ‰å¿…è¦çš„.</p><p>æœ€åå¯ä»¥ä½¿ç”¨è¿™ä¸ªç½‘ç«™<a href="https://ping.sx/check-port">Check Port | Ping.Sx</a>æ£€æµ‹ä¸€ä¸‹,å¦‚æœæ˜¯ç»¿è‰²çš„reachableå°±å¯ä»¥äº†.</p><p><img data-src="https://s2.loli.net/2023/06/03/9diQ3kxVCUaZG5j.png" alt="image-20230603170821614"></p><p>å…¶ä»–å‘½ä»¤æ·»åŠ é…ç½®ï¼š</p><ul><li><code>v2ray add</code> -&gt; æ·»åŠ é…ç½®</li><li><code>v2ray add ss</code> -&gt; æ·»åŠ ä¸€ä¸ª Shadowsocks é…ç½®</li><li><code>v2ray add tcp</code> -&gt; æ·»åŠ ä¸€ä¸ª VMess-TCP é…ç½®</li><li><code>v2ray add kcpd</code> -&gt; æ·»åŠ ä¸€ä¸ª VMess-mKCP-dynamic-port åŠ¨æ€ç«¯å£é…ç½®</li></ul><p><img data-src="https://s2.loli.net/2023/06/03/r5E2pmuKCgSx7RF.png" alt="image-20230603170717004"></p><p>ä¼˜åŒ–v2ray</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v2ray bbr</span><br></pre></td></tr></table></figure><h4 id="Shadowsocks"><a href="#Shadowsocks" class="headerlink" title="Shadowsocks"></a>Shadowsocks</h4><p>æ­å»ºShadowsocksæ•™ç¨‹å¦‚ä¸‹,åŸºæœ¬æ–¹æ³•å·®ä¸å¤š</p><p><a href="https://github.com/xiaoming2028/FreePAC/wiki/VPSä¸€é”®è„šæœ¬æ­å»ºSSRæ•™ç¨‹ï¼ŒYoutubeçœ‹4kè§†é¢‘æ— å‹åŠ›">VPSä¸€é”®è„šæœ¬æ­å»ºSSRæ•™ç¨‹</a></p><p><a href="https://github.com/clown-coding/vpn">clown-coding/vpn: å¿«é€Ÿæ­å»ºä¸€ä¸ªè‡ªå·±çš„VPNç¿»å¢™ç§‘å­¦ä¸Šç½‘ (github.com)</a></p><p><a href="https://github.com/sucong426/VPN">å¿«é€Ÿæ­å»ºä¸ªäººVPN</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget â€“no-check-certificate -O shadowsocks.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x shadowsocks.sh</span><br><span class="line">./shadowsocks.sh 2&gt;&amp;1 | tee shadowsocks.log</span><br></pre></td></tr></table></figure><p>ç„¶åæ ¹æ®æƒ…å†µè‡ªå·±é…ç½®å³å¯</p><p><img data-src="https://s2.loli.net/2023/06/03/4AVn5yZ3Q6EU8fj.png" alt="image-20230603180917790" style="zoom: 80%;" /></p><p>å®‰è£…å®Œæˆåå°±æœ‰ç›¸å…³ä¿¡æ¯.</p><p>è¿˜æœ‰å¦ä¸€ä¸ªè„šæœ¬</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O shadowsocks-all.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh</span><br><span class="line">chmod +x shadowsocks-all.sh</span><br><span class="line">./shadowsocks-all.sh 2&gt;&amp;1 | tee shadowsocks-all.log</span><br></pre></td></tr></table></figure><p><del>é…ç½®æ›´å¤š,ä½†æˆ‘ä½¿ç”¨è¿™ä¸ªæœ‰æ—¶ä¸‹è½½ä¸äº†</del>åé¢å‘ç°ç”±äºæˆ‘æ˜¯ç”¨Centos 8.xç‰ˆæœ¬çš„æ“ä½œç³»ç»Ÿ,EPELè½¯ä»¶åŒ…æœ‰ç‚¹é—®é¢˜.å‚è€ƒè¿™ç¯‡æ–‡ç« è§£å†³<a href="https://zhuanlan.zhihu.com/p/90442949">å¦‚ä½•åœ¨ CentOS 8 å’Œ RHEL 8 æœåŠ¡å™¨ä¸Šå¯ç”¨ EPEL ä»“åº“ - çŸ¥ä¹ (zhihu.com)</a> ,æœ€åè¿˜æ˜¯ä¸è¡Œçš„è¯å»ºè®®æ¢OS,ç”¨Debian,Debianå¼€å¯æŸä¸ªç«¯å£å‘½ä»¤<a href="https://www.jianshu.com/p/94e95f0b2a8a">Debian 10 iptablesé˜²ç«å¢™å¸¸ç”¨å‘½ä»¤ - ç®€ä¹¦ (jianshu.com)</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport 8080 -j ACCEPT</span><br></pre></td></tr></table></figure><p><strong>æœ€åè®°å¾—é‡å¯ä¸€ä¸‹</strong></p><p>å¯ä»¥ä½¿ç”¨<a href="https://bianyuan.xyz/">è¾¹ç¼˜@è®¢é˜…è½¬æ¢API (bianyuan.xyz)</a>è½¬æ¢ä¸ºclashè®¢é˜…åœ°å€,å› ä¸ºæˆ‘æœ¬èº«ç”¨clashå®¢æˆ·ç«¯æ¯”è¾ƒå¤š</p><p><img data-src="https://s2.loli.net/2023/06/03/85rJdCYwav49Myg.png" alt="image-20230603173315958"></p><h3 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h3><p>å®¢æˆ·ç«¯ä¸»è¦æœ‰V2ray,ShadowSocksä»¥åŠç°åœ¨çš„Clash,å¯¼å…¥æœåŠ¡ç«¯å¯¹åº”çš„é“¾æ¥å³å¯.</p><p><a href="https://www.howru.cc/articles/414.html">Shadowsocks Windowså®¢æˆ·ç«¯å¿«é€Ÿä½¿ç”¨æŒ‡å— - å°å°çš„å®‡å®™ (howru.cc)</a></p><p><img data-src="https://s2.loli.net/2023/06/03/WLHpD6Bc5SYVi4P.png" alt="image-20230603172709508" style="zoom:50%;" /></p><p>è¿™é‡Œä¸åšè¿‡å¤šä»‹ç»,å¯ä»¥çœ‹çœ‹å‚è€ƒèµ„æ–™.</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://www.kaspersky.com.cn/resource-center/definitions/what-is-a-vpn">ä»€ä¹ˆæ˜¯ VPNï¼Œå®ƒæ˜¯æ€æ ·è¿ä½œçš„ï¼Ÿ (kaspersky.com.cn)</a></li><li><a href="https://github.com/yukaiji/buildVpn">yukaiji/buildVpn: å›¾æ–‡æ•™ç¨‹æ­å»ºä¸€ä¸ªvpnç¿»å¢™ (github.com)</a></li><li><a href="https://github.com/sucong426/freevpn">sucong426/freevpn: æ–°æ‰‹æ­å»ºVPNç§‘å­¦ä¸Šç½‘æ•™ç¨‹/è‡ªç”±/v2ray/ç¿»å¢™æ¢¯å­/å¿«é€Ÿæœ€æ–°/å…è´¹æœºåœº (github.com)</a></li><li><a href="https://github.com/sucong426/VPN">sucong426/VPN: å¿«é€Ÿæ­å»ºä¸ªäººVPN/ç§‘å­¦ä¸Šç½‘/ç¿»å¢™/æ•™ç¨‹/ssr/ss/bbr/æ¢¯å­æ­å»º/è‡ªå»ºæœºåœº/è‡ªç”±ä¸Šç½‘/ä»£ç†æœåŠ¡/VPN/2023æœ€æ–°æ•™ç¨‹ (github.com)</a></li><li><a href="https://zhuanlan.zhihu.com/p/607513892">2023å¹´VultræœåŠ¡å™¨æ˜¯å¦è¿˜å€¼å¾—ç”¨ - çŸ¥ä¹ (zhihu.com)</a></li><li><a href="https://github.com/xiaoming2028/FreePAC/wiki">Home Â· xiaoming2028/FreePAC Wiki (github.com)</a></li><li><a href="https://teddysun.com/486.html">Shadowsocks ä¸€é”®å®‰è£…è„šæœ¬ï¼ˆå››åˆä¸€ï¼‰ | ç§‹æ°´é€¸å†° (teddysun.com)</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä»…ä¾›æŠ€æœ¯å­¦ä¹ ä¸äº¤æµ&lt;br&gt;</summary>
    
    
    
    
    <category term="VPN" scheme="https://www.sekyoro.top/tags/VPN/"/>
    
  </entry>
  
  <entry>
    <title>Woxæ’ä»¶ç¼–å†™</title>
    <link href="https://www.sekyoro.top/2023/05/20/Wox%E6%8F%92%E4%BB%B6%E7%BC%96%E5%86%99/"/>
    <id>https://www.sekyoro.top/2023/05/20/Wox%E6%8F%92%E4%BB%B6%E7%BC%96%E5%86%99/</id>
    <published>2023-05-20T02:21:31.000Z</published>
    <updated>2023-08-01T09:15:10.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>æœ€è¿‘æ­£åœ¨ä½¿ç”¨Woxï¼Œè¿™ä¸ªè½¯ä»¶è¿˜æŒºé«˜æ•ˆçš„ï¼Œè€Œä¸”è¿˜èƒ½è‡ªå·±ç¼–å†™ä¸€äº›æ’ä»¶ï¼Œè¿™é‡Œæ‰“ç®—è‡ªå·±å†™ç‚¹æ’ä»¶ç”¨ç”¨.<br><span id="more"></span></p><p><a href="http://www.wox.one/">Wox</a>å®˜ç½‘</p><p><a href="http://www.wox.one/plugin">Plugin (wox.one)</a>æ’ä»¶,æ­¤å¤–å®˜æ–¹ä¹Ÿæä¾›äº†ç¼–å†™æ–‡æ¡£ï¼Œ<a href="http://doc.wox.one/zh/plugin/create_plugin.html">ç¼–å†™æ’ä»¶ Â· GitBook (wox.one)</a>æä¾›Pythonå’ŒC#ä¸¤ç§ä¼˜ç§€çš„è¯­è¨€ç¼–å†™æ–¹æ¡ˆã€‚æˆ‘è¿™é‡Œå°±ä½¿ç”¨Pythonå†™äº†.</p><p>é¦–å…ˆéœ€è¦åšçš„æ˜¯åˆ›å»ºæ–°çš„è™šæ‹Ÿç¯å¢ƒä½œéš”ç¦»ï¼Œä¸€èˆ¬ä½¿ç”¨pythonè‡ªå¸¦çš„<code>venv</code>æˆ–è€…<code>virtualenv</code>,å½“ç„¶ä¹Ÿæœ‰æ¯”è¾ƒæ–°çš„<code>pipenv</code>å’Œè¢«è®¤ä¸ºæ¯”è¾ƒé‡çš„<code>Anaconda</code>ï¼Œåä¸¤è€…ä¹Ÿæ˜¯åŒ…ç®¡ç†å™¨ï¼ŒåŠŸèƒ½æ¯”è¾ƒå¤šã€‚</p><p>ä»¥ä¸‹æ˜¯åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„ä»£ç ç¤ºä¾‹ï¼š</p><p>ä½¿ç”¨ virtualenvï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… virtualenv</span></span><br><span class="line">pip install virtualenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºåä¸º myenv çš„è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">virtualenv myenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆWindows å¹³å°ï¼‰</span></span><br><span class="line">myenv\Scripts\activate.bat</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆLinux å’Œ Mac å¹³å°ï¼‰</span></span><br><span class="line"><span class="built_in">source</span> myenv/bin/activate</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">deactivate</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ venvï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºåä¸º myenv çš„è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">python3 -m venv myenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line"><span class="built_in">source</span> myenv/bin/activate</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">deactivate</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ­¥è¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œç¯å¢ƒä¸èƒ½ä¹±ã€‚</p><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><p>å¯ä»¥çœ‹çœ‹å®˜æ–¹æ¡ˆä¾‹ä»¥åŠå…¶ä»–æ’ä»¶çš„ç›®å½•ç»“æ„</p><p><img data-src="https://s2.loli.net/2023/05/20/79rv3TcFb4fYPqn.png" alt="image-20230520114456394"></p><p>åœ¨åˆ›å»ºWoxçš„æ—¶å€™ï¼Œç”¨æˆ·å¿…é¡»åœ¨æ’ä»¶çš„æ ¹ç›®å½•æ–¹å¼ä¸€ä¸ªåä¸º<code>plugin.json</code>çš„æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶ä¸­åŒ…å«äº†è¯¥æ’ä»¶çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚</p><p><code>plugin.json</code>çš„æ ¼å¼å¦‚ä¸‹ï¼š <strong>è¯·åœ¨ç²˜è´´ä¸‹é¢ä»£ç çš„æ—¶å€™ç§»é™¤å…¶ä¸­çš„æ³¨é‡Š</strong></p><p>é‡ç‚¹æ˜¯è§¦å‘è¯<code>ActionKeyword</code>ä»¥åŠ<code>IcoPath</code>æ’ä»¶å›¾æ ‡,<code>ID</code>éœ€è¦ä¸€ä¸ª32ä½ä¸ä¸å…¶ä»–æ’ä»¶é‡å¤çš„éšæœºæ•°ï¼Œè‡ªå·±ç”Ÿæˆå³å¯ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;ID&quot;</span>:<span class="string">&quot;D2D2C23B084D411DB66FE0C79D6C2A6H&quot;</span>,   <span class="comment">//æ’ä»¶IDï¼Œ32ä½çš„UUID</span></span><br><span class="line">  <span class="attr">&quot;ActionKeyword&quot;</span>:<span class="string">&quot;wpm&quot;</span>,                     <span class="comment">//æ’ä»¶é»˜è®¤çš„è§¦å‘å…³é”®å­—</span></span><br><span class="line">  <span class="attr">&quot;Name&quot;</span>:<span class="string">&quot;WPM&quot;</span>,                              <span class="comment">//æ’ä»¶åå­—</span></span><br><span class="line">  <span class="attr">&quot;Description&quot;</span>:<span class="string">&quot;Wox Package Management&quot;</span>,    <span class="comment">//æ’ä»¶ä»‹ç»</span></span><br><span class="line">  <span class="attr">&quot;Author&quot;</span>:<span class="string">&quot;qianlifeng&quot;</span>,                     <span class="comment">//ä½œè€…</span></span><br><span class="line">  <span class="attr">&quot;Version&quot;</span>:<span class="string">&quot;1.0.0&quot;</span>,                         <span class="comment">//æ’ä»¶ç‰ˆæœ¬ï¼Œå¿…é¡»æ˜¯x.x.xçš„æ ¼å¼</span></span><br><span class="line">  <span class="attr">&quot;Language&quot;</span>:<span class="string">&quot;csharp&quot;</span>,                       <span class="comment">//æ’ä»¶è¯­è¨€ï¼Œç›®å‰æ”¯æŒcsharp,python</span></span><br><span class="line">  <span class="attr">&quot;Website&quot;</span>:<span class="string">&quot;http://www.getwox.com&quot;</span>,         <span class="comment">//æ’ä»¶ç½‘ç«™æˆ–è€…ä¸ªäººç½‘ç«™</span></span><br><span class="line">  <span class="attr">&quot;IcoPath&quot;</span>: <span class="string">&quot;Images\\pic.png&quot;</span>,              <span class="comment">//æ’ä»¶å›¾æ ‡ï¼Œè·¯å¾„æ˜¯ç›¸å¯¹æ’ä»¶æ ¹ç›®å½•çš„è·¯å¾„</span></span><br><span class="line">  <span class="attr">&quot;ExecuteFileName&quot;</span>:<span class="string">&quot;PluginManagement.dll&quot;</span>   <span class="comment">//æ‰§è¡Œæ–‡ä»¶å…¥å£ï¼Œå¦‚æœæ˜¯C#æ’ä»¶åˆ™å¡«å†™DLLè·¯å¾„ï¼Œå¦‚æœæ˜¯pyhtonåˆ™å¡«å†™pythonæ–‡ä»¶è·¯å¾„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±æ˜¯ä¸»æ–‡ä»¶ä»¥åŠæ’ä»¶å›¾æ ‡æ–‡ä»¶</p><h2 id="Pythonå¼€å‘"><a href="#Pythonå¼€å‘" class="headerlink" title="Pythonå¼€å‘"></a>Pythonå¼€å‘</h2><blockquote><p>Woxè‡ªå¸¦äº†ä¸€ä¸ªæ‰“åŒ…çš„PythonåŠå…¶æ ‡å‡†åº“ï¼Œæ‰€ä»¥ä½¿ç”¨Pythonæ’ä»¶çš„ç”¨æˆ·ä¸å¿…è‡ªå·±å†å®‰è£…Pythonç¯å¢ƒã€‚åŒæ—¶ï¼ŒWoxè¿˜æ‰“åŒ…äº†requestså’Œbeautifulsoup4ä¸¤ä¸ªåº“ï¼Œ æ–¹ä¾¿ç”¨æˆ·è¿›è¡Œç½‘ç»œè®¿é—®ä¸è§£æã€‚</p></blockquote><h3 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h3><p>ä½¿ç”¨Pythonå¼€å‘éœ€è¦æœ‰ä¸€ä¸ªç±»ç»§æ‰¿Wox,æ³¨æ„è¿™ä¸ªä¸œè¥¿å¹¶ä¸éœ€è¦pipä¸‹è½½ï¼Œæ˜¯Woxè‡ªå¸¦çš„è¿è¡Œæ—¶ï¼ŒåŒ…æ‹¬requestså’ŒBeautifulSoup4ï¼Œè€Œå…¶ä»–çš„ç¬¬ä¸‰æ–¹åŒ…éœ€è¦è‡ªå·±ä¸‹è½½.ä¸‹è½½Woxæ—¶æœ‰ä¸€ä¸ªfull-installeråŒ…å«pythonè§£é‡Šå™¨ï¼Œè‡ªå·±å¯ä»¥è®¾ç½®Pythonè§£é‡Šå™¨æ–‡ä»¶å¤¹è·¯å¾„ä¸ºç¯å¢ƒå˜é‡ï¼Œä¸€èˆ¬ä¸‹è½½Pythonæ—¶é€‰æ‹©åŠ å…¥ç¯å¢ƒå˜é‡å³å¯ã€‚</p><p>ç»§æ‰¿Woxç±»åå…³é”®è¦ç»§æ‰¿çš„æ–¹æ³•æ˜¯<code>query</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> webbrowser</span><br><span class="line"><span class="keyword">from</span> wox <span class="keyword">import</span> Wox,WoxAPI</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”¨æˆ·å†™çš„Pythonç±»å¿…é¡»ç»§æ‰¿Woxç±» https://github.com/qianlifeng/Wox/blob/master/PythonHome/wox.py</span></span><br><span class="line"><span class="comment">#è¿™é‡Œçš„WoxåŸºç±»åšäº†ä¸€äº›å·¥ä½œï¼Œç®€åŒ–äº†ä¸Woxé€šä¿¡çš„æ­¥éª¤ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Main</span>(<span class="params">Wox</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">request</span>(<span class="params">self,url</span>):</span></span><br><span class="line">    <span class="comment">#å¦‚æœç”¨æˆ·é…ç½®äº†ä»£ç†ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¿™é‡Œè®¾ç½®ã€‚è¿™é‡Œçš„self.proxyæ¥è‡ªWoxå°è£…å¥½çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> self.proxy <span class="keyword">and</span> self.proxy.get(<span class="string">&quot;enabled&quot;</span>) <span class="keyword">and</span> self.proxy.get(<span class="string">&quot;server&quot;</span>):</span><br><span class="line">      proxies = &#123;</span><br><span class="line">        <span class="string">&quot;http&quot;</span>:<span class="string">&quot;http://&#123;&#125;:&#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.proxy.get(<span class="string">&quot;server&quot;</span>),self.proxy.get(<span class="string">&quot;port&quot;</span>)),</span><br><span class="line">        <span class="string">&quot;https&quot;</span>:<span class="string">&quot;http://&#123;&#125;:&#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.proxy.get(<span class="string">&quot;server&quot;</span>),self.proxy.get(<span class="string">&quot;port&quot;</span>))&#125;</span><br><span class="line">      <span class="keyword">return</span> requests.get(url,proxies = proxies)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">return</span> requests.get(url)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å¿…é¡»æœ‰ä¸€ä¸ªqueryæ–¹æ³•ï¼Œç”¨æˆ·æ‰§è¡ŒæŸ¥è¯¢çš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨queryæ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span>(<span class="params">self,key</span>):</span></span><br><span class="line">    r = self.request(<span class="string">&#x27;https://news.ycombinator.com/&#x27;</span>)</span><br><span class="line">    bs = BeautifulSoup(r.text)</span><br><span class="line">    results = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> bs.select(<span class="string">&quot;.comhead&quot;</span>):</span><br><span class="line">      title = i.previous_sibling.text</span><br><span class="line">      url = i.previous_sibling[<span class="string">&quot;href&quot;</span>]</span><br><span class="line">      results.append(&#123;</span><br><span class="line">        <span class="string">&quot;Title&quot;</span>: title ,</span><br><span class="line">        <span class="string">&quot;SubTitle&quot;</span>:title,</span><br><span class="line">        <span class="string">&quot;IcoPath&quot;</span>:<span class="string">&quot;Images/app.ico&quot;</span>,</span><br><span class="line">        <span class="string">&quot;JsonRPCAction&quot;</span>:&#123;</span><br><span class="line">          <span class="comment">#è¿™é‡Œé™¤äº†è‡ªå·²å®šä¹‰çš„æ–¹æ³•ï¼Œè¿˜å¯ä»¥è°ƒç”¨Woxçš„APIã€‚è°ƒç”¨æ ¼å¼å¦‚ä¸‹ï¼šWox.xxxxæ–¹æ³•å</span></span><br><span class="line">          <span class="comment">#æ–¹æ³•åå­—å¯ä»¥ä»è¿™é‡ŒæŸ¥é˜…https://github.com/qianlifeng/Wox/blob/master/Wox.Plugin/IPublicAPI.cs ç›´æ¥åŒåæ–¹æ³•å³å¯</span></span><br><span class="line">          <span class="string">&quot;method&quot;</span>: <span class="string">&quot;openUrl&quot;</span>,</span><br><span class="line">          <span class="comment">#å‚æ•°å¿…é¡»ä»¥æ•°ç»„çš„å½¢å¼ä¼ è¿‡å»</span></span><br><span class="line">          <span class="string">&quot;parameters&quot;</span>:[url],</span><br><span class="line">          <span class="comment">#æ˜¯å¦éšè—çª—å£</span></span><br><span class="line">          <span class="string">&quot;dontHideAfterAction&quot;</span>:<span class="literal">True</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> results</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">openUrl</span>(<span class="params">self,url</span>):</span></span><br><span class="line">    webbrowser.<span class="built_in">open</span>(url)</span><br><span class="line">    WoxAPI.change_query(url)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä»¥ä¸‹ä»£ç æ˜¯å¿…é¡»çš„</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">Main()</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸ªä¾‹å­å°±å¾ˆå…¸å‹ï¼Œæ¯æ¬¡åœ¨Woxä¸­è¾“å…¥å°±ä¼šè°ƒç”¨queryæ–¹æ³•,å…¶éœ€è¦è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­æ¯ä¸€é¡¹å†…å®¹å¦‚ä¸‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        <span class="attr">&quot;Title&quot;</span>: title ,</span><br><span class="line">        <span class="attr">&quot;SubTitle&quot;</span>:title,</span><br><span class="line">        <span class="attr">&quot;IcoPath&quot;</span>:<span class="string">&quot;Images/app.ico&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;JsonRPCAction&quot;</span>:&#123;</span><br><span class="line">          <span class="attr">&quot;method&quot;</span>: <span class="string">&quot;openUrl&quot;</span>,  </span><br><span class="line">          <span class="attr">&quot;parameters&quot;</span>:[url],</span><br><span class="line">          <span class="attr">&quot;dontHideAfterAction&quot;</span>:True</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p><img data-src="https://s2.loli.net/2023/05/21/rqlJXwZEeTzhdIK.png" alt="image-20230521171823745"></p><p>å…¶ä¸­,æ‹¿ä¸€ä¸ªç¿»è¯‘æ’ä»¶æ¥è¯´ï¼ŒTitleå°±æ˜¯è¦ç‚¹,SubTitleå°±æ˜¯ç¿»è¯‘ç»“æœ,icoPathæ˜¯å·¦è¾¹å›¾æ ‡çš„è·¯å¾„ï¼Œæˆ‘æµ‹è¯•äº†å¿…é¡»ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ï¼Œè€ŒJsonRPCActionå°±æ˜¯æŒ‰Enteré”®æˆ–é¼ æ ‡å·¦å‡»åçš„å“åº”ï¼Œmethodå°±æ˜¯è§¦å‘çš„æ–¹æ³•ï¼Œå¯ä»¥è‡ªå·±å†™ï¼Œä¹Ÿå¯ä»¥ç”¨wox.py<a href="https://github.com/Wox-launcher/Wox/blob/master/JsonRPC/wox.py">Wox/wox.py at master Â· Wox-launcher/Wox Â· GitHub</a>ä¸­çš„WoxAPIæ–¹æ³•,parameterså°±æ˜¯å‚æ•°ï¼Œè¦æ±‚ä¼ å…¥ä¸€ä¸ªåˆ—è¡¨.<code>dontHideAfterAction</code>è¡¨ç¤ºç‚¹å‡»ä¹‹åWoxä¼šä¸ä¼šéšè—.</p><p>æ­¤å¤–è¿˜æœ‰ä¸ªæœ‰æ„æ€çš„æ–¹æ³•å°±æ˜¯<code>context_menu</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">context_menu</span>(<span class="params">self, data</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    optional context menu entries for a result</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> []</span><br></pre></td></tr></table></figure><p>å°±æ˜¯é¼ æ ‡å³å‡»æˆ–è€…Shift+Enteråçš„å“åº”ï¼Œ<strong>éœ€è¦æ³¨æ„çš„æ˜¯</strong>,é‡è½½çš„å¿…é¡»æ˜¯<code>context_menu(self, data)</code>,ä¸èƒ½ç¡®å°‘dataå‚æ•°ï¼Œè¿™ä¸ªdataå¯ä»¥åœ¨queryæ–¹æ³•ä¸­è¿”å›çš„ç»“æœé‡Œè®¾ç½®<code>ContextData</code>å¦‚ä¸‹</p><p><img data-src="https://s2.loli.net/2023/05/22/Tu4YXj6OHxD9ngG.png" alt="image-20230522112012105" style="zoom:67%;" /></p><p>æ¯”å¦‚æˆ‘åœ¨Context menué‡Œæ·»åŠ ä¸€é¡¹<code>å»æˆ‘çš„åšå®¢çœ‹çœ‹</code>,ä¸‹é¢ä¸¤é¡¹æ˜¯é»˜è®¤çš„.</p><p><img data-src="https://s2.loli.net/2023/05/22/vLZGqJ58NnWkBoi.png" alt="image-20230522113028138" style="zoom: 67%;" /></p><p>æ‰€ä»¥<code>query</code>å’Œ<code>context_menu</code>è¿”å›çš„ç»“æœå°±æ˜¯å±•ç¤ºçš„ç»“æœé¡¹ç›®ã€‚</p><h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h3><h4 id="æ—¥å¿—"><a href="#æ—¥å¿—" class="headerlink" title="æ—¥å¿—"></a>æ—¥å¿—</h4><p>åƒå¯¹äºè¿™ç§æ’ä»¶çš„å¼€å‘ä¸ªäººè®¤ä¸ºæ˜¯æ¯”è¾ƒç´¯çš„ï¼Œdebugæ¯”è¾ƒéº»çƒ¦,ä¸èƒ½åœ¨ç»ˆç«¯ç›´æ¥æ˜¾ç¤ºï¼Œä¸åƒä¸€èˆ¬çš„å®¢æˆ·ç«¯æˆ–è€…Webå¼€å‘ï¼Œæ‰€ä»¥æ—¥å¿—è¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œä¸»è¦ä½¿ç”¨Pythonè‡ªå¸¦çš„loggingæ¨¡å—.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ—¥å¿—è®°å½•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        filename = os.path.join(os.path.dirname(__file__), <span class="string">&#x27;log.txt&#x27;</span>)</span><br><span class="line">        logging.basicConfig(level=logging.DEBUG, filename=filename, filemode=<span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">                            <span class="built_in">format</span>=<span class="string">&#x27;%(asctime)s - %(filename)s[line:%(lineno)d] - %(levelname)s: %(message)s&#x27;</span>)</span><br><span class="line">        self.logger = logging.getLogger()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">debug</span>(<span class="params">self, msg</span>):</span></span><br><span class="line">        self.logger.debug(msg)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">info</span>(<span class="params">self, msg</span>):</span></span><br><span class="line">        self.logger.info(msg)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span>(<span class="params">self, msg</span>):</span></span><br><span class="line">        self.logger.error(msg)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ—¶åˆå§‹åŒ–Logger,å†æ‰ç”¨å®ä¾‹æ–¹æ³•è¾“å‡ºä¿¡æ¯åˆ°æ–‡ä»¶.</p><h4 id="æ˜¾ç¤ºé¡¹ç›®"><a href="#æ˜¾ç¤ºé¡¹ç›®" class="headerlink" title="æ˜¾ç¤ºé¡¹ç›®"></a>æ˜¾ç¤ºé¡¹ç›®</h4><p>Woxæ’ä»¶æœºåˆ¶å«åš<a href="https://www.jsonrpc.org/specification">JSON-RPC 2.0 Specification (jsonrpc.org)</a>,åˆ©ç”¨è¿™ç§æ–¹æ³•å°†è¦å±•ç¤ºçš„ä¿¡æ¯å‘ç»™Woxå¹¶æ˜¾ç¤ºå‡ºæ¥.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">query</span>(<span class="params">self, key</span>):</span></span><br><span class="line">    self.results = []</span><br><span class="line">    logger = Logger()</span><br><span class="line">    logger.info(<span class="string">&quot;-------------info--------------&quot;</span>)</span><br><span class="line"></span><br><span class="line">    args = key.split()</span><br><span class="line">    length = <span class="built_in">len</span>(args)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> length == <span class="number">0</span>:</span><br><span class="line">        self.results.append(</span><br><span class="line">            self.add_item(<span class="string">&quot;æœ‰é“æ™ºäº‘ç¿»è¯‘(æ­£åœ¨å¼€å‘ä¸­)&quot;</span>, <span class="string">&quot;éœ€è¦é…ç½®key&quot;</span>, <span class="string">&#x27;Images/zhiyun.png&#x27;</span>, <span class="string">&quot;configyoudao&quot;</span>, <span class="string">&quot;zy&quot;</span>))</span><br><span class="line">        self.results.append(</span><br><span class="line">            self.add_item(<span class="string">&quot;ä½¿ç”¨æœ‰é“ç¿»è¯‘å…è´¹ç‰ˆæœ¬&quot;</span>, <span class="string">&quot;æš‚åªæ”¯æŒä¸­è‹±äº’è¯‘&quot;</span>, <span class="string">&#x27;Images/youdao.png&#x27;</span>, <span class="string">&quot;freetrans&quot;</span>, <span class="string">&quot;yd&quot;</span>))</span><br><span class="line">        self.results.append(self.add_item(<span class="string">&quot;ä½¿ç”¨ç™¾åº¦ç¿»è¯‘&quot;</span>, <span class="string">&quot;éœ€è¦é…ç½®key&quot;</span>, <span class="string">&#x27;Images/bd.png&#x27;</span>, <span class="string">&quot;configbaidu&quot;</span>, <span class="string">&quot;bd&quot;</span>))</span><br><span class="line">        self.results.append(self.add_item(<span class="string">&quot;é‡è½½æ’ä»¶&quot;</span>, <span class="string">&quot;é‡æ–°åŠ è½½æ’ä»¶&quot;</span>, <span class="string">&#x27;Images/pic.jpg&#x27;</span>, <span class="string">&quot;reload&quot;</span>))</span><br><span class="line">        <span class="keyword">return</span> self.results</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> self.results</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯æˆ‘å†™çš„éƒ¨åˆ†ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°è¿”å›äº†ä¸€ä¸ªåˆ—è¡¨ï¼Œå±•ç¤ºå‡ºæ¥å°±æ˜¯ä¸‹é¢æ ·å­çš„</p><p><img data-src="https://s2.loli.net/2023/05/21/K5TBRAWYpmGbeaf.png" alt="image-20230521172551777"></p><p>å¯ä»¥é€šè¿‡æ˜¾ç¤ºé¡¹ç›®çš„æ–¹æ³•debug.</p><h3 id="å“åº”æ–¹æ³•"><a href="#å“åº”æ–¹æ³•" class="headerlink" title="å“åº”æ–¹æ³•"></a>å“åº”æ–¹æ³•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">openUrl</span>(<span class="params">self, url</span>):</span></span><br><span class="line">    webbrowser.<span class="built_in">open</span>(url)</span><br><span class="line">    WoxAPI.change_query(url, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure><p>åœ¨è¿”å›çš„é¡¹ç›®ä¸­ï¼Œ<code>JsonRPCAction</code>çš„methodå°±å¡«æ–¹æ³•å,å¯ä»¥å†™åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œå¯ä»¥ä½¿ç”¨WoxAPIæ”¹å˜queryä¹Ÿå°±æ˜¯æœç´¢çš„å­—ç¬¦ä¸²ï¼Œæ­¤å¤–è¿˜æœ‰å…¶ä»–æ–¹æ³•ï¼Œ<strong>æ³¨æ„</strong>ï¼Œæˆ‘æµ‹è¯•çš„å‘ç°show_msgå·²ç»æ— æ³•æ­£å¸¸ä½¿ç”¨äº†</p><p><img data-src="https://s2.loli.net/2023/05/21/kwTv5QKbJtL716S.png" alt="image-20230521173212739" style="zoom:50%;" /></p><p><code>JsonRPCAction</code>çš„parametersä¼ å…¥çš„åˆ—è¡¨å°±å¯¹åº”methodä¸­çš„å‚æ•°ï¼Œæ¯”å¦‚ä¼ [1,2],è€Œmethodä¸­å°±å¯ä»¥ä½¿ç”¨method(a,b)æ¥æ¥æ”¶,å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨method(*para)ç”¨ä¸€ä¸ªå…ƒç»„æ¥æ”¶.</p><p><img data-src="https://s2.loli.net/2023/05/21/7FJRkB6H21wNcsL.png" alt="image-20230521174809680"></p><h3 id="æ›´æ–°åˆ°Woxæ‰©å±•"><a href="#æ›´æ–°åˆ°Woxæ‰©å±•" class="headerlink" title="æ›´æ–°åˆ°Woxæ‰©å±•"></a>æ›´æ–°åˆ°Woxæ‰©å±•</h3><p>ç›®å‰ä»£ç å·²ç»ä¼ åˆ°Githubä¸Š,Woxæœ¬èº«æœ‰ä¸€ä¸ªæ‰©å±•åº“.</p><p>æ¬¢è¿ä¸‹è½½<a href="http://www.wox.one/plugin/416">Plugin Detail (wox.one)</a></p><p><img data-src="https://s2.loli.net/2023/07/29/5WwyJq6p7l9oRiK.png" alt="image-20230729211142583"></p><h3 id="Bç«™ç›´æ’­ä¿¡æ¯æŸ¥çœ‹"><a href="#Bç«™ç›´æ’­ä¿¡æ¯æŸ¥çœ‹" class="headerlink" title="Bç«™ç›´æ’­ä¿¡æ¯æŸ¥çœ‹"></a>Bç«™ç›´æ’­ä¿¡æ¯æŸ¥çœ‹</h3><p>ç”±äºå¹³æ—¶ä¼šçœ‹çœ‹ç›´æ’­,æ‰¾åˆ°äº†ä¸€ä¸ªå…³äºBç«™æ¥å£çš„é¡¹ç›®<a href="https://github.com/SocialSisterYi/bilibili-API-collect">GitHub - SocialSisterYi/bilibili-API-collect: å“”å“©å“”å“©-APIæ”¶é›†æ•´ç†ã€ä¸æ–­æ›´æ–°ä¸­â€¦.ã€‘</a></p><p>åˆ©ç”¨å…¶ä¸­çš„ä¸€äº›æ¥å£ä½¿ç”¨Woxå¿«é€Ÿçœ‹çœ‹æŸä¸ªç›´æ’­æ˜¯ä¸æ˜¯åœ¨ç›´æ’­.</p><p>ç›®å‰æ‰“ç®—çš„æ–¹æ³•æ˜¯è®©ç”¨æˆ·å¡«å†™é…ç½®ä¿¡æ¯,è®©ç”¨æˆ·å¡«å¥½Cookieå,ç›´æ¥è°ƒç”¨è¯·æ±‚æŸ¥çœ‹å…³æ³¨çš„æ­£åœ¨ç›´æ’­çš„ç”¨æˆ·.</p><p><img data-src="https://s2.loli.net/2023/07/29/Y8n1iPpI4Qmr9Db.png" alt="æ¡†æ¶" style="zoom:67%;" /></p><p>ç”¨æˆ·åœ¨webä¸Šç™»é™†å,åœ¨é…ç½®æ–‡ä»¶ä¸­<code>config.json</code>ä¸­å†™<code>SESSDATA</code></p><p><img data-src="https://s2.loli.net/2023/07/29/vftBx4l81mpG3jS.png" alt="image-20230729221851699"></p><p>ç„¶åè°ƒç”¨æ¥å£å³å¯.</p><p>ä¸»è¦æ³¨æ„ä¸¤ç‚¹,ä¸€ä¸ªæ˜¯åœ¨JSONRPCé‡Œä¸è¦è½»æ˜“è°ƒç”¨åŸæœ¬ç±»é‡Œä¸œè¥¿.æ¯”å¦‚æˆ‘å†™äº†ä¸ª<code>Logger</code>ç±»,å¹¶åœ¨<code>Main</code>ç±»é‡Œå®ä¾‹åŒ–äº†è¿™ä¸ªç±»,å¹¶å¢åŠ äº†<code>searchall</code>æ–¹æ³•,é€šè¿‡<code>JsonRPCAction</code>è°ƒç”¨.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_item</span>(<span class="params">self, title, subtitle, icopath, method, *parameters</span>):</span></span><br><span class="line">    item = &#123;</span><br><span class="line">        <span class="string">&quot;Title&quot;</span>: title,</span><br><span class="line">        <span class="string">&quot;SubTitle&quot;</span>: subtitle,</span><br><span class="line">        <span class="string">&quot;IcoPath&quot;</span>: icopath,</span><br><span class="line">        <span class="string">&quot;JsonRPCAction&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;method&quot;</span>: method,</span><br><span class="line">            <span class="string">&quot;parameters&quot;</span>: parameters,</span><br><span class="line">            <span class="string">&quot;dontHideAfterAction&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œçš„<code>searchall</code>æ–¹æ³•é‡Œæ˜¯ä¸èƒ½ä½¿ç”¨<code>logger</code>è¾“å‡ºæ—¥å¿—çš„.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">self.results.append(</span><br><span class="line">            self.add_item(<span class="string">&quot;BiliLive&quot;</span>, <span class="string">&quot;æŸ¥çœ‹è‡ªå·±å…³æ³¨çš„æ­£åœ¨ç›´æ’­çš„ä¸»æ’­&quot;</span>, <span class="string">&#x27;Images/pic.png&#x27;</span>,<span class="string">&quot;searchall&quot;</span>,<span class="string">&quot;all&quot;</span>)</span><br><span class="line">        self.results.append(</span><br><span class="line">            self.add_item(<span class="string">&quot;Config Cookie&quot;</span>, <span class="string">&quot;é…ç½®ä½ çš„Cookie&quot;</span>, <span class="string">&#x27;Images/cookie.png&#x27;</span>, <span class="string">&quot;openviewer&quot;</span>))</span><br><span class="line">        self.results.append(</span><br><span class="line">            self.add_item(<span class="string">&quot;reload&quot;</span>, <span class="string">&quot;åˆ·æ–°é‡è½½æ’ä»¶&quot;</span>, <span class="string">&#x27;Images/pic.png&#x27;</span>, <span class="string">&quot;reload&quot;</span>))</span><br><span class="line"><span class="keyword">return</span> self.results</span><br></pre></td></tr></table></figure><p><img data-src="https://s2.loli.net/2023/07/30/eV4fpqWTwSZFCmI.png" alt="image-20230730165948141"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol><li>Pythonç¼–å†™æ’ä»¶ç›¸å…³èµ„æ–™æ¯”è¾ƒå°‘,C#è¦å¤šä¸€ç‚¹</li><li>å¯ä»¥å‚è€ƒè¿™ä¸ªæ–‡ä»¶çš„ä»£ç ,è¿˜æ˜¯ä¸é”™çš„<a href="https://github.com/Wox-launcher/Wox/tree/master/Plugins/HelloWorldPython">Wox/Plugins/HelloWorldPython at master Â· Wox-launcher/Wox Â· GitHub</a></li><li>å¯ä»¥çœ‹çœ‹æˆ‘çš„ç¿»è¯‘æ’ä»¶,æ”¯æŒå…è´¹ä¸­è‹±äº’è¯‘,ä¹Ÿæ”¯æŒç™¾åº¦çš„æœ‰ä¸€å®šå…è´¹é¢åº¦çš„APIç¿»è¯‘ï¼Œæ”¯æŒå¤šç§è¯­è¨€<br> <img data-src="https://s2.loli.net/2023/05/21/zH9peMTlJg13GYU.png" alt="image-20230521173938835"><br> <img data-src="https://s2.loli.net/2023/05/21/7CioWXbFr4nSx3d.png" alt="image-20230521174103179"></li><li>å¦‚æœå‘ä¸Šä¼ ç»™åˆ«äººç”¨,éœ€è¦å‹ç¼©æ•´ä¸ªæ–‡ä»¶å¤¹ç„¶åæ”¹åç¼€åä¸ºwox<a href="https://github.com/Wox-launcher/Wox/issues/2199">How to create <code>.wox</code> Â· Issue #2199 Â· Wox-launcher/Wox (github.com)</a></li><li>æœ€åæˆ‘åœ¨Woxçš„pluginä¸Šä¸Šä¼ äº†è¿™ä¸¤ä¸ªæ’ä»¶,æ¬¢è¿starä»¥åŠä¸‹è½½ä½¿ç”¨!</li></ol><p><img data-src="https://s2.loli.net/2023/07/30/TgMsi4I7SWyD9Pj.png" alt="image-20230730120855907"></p><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><ol><li><a href="https://zhuanlan.zhihu.com/p/81568689#:~:text=virtualenv ï¼šPython è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·ã€‚ venv ï¼šPython æ ‡å‡†åº“å†…ç½®çš„è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·ï¼ŒPython 3.3 åŠ å…¥ï¼ŒPython,å¼€å§‹ä½œä¸ºç®¡ç†è™šæ‹Ÿç¯å¢ƒçš„æ¨èå·¥å…·ï¼Œç”¨æ³•ç±»ä¼¼ virtualenvã€‚ å¦‚æœä½ ä½¿ç”¨ Python 3ï¼Œæ¨èä½¿ç”¨ venv æ¥æ›¿ä»£ virtualenvã€‚">è¦ä¸æˆ‘ä»¬è¿˜æ˜¯ç”¨å› virtualenv/venv å’Œ pip å§ </a></li><li><a href="https://github.com/Wox-launcher/Wox/blob/master/JsonRPC/wox.py">Wox/wox.py at master Â· Wox-launcher/Wox Â· GitHub</a></li></ol><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘æ­£åœ¨ä½¿ç”¨Woxï¼Œè¿™ä¸ªè½¯ä»¶è¿˜æŒºé«˜æ•ˆçš„ï¼Œè€Œä¸”è¿˜èƒ½è‡ªå·±ç¼–å†™ä¸€äº›æ’ä»¶ï¼Œè¿™é‡Œæ‰“ç®—è‡ªå·±å†™ç‚¹æ’ä»¶ç”¨ç”¨.&lt;br&gt;</summary>
    
    
    
    
    <category term="python" scheme="https://www.sekyoro.top/tags/python/"/>
    
    <category term="æ’ä»¶" scheme="https://www.sekyoro.top/tags/%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
</feed>
